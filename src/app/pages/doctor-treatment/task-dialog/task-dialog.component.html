<div class="task-dialog">
  <div class="dialog-content">
    <div class="patient-info" *ngIf="data.patientId && data.patientName !== 'General Task'">
      <span class="patient-label">Patient:</span>
      <span class="patient-name">{{ data.patientName }}</span>
    </div>

    <form [formGroup]="taskForm" class="task-form">
      <div class="form-row">
        <app-selectbox
          [label]="'Task Type'"
          [options]="taskTypeOptionsArray"
          [formGroup]="taskForm"
          formControlName="taskType">
        </app-selectbox>

        <app-selectbox
          [label]="'Priority'"
          [options]="priorityOptionsArray"
          [formGroup]="taskForm"
          formControlName="priority">
        </app-selectbox>
      </div>

      <div class="form-row">
        <app-input
          [label]="'Task Title'"
          [formGroup]="taskForm"
          formControlName="title"
          [required]="true">
        </app-input>
      </div>

      <div class="form-row">
        <app-input
          [label]="'Description'"
          [multiline]="true"
          [rows]="3"
          [formGroup]="taskForm"
          formControlName="description"
          [required]="true">
        </app-input>
      </div>

      <div class="form-row">
        <app-input
          [label]="'Due Date'"
          [type]="'datetime-local'"
          [formGroup]="taskForm"
          formControlName="dueDate"
          [required]="true">
        </app-input>

        <app-input
          [label]="'Estimated Duration (minutes)'"
          [type]="'number'"
          [formGroup]="taskForm"
          formControlName="estimatedDuration">
        </app-input>
      </div>

      <div class="form-row">
        <app-input
          [label]="'Location'"
          [formGroup]="taskForm"
          formControlName="location"
          [required]="!!(data.patientId && data.patientName !== 'General Task')">
        </app-input>
      </div>

      <div class="form-row">
        <app-input
          [label]="'Notes'"
          [multiline]="true"
          [rows]="2"
          [formGroup]="taskForm"
          formControlName="notes">
        </app-input>
      </div>

      <div class="form-row checkbox-row">
        <label class="checkbox-label">
          <input
            type="checkbox"
            formControlName="requiresFollowUp"
            class="checkbox-input">
          <span>Requires Follow-up</span>
        </label>
      </div>

      <div class="form-row" *ngIf="taskForm.get('requiresFollowUp')?.value">
        <app-input
          [label]="'Follow-up Date'"
          [type]="'datetime-local'"
          [formGroup]="taskForm"
          formControlName="followUpDate">
        </app-input>
      </div>
    </form>
  </div>
</div>

