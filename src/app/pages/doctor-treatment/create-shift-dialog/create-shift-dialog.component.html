<div class="create-shift-dialog" [formGroup]="shiftForm">
  <div class="form-section">
    <h3 class="section-title">Shift Information</h3>

    <div class="form-row">
      <app-input
        label="Shift Name"
        formControlName="name"
        placeholder="e.g., Day Shift"
        [required]="true"
        [errorMessage]="getFieldError('name')">
      </app-input>
    </div>

    <div class="form-row time-row">
      <app-input
        label="Start Time"
        type="time"
        formControlName="startTime"
        [required]="true"
        [errorMessage]="getFieldError('startTime')">
      </app-input>
      <app-input
        label="End Time"
        type="time"
        formControlName="endTime"
        [required]="true"
        [errorMessage]="getFieldError('endTime')">
      </app-input>
    </div>
  </div>

  <div class="form-section">
    <h3 class="section-title">Schedule Type</h3>
    <div class="schedule-type-buttons">
      <app-button
        appearance="stroked"
        [text]="'Specific Days'"
        [class.active]="scheduleType === 'days'"
        (btnClick)="onScheduleTypeChange('days')">
      </app-button>
      <app-button
        appearance="stroked"
        [text]="'Full Week'"
        [class.active]="scheduleType === 'week'"
        (btnClick)="onScheduleTypeChange('week')">
      </app-button>
    </div>

    @if (scheduleType === 'days') {
      <div class="days-selection">
        <div class="days-grid">
          @for (day of weekDays; track day) {
            <button
              type="button"
              class="day-button"
              [class.selected]="isDaySelected(day)"
              (click)="toggleDay(day)">
              {{ day }}
            </button>
          }
        </div>
        @if (daysError) {
          <div class="error-message">
            {{ daysError }}
          </div>
        }
      </div>
    }
  </div>

  <div class="form-section">
    <h3 class="section-title">Assign Staff Members</h3>
    <div class="staff-selection">
      <div class="staff-list">
        @for (staff of availableStaff; track staff) {
          <div
            class="staff-item"
            [class.selected]="isStaffSelected(staff.id)"
            (click)="toggleStaffSelection(staff.id)">
            <div class="staff-info">
              <div class="staff-name">{{ staff.name }}</div>
              <div class="staff-role">{{ staff.role }} - {{ staff.department }}</div>
            </div>
            <app-icon
              [fontIcon]="isStaffSelected(staff.id) ? 'check_circle' : 'radio_button_unchecked'"
              [size]="20"
              [color]="isStaffSelected(staff.id) ? '#3b82f6' : '#9ca3af'">
            </app-icon>
          </div>
        }
      </div>
      @if (selectedStaffIds.length > 0) {
        <div class="selected-staff-summary">
          <strong>{{ selectedStaffIds.length }} staff member(s) selected</strong>
        </div>
      }
      @if (staffError) {
        <div class="error-message">
          {{ staffError }}
        </div>
      }
    </div>
  </div>
</div>

