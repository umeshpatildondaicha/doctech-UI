<div class="new-medication-dialog">
  <div class="dialog-body">
    <div class="form-area">
      <div class="form-row">
        <div class="form-field">
          <label>Medicine Name</label>
          <input type="text" [(ngModel)]="formData.medicineName" placeholder="e.g., Ibuprofen" />
        </div>
        <div class="form-field">
          <label>Dosage</label>
          <input type="text" [(ngModel)]="formData.dosage" placeholder="e.g., Select dosage" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>Frequency</label>
          <input type="text" [(ngModel)]="formData.frequency" placeholder="e.g., 3 times a day" />
        </div>
        <div class="form-field">
          <label>Quantity</label>
          <input type="number" [(ngModel)]="formData.quantity" placeholder="e.g., 30" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>Timing</label>
          <div class="timing-pills">
            <app-button type="button" class="pill" [class.active]="formData.timing === 'Morning'" [text]="'Morning'" [appearance]="'stroked'" (btnClick)="setTiming('Morning')"></app-button>
            <app-button type="button" class="pill" [class.active]="formData.timing === 'Afternoon'" [text]="'Afternoon'" [appearance]="'stroked'" (btnClick)="setTiming('Afternoon')"></app-button>
            <app-button type="button" class="pill" [class.active]="formData.timing === 'Evening'" [text]="'Evening'" [appearance]="'stroked'" (btnClick)="setTiming('Evening')"></app-button>
            <app-button type="button" class="pill" [class.active]="formData.timing === 'Night'" [text]="'Night'" [appearance]="'stroked'" (btnClick)="setTiming('Night')"></app-button>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>Route</label>
          <input type="text" [(ngModel)]="formData.route" placeholder="e.g., Select route" />
        </div>
        <div class="form-field">
          <label>Reason for Request</label>
          <input type="text" [(ngModel)]="formData.reasonForRequest" placeholder="Enter reason" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-field full-width">
          <label>Current Symptoms</label>
          <textarea rows="3" [(ngModel)]="formData.currentSymptoms" placeholder="Describe symptoms"></textarea>
        </div>
      </div>
      @if (mode === 'create') {
        <div class="form-actions">
          <app-button type="button" [text]="'Add to Cart'" [appearance]="'stroked'" [disabled]="!isFormValid" (btnClick)="onAddToCart()"></app-button>
        </div>
      }
    </div>
    @if (mode === 'create') {
      <div class="summary-area">
        <h4>Requested Medications Summary</h4>
        <div class="summary-list">
          @for (med of selectedMedicines; track med) {
            <div class="summary-item">
              <div class="summary-main">
                <div class="summary-title">{{ med.name }}</div>
                <div class="summary-sub">{{ med.dosage }} â€¢ {{ med.frequency }}</div>
              </div>
              <div class="summary-actions">
                <app-button type="button" [fontIcon]="'edit'" [appearance]="'icon'" (btnClick)="onEditMedicine(med)"></app-button>
                <app-button type="button" [fontIcon]="'delete'" [appearance]="'icon'" (btnClick)="onRemoveMedicine(med.id)"></app-button>
              </div>
            </div>
          }
          @if (selectedMedicines.length === 0) {
            <div class="empty-summary">
              <p>No medicines added yet. Fill the form and click "Add to Cart" to add medicines.</p>
            </div>
          }
        </div>
      </div>
    }
  </div>
</div>

