<div class="new-medication-dialog">
  <div class="dialog-body">
    <div class="form-area">
      <div class="form-row">
        <div class="form-field">
          <label>Medicine Name</label>
          <input type="text" [(ngModel)]="formData.medicineName" placeholder="e.g., Ibuprofen" />
        </div>
        <div class="form-field">
          <label>Dosage</label>
          <input type="text" [(ngModel)]="formData.dosage" placeholder="e.g., Select dosage" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>Frequency</label>
          <input type="text" [(ngModel)]="formData.frequency" placeholder="e.g., 3 times a day" />
        </div>
        <div class="form-field">
          <label>Quantity</label>
          <input type="number" [(ngModel)]="formData.quantity" placeholder="e.g., 30" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>Timing</label>
          <div class="timing-pills">
            <button
              type="button"
              class="pill"
              [class.active]="formData.timing === 'Morning'"
              (click)="setTiming('Morning')">
              Morning
            </button>
            <button
              type="button"
              class="pill"
              [class.active]="formData.timing === 'Afternoon'"
              (click)="setTiming('Afternoon')">
              Afternoon
            </button>
            <button
              type="button"
              class="pill"
              [class.active]="formData.timing === 'Evening'"
              (click)="setTiming('Evening')">
              Evening
            </button>
            <button
              type="button"
              class="pill"
              [class.active]="formData.timing === 'Night'"
              (click)="setTiming('Night')">
              Night
            </button>
          </div>
        </div>
      </div>
      <div class="form-row">
        <div class="form-field">
          <label>Route</label>
          <input type="text" [(ngModel)]="formData.route" placeholder="e.g., Select route" />
        </div>
        <div class="form-field">
          <label>Reason for Request</label>
          <input type="text" [(ngModel)]="formData.reasonForRequest" placeholder="Enter reason" />
        </div>
      </div>
      <div class="form-row">
        <div class="form-field full-width">
          <label>Current Symptoms</label>
          <textarea rows="3" [(ngModel)]="formData.currentSymptoms" placeholder="Describe symptoms"></textarea>
        </div>
      </div>
      @if (mode === 'create') {
        <div class="form-actions">
          <button mat-stroked-button (click)="onAddToCart()" [disabled]="!isFormValid">Add to Cart</button>
        </div>
      }
    </div>
    @if (mode === 'create') {
      <div class="summary-area">
        <h4>Requested Medications Summary</h4>
        <div class="summary-list">
          @for (med of selectedMedicines; track med) {
            <div class="summary-item">
              <div class="summary-main">
                <div class="summary-title">{{ med.name }}</div>
                <div class="summary-sub">{{ med.dosage }} â€¢ {{ med.frequency }}</div>
              </div>
              <div class="summary-actions">
                <button mat-icon-button (click)="onEditMedicine(med)">
                  <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button (click)="onRemoveMedicine(med.id)">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
            </div>
          }
          @if (selectedMedicines.length === 0) {
            <div class="empty-summary">
              <p>No medicines added yet. Fill the form and click "Add to Cart" to add medicines.</p>
            </div>
          }
        </div>
      </div>
    }
  </div>
</div>

