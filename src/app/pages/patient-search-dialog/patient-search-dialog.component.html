<div class="patient-search-dialog">
  <!-- Scrollable Content Area -->
  <div class="dialog-content">

    <!-- Search Results -->
    <div class="results-section">
      <div class="results-header">
        <h3 class="results-title">
          Available Patients
          <span class="results-count">({{ searchResults.length }} patients)</span>
        </h3>
      </div>

      <!-- Loading State -->
      @if (isLoading) {
        <div class="loading-state">
          <mat-spinner diameter="40"></mat-spinner>
          <p>Loading patients...</p>
        </div>
      }

      <!-- Load Error -->
      @if (!isLoading && loadError) {
        <div class="load-error">
          <app-icon fontIcon="error_outline" [size]="48" class="error-icon"></app-icon>
          <h3>Could not load patients</h3>
          <p>{{ loadError }}</p>
        </div>
      }

      <!-- No Results -->
      @if (!isLoading && !loadError && searchResults.length === 0) {
        <div class="no-results">
          <app-icon fontIcon="search_off" [size]="48" class="no-results-icon"></app-icon>
          <h3>No patients found</h3>
          <p>Try adjusting your search criteria or filters.</p>
        </div>
      }

      <!-- Results Grid -->
      @if (!isLoading && !loadError && searchResults.length > 0) {
        <div class="patients-grid-container">
          <app-grid
            [apiConfig]="apiConfig"
            [columnDefs]="columnDefs"
            [gridOptions]="gridOptions"
            [showHeader]="true"
            [height]="'400px'"
            [searchPlaceholder]="'Search patients...'"
            (rowClicked)="selectPatient($event)"
            (searchChange)="onGridSearch($event)">
          </app-grid>
        </div>
        <div class="dialog-actions">
          @if (selectedPatient) {
            <h3 class="selected-hint">Selected: {{ selectedPatient.fullName || (selectedPatient.firstName + ' ' + selectedPatient.lastName) }}</h3>
          }
         
        </div>
      }
    </div>
  </div>
</div>
