<app-page [breadcrumb]="breadcrumb" [isFooter]="false">
  <div page-body class="room-details-page" *ngIf="!loading">
    <!-- Room Info -->
    <div class="room-info-card" *ngIf="room">
      <div class="card-header">
        <div class="room-title">
          <h1>{{ room.number }}</h1>
          <div class="room-type">{{ room.type }}</div>
        </div>
        <div class="room-status" [style.color]="getRoomStatusColor(room.status)">
          {{ room.status }}
        </div>
      </div>
      
      <div class="room-details-grid">
        <div class="detail-item">
          <span class="label">Floor:</span>
          <span class="value">{{ room.floor }}</span>
        </div>
        <div class="detail-item">
          <span class="label">Wing:</span>
          <span class="value">{{ room.wing }}</span>
        </div>
        <div class="detail-item">
          <span class="label">Capacity:</span>
          <span class="value">{{ room.capacity }} beds</span>
        </div>
        <div class="detail-item">
          <span class="label">Occupied:</span>
          <span class="value">{{ room.occupied }} beds</span>
        </div>
        <div class="detail-item" *ngIf="room.icuLevel">
          <span class="label">ICU Level:</span>
          <span class="value">{{ room.icuLevel }}</span>
        </div>
        <div class="detail-item" *ngIf="room.facilities">
          <span class="label">Facilities:</span>
          <div class="facilities">
            <app-icon 
              *ngFor="let icon of facilityIcons(room.facilities)" 
              [fontIcon]="icon" 
              [size]="16"
              class="facility-icon">
            </app-icon>
          </div>
        </div>
      </div>
    </div>

    <!-- Beds Grid -->
    <div class="beds-section" *ngIf="room">
      <div class="section-header">
        <h2>{{ room.type }} - {{ room.number }}</h2>
        <div class="bed-summary">
          (Total Beds: {{ room.capacity }} | Available Beds: {{ room.capacity - room.occupied }})
        </div>
      </div>
      
      <div class="beds-grid-simple">
        <div 
          *ngFor="let bed of room.beds" 
          class="bed-item"
          [style.border-color]="getBedStatusColor(bed.status)"
          (click)="onBedClick(bed)">
          
          <div class="bed-icon">
            <app-icon [fontIcon]="'hotel'" [size]="24"></app-icon>
          </div>
          <div class="bed-id">{{ bed.id.split('-').pop() }}</div>
          <div class="bed-type" *ngIf="bed.status === 'Occupied'">{{ (bed.patientInfo?.name || 'Patient').split(' ')[0] }}</div>
          <div class="bed-type" *ngIf="bed.status !== 'Occupied'">{{ getBedTypeLabel(bed.status) }}</div>
        </div>
      </div>
    </div>

  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading">
    <div class="loading-spinner">Loading room details...</div>
  </div>
</app-page>
