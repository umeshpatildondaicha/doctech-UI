<div class="doctor-view-dialog">
  <div class="doctor-header">
    <div class="doctor-avatar-section">
      <div class="doctor-avatar">
        @if (doctor.profilePic) {
          <img
            [src]="doctor.profilePic"
            [alt]="doctor.name"
            onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
        }
        @if (!doctor.profilePic) {
          <div class="avatar-fallback">
            <app-icon fontIcon="person" [size]="48" color="var(--text-muted)"></app-icon>
          </div>
        }
      </div>
      <div class="doctor-info">
        <h2 class="doctor-name">{{ doctor.name }}</h2>
        <div class="doctor-id">
          <app-icon fontIcon="assignment_ind" [size]="16" color="var(--primary-color)"></app-icon>
          <span>{{ doctor.id }}</span>
        </div>
      </div>
    </div>
    <div class="status-badges">
      <div class="status-badge" [class]="doctor.status?.toLowerCase()">
        <app-icon fontIcon="circle" [size]="12" [color]="getStatusColor(doctor.status)"></app-icon>
        <span>{{ doctor.status }}</span>
      </div>
      <div class="status-badge availability" [class]="doctor.availability?.toLowerCase().replace(' ', '-')">
        <app-icon fontIcon="schedule" [size]="12" [color]="getAvailabilityColor(doctor.availability)"></app-icon>
        <span>{{ doctor.availability }}</span>
      </div>
    </div>
  </div>

  <div class="doctor-details">
    <mat-card class="detail-card">
      <mat-card-header>
        <mat-card-title>
          <app-icon fontIcon="person" [size]="20"></app-icon>
          Personal Information
        </mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div class="detail-grid">
          <div class="detail-item">
            <span class="detail-label">Specialization</span>
            <span class="detail-value">{{ doctor.specialization || 'Not specified' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Hospital</span>
            <span class="detail-value">{{ doctor.hospital || 'Not specified' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Phone</span>
            <span class="detail-value">{{ doctor.phone || 'Not specified' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Email</span>
            <span class="detail-value">{{ doctor.email || 'Not specified' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Experience</span>
            <span class="detail-value">{{ doctor.experience || 'Not specified' }}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Joined Date</span>
            <span class="detail-value">{{ doctor.joinedDate ? (doctor.joinedDate | date:'mediumDate') : 'Not specified' }}</span>
          </div>
          @if (doctor.qualifications) {
            <div class="detail-item">
              <span class="detail-label">Qualifications</span>
              <span class="detail-value">{{ doctor.qualifications }}</span>
            </div>
          }
          @if (doctor.lastLogin) {
            <div class="detail-item">
              <span class="detail-label">Last Login</span>
              <span class="detail-value">{{ doctor.lastLogin | date:'medium' }}</span>
            </div>
          }
        </div>
      </mat-card-content>
    </mat-card>

    @if (hasAssociatedHospitals()) {
      <mat-card class="detail-card">
        <mat-card-header>
          <mat-card-title>
            <app-icon fontIcon="business" [size]="20"></app-icon>
            Associated Hospitals
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="hospitals-list">
            @for (hospital of getAssociatedHospitals(); track hospital) {
              <div class="hospital-item">
                <app-icon fontIcon="local_hospital" [size]="18" color="var(--primary-color)"></app-icon>
                <span class="hospital-name">{{ hospital }}</span>
              </div>
            }
          </div>
          @if (getAssociatedHospitals().length === 0) {
            <p class="info-text">
              No additional hospital associations
            </p>
          }
        </mat-card-content>
      </mat-card>
    }

    @if (doctor.tags && doctor.tags.length > 0) {
      <mat-card class="detail-card">
        <mat-card-header>
          <mat-card-title>
            <app-icon fontIcon="label" [size]="20"></app-icon>
            Tags
          </mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="tags-container">
            @for (tag of doctor.tags; track tag) {
              <mat-chip>{{ tag }}</mat-chip>
            }
          </div>
        </mat-card-content>
      </mat-card>
    }
  </div>
</div>

