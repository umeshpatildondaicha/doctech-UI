<app-page [breadcrumb]="breadcrumb" [isFooter]="false">
  <div page-body class="list-designer-editor">
    <!-- Header: Grid name, Visual/Code toggle, actions -->
    <div class="list-header">
      <div class="grid-name">{{ gridName }}</div>
      <div class="header-actions">
        <div class="view-toggle">
          <button
            type="button"
            class="toggle-btn"
            [class.active]="viewMode === 'visual'"
            (click)="setViewMode('visual')"
            aria-label="Visual">
            <span class="material-icons icon-sm">visibility</span>
            <span class="toggle-label">Visual</span>
          </button>
          <button
            type="button"
            class="toggle-btn"
            [class.active]="viewMode === 'code'"
            (click)="setViewMode('code')"
            aria-label="Code">
            <span class="material-icons icon-sm">code</span>
            <span class="toggle-label">Code</span>
          </button>
        </div>
        <app-button
          text="AI Assistant"
          fontIcon="smart_toy"
          color="accent"
          appearance="stroked"
          (btnClick)="{}">
        </app-button>
        <app-button
          text="Cancel"
          fontIcon="close"
          color="accent"
          appearance="stroked"
          (btnClick)="onCancel()">
        </app-button>
        <app-button
          text="Update"
          fontIcon="save"
          color="primary"
          appearance="raised"
          (btnClick)="onUpdate()">
        </app-button>
      </div>
    </div>

    @if (viewMode === 'visual') {
    <!-- Main: left panel (columns) + right panel (tabs) -->
    <div class="list-container">
      <div class="list-creator-main">
        <!-- Left: Column names -->
        <div class="left-panel vw-card-section">
          <div class="panel-header">
            <span class="panel-title">Column names</span>
            <app-button
              text="Add"
              fontIcon="add"
              color="primary"
              appearance="raised"
              (btnClick)="onAddColumn()">
            </app-button>
          </div>
          <p class="panel-hint">Drag to reorder columns</p>
          <div class="column-list" cdkDropList (cdkDropListDropped)="onColumnDrop($event)">
            @for (col of columns; track col.id) {
              <div class="column-item" [class.selected]="selectedColumnId === col.id" cdkDrag>
                <button type="button" class="column-item-btn" (click)="selectColumn(col.id)">
                  <span class="drag-handle material-icons" cdkDragHandle title="Drag to reorder">drag_indicator</span>
                  <span class="column-info">
                    <span class="column-icon material-icons">text_fields</span>
                    <div class="column-meta">
                      <span class="column-name">{{ col.name }}</span>
                      <span class="column-type">{{ col.dataType }}</span>
                    </div>
                  </span>
                </button>
                <button
                  type="button"
                  class="delete-btn"
                  (click)="removeColumn(col.id)"
                  title="Delete column"
                  matTooltip="Delete column">
                  <span class="material-icons">delete_outline</span>
                </button>
              </div>
            }
          </div>
        </div>

        <div class="resize-handle" aria-hidden="true"></div>

        <!-- Right: Configuration tabs -->
        <div class="right-panel configuration-tabs">
          <div class="box-page-modal vw-card-section">
            <mat-tab-group mat-stretch-tabs class="productui-tab-panel">
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="mat-tab-label-content">
                    <span class="material-icons tab-icon">grid_view</span>
                    Display
                  </span>
                </ng-template>
                <div class="tab-content display-tab-content">
                  <section class="config-section">
                    <h3 class="section-title">Basic display configuration</h3>
                    <div class="form-row">
                      <label class="field-label" for="display-name">Name</label>
                      <div class="input-with-suffix">
                        <input id="display-name" type="text" class="field-input" placeholder="Column name" maxlength="100" />
                        <span class="char-count">4 / 100</span>
                      </div>
                      <span class="field-hint">Save your changes using the save button on the right side</span>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="header-align">Header alignment</label>
                      <select id="header-align" class="field-select">
                        <option>Start</option>
                        <option>Center</option>
                        <option>End</option>
                      </select>
                      <span class="field-hint">Choose whether the column header aligns to the start, center, or end.</span>
                    </div>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Tooltip configuration</h3>
                    <div class="form-row">
                      <span class="field-label">Tooltip type</span>
                      <div class="radio-group">
                        <label><input type="radio" name="tooltipType" value="fixed" checked /> Fixed</label>
                        <label><input type="radio" name="tooltipType" value="conditional" /> Conditional</label>
                      </div>
                      <span class="field-hint">Choose what the tooltip displays—default value, a selected field's value, or a conditional value based on the original field.</span>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="tooltip-field">Field</label>
                      <input id="tooltip-field" type="text" class="field-input" placeholder="e.g., firstName" />
                    </div>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Cell formatting</h3>
                    <p class="section-desc">Allows users to style cell values with colors, fonts, backgrounds, and more.</p>
                    <button type="button" class="add-group-btn"><span class="material-icons">add</span> Add group</button>
                    <div class="subsection">
                      <h4 class="subsection-title">Cell click action</h4>
                      <p class="section-desc">Turns cell clicks into actions—from navigation to triggering APIs</p>
                    </div>
                    <div class="subsection">
                      <h4 class="subsection-title">Common properties</h4>
                      <div class="form-row">
                        <label class="field-label" for="value-align">Value alignment</label>
                        <select id="value-align" class="field-select">
                          <option selected>Start</option>
                          <option>Center</option>
                          <option>End</option>
                        </select>
                        <span class="field-hint">Sets the position of the value — start, center, or end.</span>
                      </div>
                      <div class="form-row">
                        <label class="field-label" for="col-width">Width <span class="required">*</span></label>
                        <input id="col-width" type="text" class="field-input" value="100" placeholder="e.g., 100 or fit-content" />
                        <span class="field-hint">Enter a width from 1–100 (%), or use keywords like fit-content, unset, etc.</span>
                      </div>
                    </div>
                    <div class="subsection">
                      <h4 class="subsection-title">Field properties</h4>
                      <button type="button" class="add-group-btn"><span class="material-icons">add</span> Add field</button>
                      <mat-accordion class="field-accordion">
                        <mat-expansion-panel expanded>
                          <mat-expansion-panel-header>
                            <mat-panel-title>Field 1</mat-panel-title>
                          </mat-expansion-panel-header>
                          <div class="form-grid">
                            <div class="form-row">
                              <label class="field-label" for="fp-field">Field</label>
                              <input id="fp-field" type="text" class="field-input" placeholder="e.g., firstName" value="reportName" />
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-visible-as">Visible as</label>
                              <select id="fp-visible-as" class="field-select"><option selected>Text</option><option>Number</option><option>Date</option></select>
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-round-off">Round Off to</label>
                              <input id="fp-round-off" type="number" class="field-input" placeholder="e.g., 2" value="0" />
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-affix">Affix alignment</label>
                              <select id="fp-affix" class="field-select"><option selected>Horizontal</option><option>Vertical</option></select>
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-prefix">Prefix</label>
                              <input id="fp-prefix" type="text" class="field-input" placeholder="e.g., ₹" />
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-suffix">Suffix</label>
                              <input id="fp-suffix" type="text" class="field-input" placeholder="e.g., %" />
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-chip">Default chip style</label>
                              <select id="fp-chip" class="field-select"><option value="">Select</option></select>
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-font-style">Font style</label>
                              <select id="fp-font-style" class="field-select"><option value="">Select</option></select>
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-lines">Number of lines</label>
                              <input id="fp-lines" type="number" class="field-input suffix-px" value="1" min="1" max="5" />
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-font-size">Font size <span class="required">*</span></label>
                              <input id="fp-font-size" type="number" class="field-input suffix-px" value="12" />
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-radius">Border Radius</label>
                              <input id="fp-radius" type="number" class="field-input suffix-px" value="0" />
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-bg">Background color</label>
                              <div class="color-input-wrap">
                                <input id="fp-bg" type="color" class="field-color" value="#ffffff" />
                                <input type="text" class="field-input color-hex" value="#ffffff" />
                              </div>
                            </div>
                            <div class="form-row">
                              <label class="field-label" for="fp-font-color">Font color</label>
                              <div class="color-input-wrap">
                                <input id="fp-font-color" type="color" class="field-color" value="#000000" />
                                <input type="text" class="field-input color-hex" value="#000000" />
                              </div>
                            </div>
                            <div class="form-row full-width">
                              <label class="field-label" for="fp-custom">Custom style</label>
                              <textarea id="fp-custom" class="field-textarea" placeholder="Add your custom styles eg: (font-weight : 500; color : red;)"></textarea>
                            </div>
                            <div class="form-row full-width toggle-row">
                              <span class="field-label" id="lbl-fp-capitalize">Capitalize first letter</span>
                              <label class="toggle-wrap" for="fp-capitalize">
                                <input id="fp-capitalize" type="checkbox" class="toggle-input" aria-labelledby="lbl-fp-capitalize" />
                                <span class="toggle-slider"></span>
                              </label>
                              <span class="field-hint">Makes the first letter of the cell value uppercase</span>
                            </div>
                          </div>
                        </mat-expansion-panel>
                      </mat-accordion>
                    </div>
                    <div class="subsection">
                      <h4 class="subsection-title">Value mapping</h4>
                      <p class="section-desc">Allows users to configure a JS function with variables.</p>
                      <div class="form-row">
                        <label class="field-label" for="vm-expression">Expression</label>
                        <textarea id="vm-expression" class="field-textarea" placeholder="e.g., $value === 'active' ? 'Active' : 'Inactive'"></textarea>
                        <span class="field-hint">Defines a JavaScript expression with variables mapped to field keys.</span>
                      </div>
                      <div class="form-row">
                        <span class="field-label" id="map-keys-label">Map keys</span>
                        <span class="field-hint">Map your data fields to placeholders used in your JS expression above (e.g., $a → firstName)</span>
                        <button type="button" class="add-group-btn" aria-labelledby="map-keys-label"><span class="material-icons">add</span> Add</button>
                      </div>
                    </div>
                    <div class="subsection">
                      <h4 class="subsection-title">Conditional formatting</h4>
                      <p class="section-desc">Apply conditional formatting rules.</p>
                      <div class="form-row">
                        <span class="field-label" id="apply-on-label">Apply on <span class="required">*</span></span>
                        <div class="radio-group" role="radiogroup" aria-labelledby="apply-on-label">
                          <label><input type="radio" name="applyOn" value="allRecord" checked /> All records</label>
                          <label><input type="radio" name="applyOn" value="custom" /> Custom</label>
                        </div>
                      </div>
                    </div>
                    <div class="subsection">
                      <h4 class="subsection-title">Transform value</h4>
                      <p class="section-desc">Replaces input characters with specified alternatives (e.g., "_" → space).</p>
                      <button type="button" class="add-group-btn"><span class="material-icons">add</span> Add</button>
                      <p class="empty-state">No value transformation rules configured yet. Click '+ Add' to configure</p>
                    </div>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Column visibility</h3>
                    <div class="form-row">
                      <label class="field-label" for="col-permissions">Permissions</label>
                      <input id="col-permissions" type="text" class="field-input chip-input" placeholder="Enter permission name" />
                      <span class="field-hint">Select permissions that control when the column is shown. The column will be visible if it matches any of the permissions added.</span>
                    </div>
                  </section>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="mat-tab-label-content">
                    <span class="material-icons tab-icon">settings</span>
                    Properties
                  </span>
                </ng-template>
                <div class="tab-content properties-tab-content">
                  <section class="config-section">
                    <h3 class="section-title">Grid row level configurations</h3>
                    <div class="form-row toggle-row">
                      <span class="field-label" id="lbl-prop-enable-selection">Enable record selection</span>
                      <label class="toggle-wrap" for="prop-enable-selection">
                        <input id="prop-enable-selection" type="checkbox" class="toggle-input" aria-labelledby="lbl-prop-enable-selection" />
                        <span class="toggle-slider"></span>
                      </label>
                      <span class="field-hint">Enable row selection by showing checkboxes beside each record</span>
                    </div>
                    <div class="form-row toggle-row">
                      <span class="field-label" id="lbl-prop-tree-structure">Tree Structure</span>
                      <label class="toggle-wrap" for="prop-tree-structure">
                        <input id="prop-tree-structure" type="checkbox" class="toggle-input" aria-labelledby="lbl-prop-tree-structure" />
                        <span class="toggle-slider"></span>
                      </label>
                      <span class="field-hint">Enables hierarchical tree view for grids containing a child key array repeating the parent structure</span>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="prop-row-height">Row height</label>
                      <input id="prop-row-height" type="number" class="field-input suffix-px" placeholder="e.g., 50" value="50" />
                    </div>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Filter/Sort configuration</h3>
                    <div class="form-row">
                      <label class="field-label" for="prop-filter-name">Name</label>
                      <div class="input-with-chips">
                        <input id="prop-filter-name" type="text" class="field-input" placeholder="Filter name" />
                        <button type="button" class="add-group-btn"><span class="material-icons">add</span></button>
                      </div>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="prop-apply-filter">Apply filter on</label>
                      <select id="prop-apply-filter" class="field-select"><option value="">Select</option></select>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="prop-sorting">Select sorting</label>
                      <select id="prop-sorting" class="field-select"><option value="">Select</option></select>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="prop-apply-sort">Apply sorting on</label>
                      <select id="prop-apply-sort" class="field-select"><option value="">Select</option></select>
                    </div>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Grid header styles</h3>
                    <div class="form-row">
                      <label class="field-label" for="prop-header-font">Header font color</label>
                      <input id="prop-header-font" type="text" class="field-input" value="var(--grayColor700)" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="prop-header-bg">Header background</label>
                      <input id="prop-header-bg" type="text" class="field-input" value="var(--agGridHeaderToolBg)" />
                    </div>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Quick filter</h3>
                    <p class="section-desc">Configure filters that appear as chips in the grid header</p>
                    <button type="button" class="add-group-btn"><span class="material-icons">add</span> Add</button>
                    <p class="empty-state">No quick filter configured yet. Click '+ Add' to configure</p>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Legends</h3>
                    <p class="section-desc">Displays reference-only legend markers on the right side of the grid header</p>
                    <button type="button" class="add-group-btn"><span class="material-icons">add</span> Add</button>
                    <p class="empty-state">No legends configured yet. Click '+ Add' to configure</p>
                  </section>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="mat-tab-label-content">
                    <span class="material-icons tab-icon">bolt</span>
                    Actions
                  </span>
                </ng-template>
                <div class="tab-content actions-tab-content">
                  <section class="config-section">
                    <h3 class="section-title">Multiple view setup</h3>
                    <p class="section-desc">Include and configure other views like Kanban, Tile, Calendar etc. within this grid</p>
                  </section>
                  <section class="config-section">
                    <div class="form-row toggle-row">
                      <span class="field-label" id="lbl-action-workflow-preview">Show workflow preview</span>
                      <label class="toggle-wrap" for="action-workflow-preview">
                        <input id="action-workflow-preview" type="checkbox" class="toggle-input" aria-labelledby="lbl-action-workflow-preview" />
                        <span class="toggle-slider"></span>
                      </label>
                      <span class="field-hint">Shows workflow actions as a menu item on each row, or hides them if disabled</span>
                    </div>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">List actions</h3>
                    <p class="section-desc">Configure actions shown in the list header</p>
                    <button type="button" class="add-group-btn"><span class="material-icons">add</span> Add</button>
                    <p class="empty-state">No actions configured yet. Click '+ Add' to configure</p>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Row actions</h3>
                    <p class="section-desc">Configure actions shown as a menu on each card or grid row</p>
                    <button type="button" class="add-group-btn"><span class="material-icons">add</span> Add</button>
                    <p class="empty-state">No actions configured yet. Click '+ Add' to configure</p>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Row click action</h3>
                    <p class="section-desc">Configure an action that triggers when a row or card is clicked. Configure navigation, API triggers, or event emission.</p>
                  </section>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="mat-tab-label-content">
                    <span class="material-icons tab-icon">api</span>
                    Api config
                  </span>
                </ng-template>
                <div class="tab-content api-config-tab-content">
                  <section class="config-section">
                    <h3 class="section-title">Count config</h3>
                    <div class="form-row">
                      <span class="field-label" id="count-url-type-label">URL type</span>
                      <div class="radio-group" role="radiogroup" aria-labelledby="count-url-type-label">
                        <label><input type="radio" name="countUrlType" value="context" checked /> Context</label>
                        <label><input type="radio" name="countUrlType" value="base" /> Base url</label>
                      </div>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-context">Context</label>
                      <select id="count-context" class="field-select">
                        <option value="">Select a context (e.g., HRMS) to auto-generate the base REST URL</option>
                        <option value="PM" selected>PM</option>
                      </select>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-base-url">Base url</label>
                      <input id="count-base-url" type="text" class="field-input" placeholder="Enter the full base REST URL manually (e.g., https://www.example.com/rest)" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-url-context">URL Context</label>
                      <input id="count-url-context" type="text" class="field-input" value="reports/count" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-url">URL</label>
                      <input id="count-url" type="text" class="field-input" placeholder="e.g., count" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-key">Count key</label>
                      <input id="count-key" type="text" class="field-input" placeholder="e.g., $_s&orderType=desc" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-query-params">Query params url</label>
                      <input id="count-query-params" type="text" class="field-input" placeholder="e.g., _s" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-fiql">Fiql key</label>
                      <input id="count-fiql" type="text" class="field-input" placeholder="e.g., id>=0;" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-default-fiql">Default fiql</label>
                      <input id="count-default-fiql" type="text" class="field-input" placeholder="e.g., id>=0;" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-quick-fiql">Quick filter fiql</label>
                      <input id="count-quick-fiql" type="text" class="field-input" placeholder="e.g., firstName=='*$_s*'" />
                    </div>
                    <div class="form-row">
                      <span class="field-label" id="count-request-type-label">Request type</span>
                      <div class="radio-group" role="radiogroup" aria-labelledby="count-request-type-label">
                        <label><input type="radio" name="countRequestType" value="GET" checked /> GET</label>
                        <label><input type="radio" name="countRequestType" value="POST" /> POST</label>
                      </div>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="count-params">Params</label>
                      <textarea id="count-params" class="field-textarea" rows="2">&#123;&#125;</textarea>
                    </div>
                  </section>
                  <section class="config-section">
                    <h3 class="section-title">Data config</h3>
                    <div class="form-row">
                      <span class="field-label" id="data-url-type-label">URL type</span>
                      <div class="radio-group" role="radiogroup" aria-labelledby="data-url-type-label">
                        <label><input type="radio" name="dataUrlType" value="context" checked /> Context</label>
                        <label><input type="radio" name="dataUrlType" value="base" /> Base url</label>
                      </div>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-context">Context</label>
                      <select id="data-context" class="field-select">
                        <option value="">Select a context (e.g., HRMS) to auto-generate the base REST URL</option>
                        <option value="PM" selected>PM</option>
                      </select>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-base-url">Base url</label>
                      <input id="data-base-url" type="text" class="field-input" placeholder="Enter the full base REST URL manually (e.g., https://www.example.com/rest)" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-url-context">URL Context</label>
                      <input id="data-url-context" type="text" class="field-input" value="reports/search" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-url">URL</label>
                      <input id="data-url" type="text" class="field-input" placeholder="e.g., creator.name" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-key">Data key</label>
                      <input id="data-key" type="text" class="field-input" placeholder="$llimit&amp;$ulimit" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-query-params">Query params url</label>
                      <input id="data-query-params" type="text" class="field-input" placeholder="llimit" value="llimit" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-llimit">Lower limit</label>
                      <input id="data-llimit" type="text" class="field-input" placeholder="llimit" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-ulimit">Upper limit</label>
                      <input id="data-ulimit" type="text" class="field-input" placeholder="ulimit" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-fiql">Fiql key</label>
                      <input id="data-fiql" type="text" class="field-input" placeholder="e.g., _s" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-default-fiql">Default fiql</label>
                      <input id="data-default-fiql" type="text" class="field-input" placeholder="e.g., id>=0;" />
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-quick-fiql">Quick filter fiql</label>
                      <input id="data-quick-fiql" type="text" class="field-input" placeholder="e.g., firstName=='*$_s*'" />
                    </div>
                    <div class="form-row">
                      <span class="field-label" id="data-request-type-label">Request type</span>
                      <div class="radio-group" role="radiogroup" aria-labelledby="data-request-type-label">
                        <label><input type="radio" name="dataRequestType" value="GET" checked /> GET</label>
                        <label><input type="radio" name="dataRequestType" value="POST" /> POST</label>
                      </div>
                    </div>
                    <div class="form-row">
                      <label class="field-label" for="data-params">Params</label>
                      <textarea id="data-params" class="field-textarea" rows="2">&#123;&#125;</textarea>
                    </div>
                  </section>
                </div>
              </mat-tab>
              <mat-tab>
                <ng-template mat-tab-label>
                  <span class="mat-tab-label-content">
                    <span class="material-icons tab-icon">tune</span>
                    Advance options
                  </span>
                </ng-template>
                <div class="tab-content advance-options-tab-content">
                  <section class="config-section advance-section">
                    <h3 class="section-title">Grid options</h3>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-pagination">Pagination</span>
                        <span class="field-hint">Displays pagination controls in the grid footer</span>
                      </div>
                      <label class="toggle-wrap" for="adv-pagination">
                        <input id="adv-pagination" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-pagination" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-hide-scroll">Hide horizontal scroll</span>
                        <span class="field-hint">Hides the grid's horizontal scrollbar</span>
                      </div>
                      <label class="toggle-wrap" for="adv-hide-scroll">
                        <input id="adv-hide-scroll" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-hide-scroll" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <label class="field-label" for="adv-header-height">Header height (px)</label>
                        <input id="adv-header-height" type="number" class="field-input" placeholder="e.g., 60" />
                      </div>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <label class="field-label" for="adv-row-selections">Row selections</label>
                        <select id="adv-row-selections" class="field-select">
                          <option value="single">Single</option>
                          <option value="multiple" selected>Multiple</option>
                        </select>
                        <span class="field-hint">Choose whether the list allows single or multiple row selection</span>
                      </div>
                    </div>
                  </section>
                  <section class="config-section advance-section">
                    <h3 class="section-title">Header options</h3>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-hide-header">Hide header</span>
                        <span class="field-hint">Hides the grid header section</span>
                      </div>
                      <label class="toggle-wrap" for="adv-hide-header">
                        <input id="adv-hide-header" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-hide-header" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-hide-count">Hide count label</span>
                        <span class="field-hint">Hides the count label that shows item totals (e.g., "Displaying 10 of …")</span>
                      </div>
                      <label class="toggle-wrap" for="adv-hide-count">
                        <input id="adv-hide-count" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-hide-count" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-hide-filter-btn">Hide filter button</span>
                        <span class="field-hint">Hides the filter button from the grid</span>
                      </div>
                      <label class="toggle-wrap" for="adv-hide-filter-btn">
                        <input id="adv-hide-filter-btn" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-hide-filter-btn" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-hide-quick-search">Hide quick search</span>
                        <span class="field-hint">Hides the quick-filter search box</span>
                      </div>
                      <label class="toggle-wrap" for="adv-hide-quick-search">
                        <input id="adv-hide-quick-search" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-hide-quick-search" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-search-animation">Quick search placeholder animation</span>
                        <span class="field-hint">Enables animation in the quick-search placeholder</span>
                      </div>
                      <label class="toggle-wrap" for="adv-search-animation">
                        <input id="adv-search-animation" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-search-animation" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-show-title">Show title list</span>
                        <span class="field-hint">Enables configuring a title displayed next to the item count in the grid header</span>
                      </div>
                      <label class="toggle-wrap" for="adv-show-title">
                        <input id="adv-show-title" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-show-title" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-expand-btn">Show expand button</span>
                        <span class="field-hint">Displays an expand button that enlarges the grid to full screen</span>
                      </div>
                      <label class="toggle-wrap" for="adv-expand-btn">
                        <input id="adv-expand-btn" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-expand-btn" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                    <div class="option-block">
                      <div class="option-block-content">
                        <label class="field-label" for="adv-filter-position">Filter button position</label>
                        <select id="adv-filter-position" class="field-select">
                          <option value="left">Left</option>
                          <option value="right" selected>Right</option>
                          <option value="center">Center</option>
                        </select>
                      </div>
                    </div>
                  </section>
                  <section class="config-section advance-section">
                    <h3 class="section-title">Footer options</h3>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-hide-footer">Hide footer</span>
                        <span class="field-hint">Hides the entire grid footer</span>
                      </div>
                      <label class="toggle-wrap" for="adv-hide-footer">
                        <input id="adv-hide-footer" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-hide-footer" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </section>
                  <section class="config-section advance-section">
                    <h3 class="section-title">Component options</h3>
                    <div class="option-block">
                      <div class="option-block-content">
                        <span class="field-label" id="lbl-adv-hide-table-options">Hide table options</span>
                        <span class="field-hint">Hides the table-options menu in the grid</span>
                      </div>
                      <label class="toggle-wrap" for="adv-hide-table-options">
                        <input id="adv-hide-table-options" type="checkbox" class="toggle-input" aria-labelledby="lbl-adv-hide-table-options" />
                        <span class="toggle-slider"></span>
                      </label>
                    </div>
                  </section>
                  <section class="config-section advance-section">
                    <h3 class="section-title">Empty state config</h3>
                    <p class="section-desc">Define text and visuals for the list's empty state</p>
                    <div class="form-grid advance-form-grid">
                      <div class="form-row">
                        <label class="field-label" for="adv-empty-type">Empty state type</label>
                        <select id="adv-empty-type" class="field-select">
                          <option value="default" selected>Default</option>
                          <option value="custom">Custom</option>
                        </select>
                      </div>
                      <div class="form-row">
                        <label class="field-label" for="adv-empty-icon">Empty state icon</label>
                        <select id="adv-empty-icon" class="field-select">
                          <option value="">Select empty state icon</option>
                        </select>
                      </div>
                      <div class="form-row">
                        <label class="field-label" for="adv-empty-title">Empty state title</label>
                        <input id="adv-empty-title" type="text" class="field-input" placeholder="e.g., No data available" />
                      </div>
                      <div class="form-row">
                        <label class="field-label" for="adv-empty-message">Empty state message</label>
                        <input id="adv-empty-message" type="text" class="field-input" placeholder="e.g., There is no data to display" />
                      </div>
                    </div>
                  </section>
                  <section class="config-section advance-section">
                    <div class="section-header-with-action">
                      <div>
                        <h3 class="section-title">Row styles configuration</h3>
                        <p class="section-desc">Set the background color of each row conditionally</p>
                      </div>
                      <button type="button" class="add-group-btn"><span class="material-icons">add</span> Add rule</button>
                    </div>
                    <p class="empty-state">No row style configured yet. Click '+ Add rule' to configure</p>
                  </section>
                </div>
              </mat-tab>
            </mat-tab-group>
          </div>
        </div>
      </div>
    </div>
    }
    @if (viewMode === 'code') {
    <div class="list-container code-view-outer">
      <h3 class="code-view-title">Code view</h3>
      <div class="code-view-wrapper">
        <div class="code-view-line-numbers">
          @for (line of codeViewLines; track $index) {
            <div class="code-view-line-num">{{ $index + 1 }}</div>
          }
        </div>
        <textarea
          class="code-view-textarea"
          [(ngModel)]="codeViewJson"
          [style.min-height.px]="codeViewLines.length * 22"
          spellcheck="false"
          aria-label="Grid configuration JSON"></textarea>
      </div>
    </div>
    }
  </div>
</app-page>
