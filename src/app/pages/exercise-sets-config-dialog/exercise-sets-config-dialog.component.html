<div class="exercise-sets-config-dialog">
  <!-- Exercise Info Section -->
  <div class="exercise-info">
    <div class="info-header">
      <div>
        <h3 class="exercise-name">{{ exercise.name }}</h3>
        <div class="exercise-meta">
          <span class="category-badge">{{ exercise.category }}</span>
          <span class="difficulty-badge">{{ exercise.difficulty }}</span>
        </div>
      </div>
      <app-button
        type="button"
        class="toggle-edit-btn"
        [fontIcon]="mode === 'view' ? 'edit' : 'visibility'"
        [title]="mode === 'view' ? 'Edit' : 'View'"
        [appearance]="'icon'"
        (btnClick)="toggleEditMode()">
      </app-button>
    </div>
  </div>

  <div class="dialog-content">
    <form [formGroup]="setsForm" class="sets-form">
      <div class="form-section">
        <h3 class="section-title">Sets Configuration</h3>
        <div formArrayName="sets" class="sets-container">
          @for (set of setsArray.controls; track set; let i = $index) {
            <div
              [formGroupName]="i"
              class="set-item">
              <div class="set-header">
                <h4>Set {{ i + 1 }}</h4>
                @if (setsArray.length > 1 && mode === 'edit') {
                  <app-button
                    type="button"
                    class="remove-set"
                    [fontIcon]="'delete'"
                    title="Remove set"
                    [appearance]="'icon'"
                    (btnClick)="removeSet(i)">
                  </app-button>
                }
              </div>
              <div class="set-fields">
                <mat-form-field appearance="outline" class="field-group">
                  <mat-label>Reps</mat-label>
                  <input
                    matInput
                    type="number"
                    formControlName="reps"
                    min="1"
                    [readonly]="mode === 'view'">
                    <mat-icon matSuffix>repeat</mat-icon>
                  </mat-form-field>
                  <mat-form-field appearance="outline" class="field-group">
                    <mat-label>Hold Time (sec)</mat-label>
                    <input
                      matInput
                      type="number"
                      formControlName="holdTime"
                      min="0"
                      [readonly]="mode === 'view'">
                      <mat-icon matSuffix>timer</mat-icon>
                    </mat-form-field>
                    <mat-form-field appearance="outline" class="field-group">
                      <mat-label>Rest Time (sec)</mat-label>
                      <input
                        matInput
                        type="number"
                        formControlName="restTime"
                        min="0"
                        [readonly]="mode === 'view'">
                        <mat-icon matSuffix>schedule</mat-icon>
                      </mat-form-field>
                      <mat-form-field appearance="outline" class="field-group">
                        <mat-label>Tempo</mat-label>
                        <input
                          matInput
                          type="text"
                          formControlName="tempo"
                          placeholder="e.g., 2-1-2"
                          [readonly]="mode === 'view'">
                        </mat-form-field>
                      </div>
                      @if (mode === 'edit') {
                        <app-button
                          type="button"
                          class="apply-set-btn"
                          [fontIcon]="'content_copy'"
                          [text]="'Apply to all sets'"
                          [appearance]="'stroked'"
                          title="Apply this set configuration to all sets"
                          (btnClick)="applySetToAll(i)">
                        </app-button>
                      }
                    </div>
                  }
                </div>

                @if (mode === 'edit') {
                  <div class="sets-actions">
                    <app-button
                      type="button"
                      class="add-set-btn"
                      [fontIcon]="'add'"
                      [text]="'Add Set'"
                      [color]="'primary'"
                      [appearance]="'stroked'"
                      (btnClick)="addSet()">
                    </app-button>
                  </div>
                }
              </div>
            </form>
          </div>
        </div>




