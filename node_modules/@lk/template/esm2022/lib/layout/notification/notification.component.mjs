import { Component, Input, Output, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';
import { IconComponent } from '@lk/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class NotificationComponent {
    constructor() {
        this.notifications = [];
        this.closeNotification = new EventEmitter();
        this.markAsRead = new EventEmitter();
        this.markAllAsRead = new EventEmitter();
    }
    onClose() {
        this.closeNotification.emit();
    }
    onMarkAsRead(notificationId) {
        this.markAsRead.emit(notificationId);
    }
    onMarkAllAsRead() {
        this.markAllAsRead.emit();
    }
    getUnreadCount() {
        return this.notifications.filter(n => !n.isRead).length;
    }
    getTypeIcon(type) {
        switch (type) {
            case 'info': return 'info';
            case 'warning': return 'warning';
            case 'error': return 'error';
            case 'success': return 'check_circle';
            default: return 'notifications';
        }
    }
    getTypeColor(type) {
        switch (type) {
            case 'info': return '#2196F3';
            case 'warning': return '#FF9800';
            case 'error': return '#F44336';
            case 'success': return '#4CAF50';
            default: return '#888';
        }
    }
    formatTime(timestamp) {
        const now = new Date();
        const diff = now.getTime() - timestamp.getTime();
        const minutes = Math.floor(diff / 60000);
        const hours = Math.floor(diff / 3600000);
        const days = Math.floor(diff / 86400000);
        if (minutes < 1)
            return 'Just now';
        if (minutes < 60)
            return `${minutes}m ago`;
        if (hours < 24)
            return `${hours}h ago`;
        return `${days}d ago`;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: NotificationComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.12", type: NotificationComponent, isStandalone: true, selector: "app-notification", inputs: { notifications: "notifications" }, outputs: { closeNotification: "closeNotification", markAsRead: "markAsRead", markAllAsRead: "markAllAsRead" }, ngImport: i0, template: "<div class=\"notification-panel\">\n  <div class=\"notification-header\">\n    <div class=\"header-left\">\n      <h3>Notifications</h3>\n      <span class=\"unread-count\" *ngIf=\"getUnreadCount() > 0\">{{ getUnreadCount() }}</span>\n    </div>\n    <div class=\"header-right\">\n      <button \n        class=\"mark-all-read-btn\" \n        *ngIf=\"getUnreadCount() > 0\"\n        (click)=\"onMarkAllAsRead()\"\n      >\n        Mark all as read\n      </button>\n      <app-icon \n        fontIcon=\"close\" \n        [size]=\"20\"\n        (iconClick)=\"onClose()\"\n        class=\"close-icon\"\n      ></app-icon>\n    </div>\n  </div>\n\n  <div class=\"notification-content\">\n    <div \n      *ngFor=\"let notification of notifications\" \n      class=\"notification-item\"\n      [class.unread]=\"!notification.isRead\"\n      (click)=\"onMarkAsRead(notification.id)\"\n    >\n      <div class=\"notification-avatar\">\n        <img \n          *ngIf=\"notification.avatar\" \n          [src]=\"notification.avatar\" \n          [alt]=\"notification.title\"\n          class=\"avatar-img\"\n        />\n        <app-icon \n          *ngIf=\"!notification.avatar\"\n          [fontIcon]=\"getTypeIcon(notification.type)\"\n          [color]=\"getTypeColor(notification.type)\"\n          [size]=\"24\"\n          class=\"type-icon\"\n        ></app-icon>\n      </div>\n      \n      <div class=\"notification-details\">\n        <div class=\"notification-title\">{{ notification.title }}</div>\n        <div class=\"notification-message\">{{ notification.message }}</div>\n        <div class=\"notification-time\">{{ formatTime(notification.timestamp) }}</div>\n      </div>\n\n      <div class=\"notification-status\">\n        <div \n          *ngIf=\"!notification.isRead\" \n          class=\"unread-indicator\"\n        ></div>\n      </div>\n    </div>\n\n    <div \n      *ngIf=\"notifications.length === 0\" \n      class=\"empty-state\"\n    >\n      <app-icon \n        fontIcon=\"notifications_none\" \n        [size]=\"48\"\n        color=\"#ccc\"\n      ></app-icon>\n      <p>No notifications</p>\n      <span>You're all caught up!</span>\n    </div>\n  </div>\n</div> ", styles: [".notification-panel{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0000001f;width:380px;max-height:500px;overflow:hidden;border:1px solid #e0e0e0}.notification-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #f0f0f0;background:#fafafa}.notification-header .header-left{display:flex;align-items:center;gap:8px}.notification-header .header-left h3{margin:0;font-size:16px;font-weight:600;color:#333}.notification-header .header-left .unread-count{background:#ff4757;color:#fff;border-radius:12px;padding:2px 8px;font-size:12px;font-weight:600;min-width:20px;text-align:center}.notification-header .header-right{display:flex;align-items:center;gap:12px}.notification-header .header-right .mark-all-read-btn{background:none;border:none;color:#2196f3;font-size:12px;font-weight:500;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .2s}.notification-header .header-right .mark-all-read-btn:hover{background:#e3f2fd}.notification-header .header-right .close-icon{cursor:pointer;padding:4px;border-radius:4px;transition:background-color .2s}.notification-header .header-right .close-icon:hover{background:#f5f5f5}.notification-content{max-height:400px;overflow-y:auto}.notification-content::-webkit-scrollbar{width:4px}.notification-content::-webkit-scrollbar-track{background:#f1f1f1}.notification-content::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:2px}.notification-content::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.notification-item{display:flex;align-items:flex-start;padding:16px 20px;border-bottom:1px solid #f8f8f8;cursor:pointer;transition:background-color .2s;position:relative}.notification-item:hover{background:#fafafa}.notification-item.unread{background:#f8f9ff}.notification-item.unread:hover{background:#f0f2ff}.notification-item:last-child{border-bottom:none}.notification-avatar{flex-shrink:0;margin-right:12px}.notification-avatar .avatar-img{width:40px;height:40px;border-radius:50%;object-fit:cover}.notification-avatar .type-icon{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:#f5f5f5;border-radius:50%}.notification-details{flex:1;min-width:0}.notification-details .notification-title{font-weight:600;font-size:14px;color:#333;margin-bottom:4px;line-height:1.3}.notification-details .notification-message{font-size:13px;color:#666;line-height:1.4;margin-bottom:6px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.notification-details .notification-time{font-size:11px;color:#999;font-weight:500}.notification-status{flex-shrink:0;margin-left:8px}.notification-status .unread-indicator{width:8px;height:8px;background:#ff4757;border-radius:50%;margin-top:8px}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.empty-state p{margin:16px 0 8px;font-size:16px;font-weight:600;color:#666}.empty-state span{font-size:13px;color:#999}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: IconComponent, selector: "app-icon", inputs: ["fontSet", "fontIcon", "iconType", "icomoonClass", "size", "isBlink", "fontBold", "color", "class", "counter", "isCovered"], outputs: ["iconClick"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: NotificationComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-notification', standalone: true, imports: [CommonModule, IconComponent], template: "<div class=\"notification-panel\">\n  <div class=\"notification-header\">\n    <div class=\"header-left\">\n      <h3>Notifications</h3>\n      <span class=\"unread-count\" *ngIf=\"getUnreadCount() > 0\">{{ getUnreadCount() }}</span>\n    </div>\n    <div class=\"header-right\">\n      <button \n        class=\"mark-all-read-btn\" \n        *ngIf=\"getUnreadCount() > 0\"\n        (click)=\"onMarkAllAsRead()\"\n      >\n        Mark all as read\n      </button>\n      <app-icon \n        fontIcon=\"close\" \n        [size]=\"20\"\n        (iconClick)=\"onClose()\"\n        class=\"close-icon\"\n      ></app-icon>\n    </div>\n  </div>\n\n  <div class=\"notification-content\">\n    <div \n      *ngFor=\"let notification of notifications\" \n      class=\"notification-item\"\n      [class.unread]=\"!notification.isRead\"\n      (click)=\"onMarkAsRead(notification.id)\"\n    >\n      <div class=\"notification-avatar\">\n        <img \n          *ngIf=\"notification.avatar\" \n          [src]=\"notification.avatar\" \n          [alt]=\"notification.title\"\n          class=\"avatar-img\"\n        />\n        <app-icon \n          *ngIf=\"!notification.avatar\"\n          [fontIcon]=\"getTypeIcon(notification.type)\"\n          [color]=\"getTypeColor(notification.type)\"\n          [size]=\"24\"\n          class=\"type-icon\"\n        ></app-icon>\n      </div>\n      \n      <div class=\"notification-details\">\n        <div class=\"notification-title\">{{ notification.title }}</div>\n        <div class=\"notification-message\">{{ notification.message }}</div>\n        <div class=\"notification-time\">{{ formatTime(notification.timestamp) }}</div>\n      </div>\n\n      <div class=\"notification-status\">\n        <div \n          *ngIf=\"!notification.isRead\" \n          class=\"unread-indicator\"\n        ></div>\n      </div>\n    </div>\n\n    <div \n      *ngIf=\"notifications.length === 0\" \n      class=\"empty-state\"\n    >\n      <app-icon \n        fontIcon=\"notifications_none\" \n        [size]=\"48\"\n        color=\"#ccc\"\n      ></app-icon>\n      <p>No notifications</p>\n      <span>You're all caught up!</span>\n    </div>\n  </div>\n</div> ", styles: [".notification-panel{background:#fff;border-radius:12px;box-shadow:0 8px 32px #0000001f;width:380px;max-height:500px;overflow:hidden;border:1px solid #e0e0e0}.notification-header{display:flex;justify-content:space-between;align-items:center;padding:16px 20px;border-bottom:1px solid #f0f0f0;background:#fafafa}.notification-header .header-left{display:flex;align-items:center;gap:8px}.notification-header .header-left h3{margin:0;font-size:16px;font-weight:600;color:#333}.notification-header .header-left .unread-count{background:#ff4757;color:#fff;border-radius:12px;padding:2px 8px;font-size:12px;font-weight:600;min-width:20px;text-align:center}.notification-header .header-right{display:flex;align-items:center;gap:12px}.notification-header .header-right .mark-all-read-btn{background:none;border:none;color:#2196f3;font-size:12px;font-weight:500;cursor:pointer;padding:4px 8px;border-radius:4px;transition:background-color .2s}.notification-header .header-right .mark-all-read-btn:hover{background:#e3f2fd}.notification-header .header-right .close-icon{cursor:pointer;padding:4px;border-radius:4px;transition:background-color .2s}.notification-header .header-right .close-icon:hover{background:#f5f5f5}.notification-content{max-height:400px;overflow-y:auto}.notification-content::-webkit-scrollbar{width:4px}.notification-content::-webkit-scrollbar-track{background:#f1f1f1}.notification-content::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:2px}.notification-content::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.notification-item{display:flex;align-items:flex-start;padding:16px 20px;border-bottom:1px solid #f8f8f8;cursor:pointer;transition:background-color .2s;position:relative}.notification-item:hover{background:#fafafa}.notification-item.unread{background:#f8f9ff}.notification-item.unread:hover{background:#f0f2ff}.notification-item:last-child{border-bottom:none}.notification-avatar{flex-shrink:0;margin-right:12px}.notification-avatar .avatar-img{width:40px;height:40px;border-radius:50%;object-fit:cover}.notification-avatar .type-icon{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:#f5f5f5;border-radius:50%}.notification-details{flex:1;min-width:0}.notification-details .notification-title{font-weight:600;font-size:14px;color:#333;margin-bottom:4px;line-height:1.3}.notification-details .notification-message{font-size:13px;color:#666;line-height:1.4;margin-bottom:6px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.notification-details .notification-time{font-size:11px;color:#999;font-weight:500}.notification-status{flex-shrink:0;margin-left:8px}.notification-status .unread-indicator{width:8px;height:8px;background:#ff4757;border-radius:50%;margin-top:8px}.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.empty-state p{margin:16px 0 8px;font-size:16px;font-weight:600;color:#666}.empty-state span{font-size:13px;color:#999}\n"] }]
        }], propDecorators: { notifications: [{
                type: Input
            }], closeNotification: [{
                type: Output
            }], markAsRead: [{
                type: Output
            }], markAllAsRead: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm90aWZpY2F0aW9uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL3RlbXBsYXRlL3NyYy9saWIvbGF5b3V0L25vdGlmaWNhdGlvbi9ub3RpZmljYXRpb24uY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29tbW9uLWxpYnMvdGVtcGxhdGUvc3JjL2xpYi9sYXlvdXQvbm90aWZpY2F0aW9uL25vdGlmaWNhdGlvbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sVUFBVSxDQUFDOzs7QUFtQnpDLE1BQU0sT0FBTyxxQkFBcUI7SUFQbEM7UUFRVyxrQkFBYSxHQUF1QixFQUFFLENBQUM7UUFDdEMsc0JBQWlCLEdBQUcsSUFBSSxZQUFZLEVBQVEsQ0FBQztRQUM3QyxlQUFVLEdBQUcsSUFBSSxZQUFZLEVBQVUsQ0FBQztRQUN4QyxrQkFBYSxHQUFHLElBQUksWUFBWSxFQUFRLENBQUM7S0FrRHBEO0lBaERDLE9BQU87UUFDTCxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDaEMsQ0FBQztJQUVELFlBQVksQ0FBQyxjQUFzQjtRQUNqQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxjQUFjLENBQUMsQ0FBQztJQUN2QyxDQUFDO0lBRUQsZUFBZTtRQUNiLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUVELGNBQWM7UUFDWixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDO0lBQzFELENBQUM7SUFFRCxXQUFXLENBQUMsSUFBWTtRQUN0QixRQUFRLElBQUksRUFBRSxDQUFDO1lBQ2IsS0FBSyxNQUFNLENBQUMsQ0FBQyxPQUFPLE1BQU0sQ0FBQztZQUMzQixLQUFLLFNBQVMsQ0FBQyxDQUFDLE9BQU8sU0FBUyxDQUFDO1lBQ2pDLEtBQUssT0FBTyxDQUFDLENBQUMsT0FBTyxPQUFPLENBQUM7WUFDN0IsS0FBSyxTQUFTLENBQUMsQ0FBQyxPQUFPLGNBQWMsQ0FBQztZQUN0QyxPQUFPLENBQUMsQ0FBQyxPQUFPLGVBQWUsQ0FBQztRQUNsQyxDQUFDO0lBQ0gsQ0FBQztJQUVELFlBQVksQ0FBQyxJQUFZO1FBQ3ZCLFFBQVEsSUFBSSxFQUFFLENBQUM7WUFDYixLQUFLLE1BQU0sQ0FBQyxDQUFDLE9BQU8sU0FBUyxDQUFDO1lBQzlCLEtBQUssU0FBUyxDQUFDLENBQUMsT0FBTyxTQUFTLENBQUM7WUFDakMsS0FBSyxPQUFPLENBQUMsQ0FBQyxPQUFPLFNBQVMsQ0FBQztZQUMvQixLQUFLLFNBQVMsQ0FBQyxDQUFDLE9BQU8sU0FBUyxDQUFDO1lBQ2pDLE9BQU8sQ0FBQyxDQUFDLE9BQU8sTUFBTSxDQUFDO1FBQ3pCLENBQUM7SUFDSCxDQUFDO0lBRUQsVUFBVSxDQUFDLFNBQWU7UUFDeEIsTUFBTSxHQUFHLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUN2QixNQUFNLElBQUksR0FBRyxHQUFHLENBQUMsT0FBTyxFQUFFLEdBQUcsU0FBUyxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQ2pELE1BQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLE9BQU8sQ0FBQyxDQUFDO1FBQ3pDLE1BQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxDQUFDO1FBRXpDLElBQUksT0FBTyxHQUFHLENBQUM7WUFBRSxPQUFPLFVBQVUsQ0FBQztRQUNuQyxJQUFJLE9BQU8sR0FBRyxFQUFFO1lBQUUsT0FBTyxHQUFHLE9BQU8sT0FBTyxDQUFDO1FBQzNDLElBQUksS0FBSyxHQUFHLEVBQUU7WUFBRSxPQUFPLEdBQUcsS0FBSyxPQUFPLENBQUM7UUFDdkMsT0FBTyxHQUFHLElBQUksT0FBTyxDQUFDO0lBQ3hCLENBQUM7K0dBckRVLHFCQUFxQjttR0FBckIscUJBQXFCLHVPQ3JCbEMsbXBFQXlFTywyZ0dEeERLLFlBQVksZ1FBQUUsYUFBYTs7NEZBSTFCLHFCQUFxQjtrQkFQakMsU0FBUzsrQkFDRSxrQkFBa0IsY0FDaEIsSUFBSSxXQUNQLENBQUMsWUFBWSxFQUFFLGFBQWEsQ0FBQzs4QkFLN0IsYUFBYTtzQkFBckIsS0FBSztnQkFDSSxpQkFBaUI7c0JBQTFCLE1BQU07Z0JBQ0csVUFBVTtzQkFBbkIsTUFBTTtnQkFDRyxhQUFhO3NCQUF0QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBJY29uQ29tcG9uZW50IH0gZnJvbSAnQGxrL2NvcmUnO1xuXG5leHBvcnQgaW50ZXJmYWNlIE5vdGlmaWNhdGlvbkl0ZW0ge1xuICBpZDogc3RyaW5nO1xuICB0aXRsZTogc3RyaW5nO1xuICBtZXNzYWdlOiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogRGF0ZTtcbiAgaXNSZWFkOiBib29sZWFuO1xuICB0eXBlOiAnaW5mbycgfCAnd2FybmluZycgfCAnZXJyb3InIHwgJ3N1Y2Nlc3MnO1xuICBhdmF0YXI/OiBzdHJpbmc7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FwcC1ub3RpZmljYXRpb24nLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBJY29uQ29tcG9uZW50XSxcbiAgdGVtcGxhdGVVcmw6ICcuL25vdGlmaWNhdGlvbi5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsOiAnLi9ub3RpZmljYXRpb24uY29tcG9uZW50LnNjc3MnXG59KVxuZXhwb3J0IGNsYXNzIE5vdGlmaWNhdGlvbkNvbXBvbmVudCB7XG4gIEBJbnB1dCgpIG5vdGlmaWNhdGlvbnM6IE5vdGlmaWNhdGlvbkl0ZW1bXSA9IFtdO1xuICBAT3V0cHV0KCkgY2xvc2VOb3RpZmljYXRpb24gPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG4gIEBPdXRwdXQoKSBtYXJrQXNSZWFkID0gbmV3IEV2ZW50RW1pdHRlcjxzdHJpbmc+KCk7XG4gIEBPdXRwdXQoKSBtYXJrQWxsQXNSZWFkID0gbmV3IEV2ZW50RW1pdHRlcjx2b2lkPigpO1xuXG4gIG9uQ2xvc2UoKSB7XG4gICAgdGhpcy5jbG9zZU5vdGlmaWNhdGlvbi5lbWl0KCk7XG4gIH1cblxuICBvbk1hcmtBc1JlYWQobm90aWZpY2F0aW9uSWQ6IHN0cmluZykge1xuICAgIHRoaXMubWFya0FzUmVhZC5lbWl0KG5vdGlmaWNhdGlvbklkKTtcbiAgfVxuXG4gIG9uTWFya0FsbEFzUmVhZCgpIHtcbiAgICB0aGlzLm1hcmtBbGxBc1JlYWQuZW1pdCgpO1xuICB9XG5cbiAgZ2V0VW5yZWFkQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5ub3RpZmljYXRpb25zLmZpbHRlcihuID0+ICFuLmlzUmVhZCkubGVuZ3RoO1xuICB9XG5cbiAgZ2V0VHlwZUljb24odHlwZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ2luZm8nOiByZXR1cm4gJ2luZm8nO1xuICAgICAgY2FzZSAnd2FybmluZyc6IHJldHVybiAnd2FybmluZyc7XG4gICAgICBjYXNlICdlcnJvcic6IHJldHVybiAnZXJyb3InO1xuICAgICAgY2FzZSAnc3VjY2Vzcyc6IHJldHVybiAnY2hlY2tfY2lyY2xlJztcbiAgICAgIGRlZmF1bHQ6IHJldHVybiAnbm90aWZpY2F0aW9ucyc7XG4gICAgfVxuICB9XG5cbiAgZ2V0VHlwZUNvbG9yKHR5cGU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdpbmZvJzogcmV0dXJuICcjMjE5NkYzJztcbiAgICAgIGNhc2UgJ3dhcm5pbmcnOiByZXR1cm4gJyNGRjk4MDAnO1xuICAgICAgY2FzZSAnZXJyb3InOiByZXR1cm4gJyNGNDQzMzYnO1xuICAgICAgY2FzZSAnc3VjY2Vzcyc6IHJldHVybiAnIzRDQUY1MCc7XG4gICAgICBkZWZhdWx0OiByZXR1cm4gJyM4ODgnO1xuICAgIH1cbiAgfVxuXG4gIGZvcm1hdFRpbWUodGltZXN0YW1wOiBEYXRlKTogc3RyaW5nIHtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGRpZmYgPSBub3cuZ2V0VGltZSgpIC0gdGltZXN0YW1wLmdldFRpbWUoKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihkaWZmIC8gNjAwMDApO1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihkaWZmIC8gMzYwMDAwMCk7XG4gICAgY29uc3QgZGF5cyA9IE1hdGguZmxvb3IoZGlmZiAvIDg2NDAwMDAwKTtcblxuICAgIGlmIChtaW51dGVzIDwgMSkgcmV0dXJuICdKdXN0IG5vdyc7XG4gICAgaWYgKG1pbnV0ZXMgPCA2MCkgcmV0dXJuIGAke21pbnV0ZXN9bSBhZ29gO1xuICAgIGlmIChob3VycyA8IDI0KSByZXR1cm4gYCR7aG91cnN9aCBhZ29gO1xuICAgIHJldHVybiBgJHtkYXlzfWQgYWdvYDtcbiAgfVxufSAiLCI8ZGl2IGNsYXNzPVwibm90aWZpY2F0aW9uLXBhbmVsXCI+XG4gIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb24taGVhZGVyXCI+XG4gICAgPGRpdiBjbGFzcz1cImhlYWRlci1sZWZ0XCI+XG4gICAgICA8aDM+Tm90aWZpY2F0aW9uczwvaDM+XG4gICAgICA8c3BhbiBjbGFzcz1cInVucmVhZC1jb3VudFwiICpuZ0lmPVwiZ2V0VW5yZWFkQ291bnQoKSA+IDBcIj57eyBnZXRVbnJlYWRDb3VudCgpIH19PC9zcGFuPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItcmlnaHRcIj5cbiAgICAgIDxidXR0b24gXG4gICAgICAgIGNsYXNzPVwibWFyay1hbGwtcmVhZC1idG5cIiBcbiAgICAgICAgKm5nSWY9XCJnZXRVbnJlYWRDb3VudCgpID4gMFwiXG4gICAgICAgIChjbGljayk9XCJvbk1hcmtBbGxBc1JlYWQoKVwiXG4gICAgICA+XG4gICAgICAgIE1hcmsgYWxsIGFzIHJlYWRcbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGFwcC1pY29uIFxuICAgICAgICBmb250SWNvbj1cImNsb3NlXCIgXG4gICAgICAgIFtzaXplXT1cIjIwXCJcbiAgICAgICAgKGljb25DbGljayk9XCJvbkNsb3NlKClcIlxuICAgICAgICBjbGFzcz1cImNsb3NlLWljb25cIlxuICAgICAgPjwvYXBwLWljb24+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG4gIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb24tY29udGVudFwiPlxuICAgIDxkaXYgXG4gICAgICAqbmdGb3I9XCJsZXQgbm90aWZpY2F0aW9uIG9mIG5vdGlmaWNhdGlvbnNcIiBcbiAgICAgIGNsYXNzPVwibm90aWZpY2F0aW9uLWl0ZW1cIlxuICAgICAgW2NsYXNzLnVucmVhZF09XCIhbm90aWZpY2F0aW9uLmlzUmVhZFwiXG4gICAgICAoY2xpY2spPVwib25NYXJrQXNSZWFkKG5vdGlmaWNhdGlvbi5pZClcIlxuICAgID5cbiAgICAgIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb24tYXZhdGFyXCI+XG4gICAgICAgIDxpbWcgXG4gICAgICAgICAgKm5nSWY9XCJub3RpZmljYXRpb24uYXZhdGFyXCIgXG4gICAgICAgICAgW3NyY109XCJub3RpZmljYXRpb24uYXZhdGFyXCIgXG4gICAgICAgICAgW2FsdF09XCJub3RpZmljYXRpb24udGl0bGVcIlxuICAgICAgICAgIGNsYXNzPVwiYXZhdGFyLWltZ1wiXG4gICAgICAgIC8+XG4gICAgICAgIDxhcHAtaWNvbiBcbiAgICAgICAgICAqbmdJZj1cIiFub3RpZmljYXRpb24uYXZhdGFyXCJcbiAgICAgICAgICBbZm9udEljb25dPVwiZ2V0VHlwZUljb24obm90aWZpY2F0aW9uLnR5cGUpXCJcbiAgICAgICAgICBbY29sb3JdPVwiZ2V0VHlwZUNvbG9yKG5vdGlmaWNhdGlvbi50eXBlKVwiXG4gICAgICAgICAgW3NpemVdPVwiMjRcIlxuICAgICAgICAgIGNsYXNzPVwidHlwZS1pY29uXCJcbiAgICAgICAgPjwvYXBwLWljb24+XG4gICAgICA8L2Rpdj5cbiAgICAgIFxuICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1kZXRhaWxzXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb24tdGl0bGVcIj57eyBub3RpZmljYXRpb24udGl0bGUgfX08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbi1tZXNzYWdlXCI+e3sgbm90aWZpY2F0aW9uLm1lc3NhZ2UgfX08L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cIm5vdGlmaWNhdGlvbi10aW1lXCI+e3sgZm9ybWF0VGltZShub3RpZmljYXRpb24udGltZXN0YW1wKSB9fTwvZGl2PlxuICAgICAgPC9kaXY+XG5cbiAgICAgIDxkaXYgY2xhc3M9XCJub3RpZmljYXRpb24tc3RhdHVzXCI+XG4gICAgICAgIDxkaXYgXG4gICAgICAgICAgKm5nSWY9XCIhbm90aWZpY2F0aW9uLmlzUmVhZFwiIFxuICAgICAgICAgIGNsYXNzPVwidW5yZWFkLWluZGljYXRvclwiXG4gICAgICAgID48L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGRpdiBcbiAgICAgICpuZ0lmPVwibm90aWZpY2F0aW9ucy5sZW5ndGggPT09IDBcIiBcbiAgICAgIGNsYXNzPVwiZW1wdHktc3RhdGVcIlxuICAgID5cbiAgICAgIDxhcHAtaWNvbiBcbiAgICAgICAgZm9udEljb249XCJub3RpZmljYXRpb25zX25vbmVcIiBcbiAgICAgICAgW3NpemVdPVwiNDhcIlxuICAgICAgICBjb2xvcj1cIiNjY2NcIlxuICAgICAgPjwvYXBwLWljb24+XG4gICAgICA8cD5ObyBub3RpZmljYXRpb25zPC9wPlxuICAgICAgPHNwYW4+WW91J3JlIGFsbCBjYXVnaHQgdXAhPC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PiAiXX0=