import { CommonModule, isPlatformBrowser } from '@angular/common';
import { Component, Input, Output, EventEmitter, HostListener, Inject, PLATFORM_ID } from '@angular/core';
import { IconComponent } from '@lk/core';
import { Subscription } from 'rxjs';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@lk/core";
import * as i3 from "@angular/common";
export class SidebarComponent {
    constructor(router, menuService, authService, platformId) {
        this.router = router;
        this.menuService = menuService;
        this.authService = authService;
        this.platformId = platformId;
        this.collapsed = false;
        this.toggle = new EventEmitter();
        this.iconSizeOnCollapsed = 18;
        this.iconSizeOnExpanded = 20;
        this.menuList = [];
        this.subscriptions = new Subscription();
        // Responsive properties
        this.isMobile = false;
        this.isTablet = false;
        this.screenWidth = 0;
    }
    ngOnInit() {
        // Initialize screen size
        this.checkScreenSize();
        // Subscribe to menu changes
        this.subscriptions.add(this.menuService.getMenu().subscribe(menu => {
            this.menuList = menu;
        }));
        // Subscribe to auth changes to update menu
        this.subscriptions.add(this.authService.currentUser$.subscribe(user => {
            if (user) {
                console.log('Sidebar received user:', user);
                // Map user types to menu service expected values
                let menuUserType;
                if (user.userType === 'HOSPITAL') {
                    menuUserType = 'admin';
                }
                else if (user.userType === 'DOCTOR') {
                    menuUserType = 'doctor';
                }
                else {
                    menuUserType = 'doctor'; // Default fallback
                }
                console.log('Updating menu for user type:', menuUserType);
                this.menuService.updateMenu(menuUserType);
            }
        }));
    }
    ngOnDestroy() {
        this.subscriptions.unsubscribe();
    }
    isActive(path) {
        return this.router.url === path;
    }
    getMenuItemsBySection(section) {
        return this.menuList.filter(item => item.section === section);
    }
    getSectionTitle(section) {
        const sectionTitles = {
            'main': 'Main',
            'management': 'Management',
            'services': 'Services',
            'administration': 'Administration',
            'tools': 'Tools'
        };
        return sectionTitles[section] || section;
    }
    // Screen size detection
    onResize(event) {
        this.checkScreenSize();
    }
    checkScreenSize() {
        // Only check screen size in browser (not during SSR)
        if (!isPlatformBrowser(this.platformId)) {
            // Default values for SSR
            this.screenWidth = 1024;
            this.isMobile = false;
            this.isTablet = false;
            return;
        }
        this.screenWidth = window.innerWidth;
        this.isMobile = this.screenWidth <= 768;
        this.isTablet = this.screenWidth > 768 && this.screenWidth <= 1024;
        // Auto-collapse on mobile/tablet
        if (this.isMobile || this.isTablet) {
            if (!this.collapsed) {
                this.toggle.emit();
            }
        }
    }
    // Get sidebar classes for responsive behavior
    getSidebarClasses() {
        let classes = 'sidebar';
        if (this.collapsed) {
            classes += ' collapsed';
        }
        if (this.isMobile) {
            classes += ' mobile-overlay';
        }
        else if (this.isTablet) {
            classes += ' tablet-overlay';
        }
        else {
            classes += ' desktop-sidebar';
        }
        return classes;
    }
    // Handle navigation with auto-close on mobile
    navigateTo(path) {
        this.router.navigate([path]);
        // Auto-close sidebar on mobile after navigation
        if (this.isMobile && !this.collapsed) {
            this.toggle.emit();
        }
    }
    // Handle backdrop click to close sidebar
    onBackdropClick() {
        if ((this.isMobile || this.isTablet) && !this.collapsed) {
            this.toggle.emit();
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: SidebarComponent, deps: [{ token: i1.Router }, { token: i2.MenuService }, { token: i2.AuthService }, { token: PLATFORM_ID }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.12", type: SidebarComponent, isStandalone: true, selector: "app-sidebar", inputs: { collapsed: "collapsed" }, outputs: { toggle: "toggle" }, host: { listeners: { "window:resize": "onResize($event)" } }, ngImport: i0, template: "<!-- Backdrop for overlay sidebar -->\n<div class=\"sidebar-backdrop\" \n     [class.show]=\"(isMobile || isTablet) && !collapsed\" \n     (click)=\"onBackdropClick()\">\n</div>\n\n<nav [class]=\"getSidebarClasses()\">\n  <div class=\"sidebar-header\">\n    <span class=\"logo\">\n      @if (!collapsed) {\n        <img src=\"assets/logo.svg\" alt=\"ShreeClinic\" height=\"32\" />\n      }\n    </span>\n    <button class=\"collapse-btn\" (click)=\"toggle.emit()\" [attr.aria-label]=\"collapsed ? 'Expand sidebar' : 'Collapse sidebar'\">\n      @if (!collapsed) {\n        <span>&#x25C0;</span>\n      } @else {\n        <span>&#x25B6;</span>\n      }\n    </button>\n  </div>\n  \n  <div class=\"sidebar-content\">\n      <!-- Main Navigation -->\n  <div class=\"sidebar-section\">\n    <ul class=\"sidebar-nav\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('main')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n\n  <!-- Management Section (Admin Only) -->\n  <div class=\"sidebar-section\" *ngIf=\"getMenuItemsBySection('management').length > 0\">\n    <ng-container *ngIf=\"!collapsed\">\n      <div class=\"section-title\">{{ getSectionTitle('management') }}</div>\n    </ng-container>\n    <ul class=\"sidebar-nav\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('management')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n\n  <!-- Services Section (Admin Only) -->\n  <div class=\"sidebar-section\" *ngIf=\"getMenuItemsBySection('services').length > 0\">\n    <ng-container *ngIf=\"!collapsed\">\n      <div class=\"section-title\">{{ getSectionTitle('services') }}</div>\n    </ng-container>\n    <ul class=\"sidebar-nav\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('services')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n\n  <!-- Administration Section (Admin Only) -->\n  <div class=\"sidebar-section\" *ngIf=\"getMenuItemsBySection('administration').length > 0\">\n    <ng-container *ngIf=\"!collapsed\">\n      <div class=\"section-title\">{{ getSectionTitle('administration') }}</div>\n    </ng-container>\n    <ul class=\"sidebar-nav\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('administration')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n\n  <!-- Tools Section -->\n  <div class=\"sidebar-footer\">\n    <ng-container *ngIf=\"!collapsed\">\n      <div class=\"tools-title\">{{ getSectionTitle('tools') }}</div>\n    </ng-container>\n    <ul class=\"sidebar-tools\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('tools')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n  </div>\n</nav>\n", styles: [".sidebar{display:flex;flex-direction:column;height:100vh;width:var(--sidebar-width);min-width:var(--sidebar-min-width);background:var(--sidebar-background-color);box-shadow:var(--sidebar-box-shadow);transition:var(--sidebar-transition);z-index:10;position:relative}.sidebar.collapsed{width:var(--sidebar-collapsed-width);min-width:var(--sidebar-collapsed-min-width)}.sidebar.collapsed .label,.sidebar.collapsed .tools-title{display:none}.sidebar.collapsed .sidebar-header{justify-content:center}.sidebar.collapsed .nav-item{margin:var(--sidebar-nav-item-margin)}.sidebar.desktop-sidebar{position:relative;z-index:10}.sidebar.tablet-overlay{position:fixed;top:0;left:0;z-index:1000;transform:translate(-100%)}.sidebar.tablet-overlay:not(.collapsed){transform:translate(0)}.sidebar.tablet-overlay.collapsed{transform:translate(0);width:var(--sidebar-collapsed-width)}.sidebar.mobile-overlay{position:fixed;top:0;left:0;z-index:1000;transform:translate(-100%);width:280px}.sidebar.mobile-overlay:not(.collapsed){transform:translate(0)}.sidebar.mobile-overlay.collapsed{transform:translate(-100%);width:var(--sidebar-collapsed-width)}.sidebar-header{display:flex;align-items:center;justify-content:space-between;padding:var(--sidebar-header-padding);min-height:var(--sidebar-min-height)}.sidebar-content{height:calc(100% - var(--sidebar-min-height));overflow-y:scroll}.logo{width:90%}.logo img{display:flex;width:100%}.collapse-btn{background:none;border:none;color:var(--text-muted);font-size:18px;cursor:pointer;padding:8px;border-radius:var(--small-border-radius);transition:var(--transition-fast);margin-left:8px;position:absolute;right:12px;z-index:2}.collapse-btn:hover{background:var(--status-neutral-bg);color:var(--text-primary)}.sidebar-nav,.sidebar-tools{list-style:none;padding:0;margin:0}.sidebar-nav{min-height:8em;flex:1;overflow-y:scroll}.sidebar-section{margin-top:0;padding-top:0;border-top:none}.sidebar-section:not(:first-child){padding-top:16px;border-top:1px solid var(--border-color)}.sidebar-section .section-title{font-size:var(--font-size-sm);color:var(--text-muted);padding:0 24px 8px;font-weight:var(--font-weight-semibold);text-transform:uppercase;letter-spacing:.5px}.sidebar-section .sidebar-nav{min-height:auto;margin-top:.5em}.nav-item{display:flex;align-items:center;gap:16px;padding:9px 13px;color:var(--text-primary);font-size:var(--font-size-base);font-weight:var(--font-weight-medium);border-radius:var(--small-border-radius);cursor:pointer;transition:var(--transition-fast);margin:0 12px 4px;position:relative;overflow:hidden}.nav-item:before{content:\"\";position:absolute;left:0;top:0;height:100%;width:3px;background:var(--primary-color);transform:scaleY(0);transition:transform .2s ease}.nav-item.active{background:var(--primary-color);color:#fff;font-weight:var(--font-weight-semibold);box-shadow:var(--card-shadow)}.nav-item.active:before{transform:scaleY(1)}.nav-item.active .icon,.nav-item.active .icon-collapsed{color:#fff}.nav-item:hover:not(.active){background:var(--primary-color-hover);transform:translate(2px)}.nav-item .icon,.nav-item .icon-collapsed{font-size:20px;min-width:24px;text-align:center;color:var(--text-muted);transition:var(--transition-fast)}.sidebar-footer{min-height:160px;margin-top:auto;padding:8px 0 0;border-top:1px solid var(--border-color);overflow-y:scroll}.tools-title{font-size:var(--font-size-sm);color:var(--text-muted);padding:0 24px 8px;font-weight:var(--font-weight-medium)}.sidebar-backdrop{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;z-index:999;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.sidebar-backdrop.show{opacity:1;visibility:visible}@media (max-width: 1024px){.sidebar.tablet-overlay.collapsed{transform:translate(0)}}@media (max-width: 768px){.sidebar.mobile-overlay{width:280px}.sidebar.mobile-overlay:not(.collapsed){transform:translate(0)}.sidebar.mobile-overlay.collapsed{transform:translate(-100%)}}@media (max-width: 900px){.sidebar.desktop-sidebar{width:64px;min-width:64px}}@media (max-width: 600px){.sidebar.desktop-sidebar{width:100vw;min-width:0;height:56px;flex-direction:row;align-items:center}.sidebar.desktop-sidebar .sidebar-header,.sidebar.desktop-sidebar .sidebar-footer{padding:0 8px}.sidebar.desktop-sidebar .sidebar-nav,.sidebar.desktop-sidebar .sidebar-tools{flex-direction:row;gap:8px}}.sidebar-nav::-webkit-scrollbar,.sidebar-footer::-webkit-scrollbar{display:none;width:0}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: IconComponent, selector: "app-icon", inputs: ["fontSet", "fontIcon", "iconType", "icomoonClass", "size", "isBlink", "fontBold", "color", "class", "counter", "isCovered"], outputs: ["iconClick"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: SidebarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-sidebar', standalone: true, imports: [CommonModule, IconComponent], template: "<!-- Backdrop for overlay sidebar -->\n<div class=\"sidebar-backdrop\" \n     [class.show]=\"(isMobile || isTablet) && !collapsed\" \n     (click)=\"onBackdropClick()\">\n</div>\n\n<nav [class]=\"getSidebarClasses()\">\n  <div class=\"sidebar-header\">\n    <span class=\"logo\">\n      @if (!collapsed) {\n        <img src=\"assets/logo.svg\" alt=\"ShreeClinic\" height=\"32\" />\n      }\n    </span>\n    <button class=\"collapse-btn\" (click)=\"toggle.emit()\" [attr.aria-label]=\"collapsed ? 'Expand sidebar' : 'Collapse sidebar'\">\n      @if (!collapsed) {\n        <span>&#x25C0;</span>\n      } @else {\n        <span>&#x25B6;</span>\n      }\n    </button>\n  </div>\n  \n  <div class=\"sidebar-content\">\n      <!-- Main Navigation -->\n  <div class=\"sidebar-section\">\n    <ul class=\"sidebar-nav\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('main')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n\n  <!-- Management Section (Admin Only) -->\n  <div class=\"sidebar-section\" *ngIf=\"getMenuItemsBySection('management').length > 0\">\n    <ng-container *ngIf=\"!collapsed\">\n      <div class=\"section-title\">{{ getSectionTitle('management') }}</div>\n    </ng-container>\n    <ul class=\"sidebar-nav\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('management')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n\n  <!-- Services Section (Admin Only) -->\n  <div class=\"sidebar-section\" *ngIf=\"getMenuItemsBySection('services').length > 0\">\n    <ng-container *ngIf=\"!collapsed\">\n      <div class=\"section-title\">{{ getSectionTitle('services') }}</div>\n    </ng-container>\n    <ul class=\"sidebar-nav\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('services')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n\n  <!-- Administration Section (Admin Only) -->\n  <div class=\"sidebar-section\" *ngIf=\"getMenuItemsBySection('administration').length > 0\">\n    <ng-container *ngIf=\"!collapsed\">\n      <div class=\"section-title\">{{ getSectionTitle('administration') }}</div>\n    </ng-container>\n    <ul class=\"sidebar-nav\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('administration')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n\n  <!-- Tools Section -->\n  <div class=\"sidebar-footer\">\n    <ng-container *ngIf=\"!collapsed\">\n      <div class=\"tools-title\">{{ getSectionTitle('tools') }}</div>\n    </ng-container>\n    <ul class=\"sidebar-tools\">\n      <ng-container *ngFor=\"let item of getMenuItemsBySection('tools')\">\n        <li class=\"nav-item\" \n            [class.active]=\"item.route && isActive(item.route)\" \n            (click)=\"item.route && navigateTo(item.route)\">\n          <div>\n            <app-icon [fontSet]=\"'material-icons-outlined'\" [fontIcon]=\"item.icon\" [size]=\"collapsed ? iconSizeOnCollapsed : iconSizeOnExpanded\" [class]=\"collapsed ? 'icon-collapsed' : 'icon'\" [color]=\"item.route && isActive(item.route) ? 'var(--secondary-color)' : ''\"></app-icon>\n            <ng-container *ngIf=\"!collapsed\">\n              <span class=\"label\">{{ item.label }}</span>\n            </ng-container>\n          </div>\n        </li>\n      </ng-container>\n    </ul>\n  </div>\n  </div>\n</nav>\n", styles: [".sidebar{display:flex;flex-direction:column;height:100vh;width:var(--sidebar-width);min-width:var(--sidebar-min-width);background:var(--sidebar-background-color);box-shadow:var(--sidebar-box-shadow);transition:var(--sidebar-transition);z-index:10;position:relative}.sidebar.collapsed{width:var(--sidebar-collapsed-width);min-width:var(--sidebar-collapsed-min-width)}.sidebar.collapsed .label,.sidebar.collapsed .tools-title{display:none}.sidebar.collapsed .sidebar-header{justify-content:center}.sidebar.collapsed .nav-item{margin:var(--sidebar-nav-item-margin)}.sidebar.desktop-sidebar{position:relative;z-index:10}.sidebar.tablet-overlay{position:fixed;top:0;left:0;z-index:1000;transform:translate(-100%)}.sidebar.tablet-overlay:not(.collapsed){transform:translate(0)}.sidebar.tablet-overlay.collapsed{transform:translate(0);width:var(--sidebar-collapsed-width)}.sidebar.mobile-overlay{position:fixed;top:0;left:0;z-index:1000;transform:translate(-100%);width:280px}.sidebar.mobile-overlay:not(.collapsed){transform:translate(0)}.sidebar.mobile-overlay.collapsed{transform:translate(-100%);width:var(--sidebar-collapsed-width)}.sidebar-header{display:flex;align-items:center;justify-content:space-between;padding:var(--sidebar-header-padding);min-height:var(--sidebar-min-height)}.sidebar-content{height:calc(100% - var(--sidebar-min-height));overflow-y:scroll}.logo{width:90%}.logo img{display:flex;width:100%}.collapse-btn{background:none;border:none;color:var(--text-muted);font-size:18px;cursor:pointer;padding:8px;border-radius:var(--small-border-radius);transition:var(--transition-fast);margin-left:8px;position:absolute;right:12px;z-index:2}.collapse-btn:hover{background:var(--status-neutral-bg);color:var(--text-primary)}.sidebar-nav,.sidebar-tools{list-style:none;padding:0;margin:0}.sidebar-nav{min-height:8em;flex:1;overflow-y:scroll}.sidebar-section{margin-top:0;padding-top:0;border-top:none}.sidebar-section:not(:first-child){padding-top:16px;border-top:1px solid var(--border-color)}.sidebar-section .section-title{font-size:var(--font-size-sm);color:var(--text-muted);padding:0 24px 8px;font-weight:var(--font-weight-semibold);text-transform:uppercase;letter-spacing:.5px}.sidebar-section .sidebar-nav{min-height:auto;margin-top:.5em}.nav-item{display:flex;align-items:center;gap:16px;padding:9px 13px;color:var(--text-primary);font-size:var(--font-size-base);font-weight:var(--font-weight-medium);border-radius:var(--small-border-radius);cursor:pointer;transition:var(--transition-fast);margin:0 12px 4px;position:relative;overflow:hidden}.nav-item:before{content:\"\";position:absolute;left:0;top:0;height:100%;width:3px;background:var(--primary-color);transform:scaleY(0);transition:transform .2s ease}.nav-item.active{background:var(--primary-color);color:#fff;font-weight:var(--font-weight-semibold);box-shadow:var(--card-shadow)}.nav-item.active:before{transform:scaleY(1)}.nav-item.active .icon,.nav-item.active .icon-collapsed{color:#fff}.nav-item:hover:not(.active){background:var(--primary-color-hover);transform:translate(2px)}.nav-item .icon,.nav-item .icon-collapsed{font-size:20px;min-width:24px;text-align:center;color:var(--text-muted);transition:var(--transition-fast)}.sidebar-footer{min-height:160px;margin-top:auto;padding:8px 0 0;border-top:1px solid var(--border-color);overflow-y:scroll}.tools-title{font-size:var(--font-size-sm);color:var(--text-muted);padding:0 24px 8px;font-weight:var(--font-weight-medium)}.sidebar-backdrop{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#00000080;z-index:999;opacity:0;visibility:hidden;transition:opacity .3s ease,visibility .3s ease}.sidebar-backdrop.show{opacity:1;visibility:visible}@media (max-width: 1024px){.sidebar.tablet-overlay.collapsed{transform:translate(0)}}@media (max-width: 768px){.sidebar.mobile-overlay{width:280px}.sidebar.mobile-overlay:not(.collapsed){transform:translate(0)}.sidebar.mobile-overlay.collapsed{transform:translate(-100%)}}@media (max-width: 900px){.sidebar.desktop-sidebar{width:64px;min-width:64px}}@media (max-width: 600px){.sidebar.desktop-sidebar{width:100vw;min-width:0;height:56px;flex-direction:row;align-items:center}.sidebar.desktop-sidebar .sidebar-header,.sidebar.desktop-sidebar .sidebar-footer{padding:0 8px}.sidebar.desktop-sidebar .sidebar-nav,.sidebar.desktop-sidebar .sidebar-tools{flex-direction:row;gap:8px}}.sidebar-nav::-webkit-scrollbar,.sidebar-footer::-webkit-scrollbar{display:none;width:0}\n"] }]
        }], ctorParameters: () => [{ type: i1.Router }, { type: i2.MenuService }, { type: i2.AuthService }, { type: Object, decorators: [{
                    type: Inject,
                    args: [PLATFORM_ID]
                }] }], propDecorators: { collapsed: [{
                type: Input
            }], toggle: [{
                type: Output
            }], onResize: [{
                type: HostListener,
                args: ['window:resize', ['$event']]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZWJhci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21tb24tbGlicy90ZW1wbGF0ZS9zcmMvbGliL2xheW91dC9zaWRlYmFyL3NpZGViYXIuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29tbW9uLWxpYnMvdGVtcGxhdGUvc3JjL2xpYi9sYXlvdXQvc2lkZWJhci9zaWRlYmFyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsaUJBQWlCLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUNsRSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFxQixZQUFZLEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUU3SCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sVUFBVSxDQUFDO0FBTXpDLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUM7Ozs7O0FBU3BDLE1BQU0sT0FBTyxnQkFBZ0I7SUFlM0IsWUFDVSxNQUFjLEVBQ2QsV0FBd0IsRUFDeEIsV0FBd0IsRUFDSCxVQUFrQjtRQUh2QyxXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFDeEIsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFDSCxlQUFVLEdBQVYsVUFBVSxDQUFRO1FBbEJ4QyxjQUFTLEdBQUcsS0FBSyxDQUFDO1FBQ2pCLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBUSxDQUFDO1FBRTVDLHdCQUFtQixHQUFHLEVBQUUsQ0FBQztRQUN6Qix1QkFBa0IsR0FBRyxFQUFFLENBQUM7UUFFeEIsYUFBUSxHQUFzQixFQUFFLENBQUM7UUFDekIsa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBRTNDLHdC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QyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUN4RCxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO1FBQ3JCLENBQUM7SUFDSCxDQUFDOytHQTNJVSxnQkFBZ0IsOEZBbUJqQixXQUFXO21HQW5CVixnQkFBZ0Isd01DbEI3Qix1dExBOEhBLCs1SURoSFksWUFBWSxnUUFBRSxhQUFhOzs0RkFJMUIsZ0JBQWdCO2tCQVA1QixTQUFTOytCQUNFLGFBQWEsY0FDWCxJQUFJLFdBQ1AsQ0FBQyxZQUFZLEVBQUUsYUFBYSxDQUFDOzswQkF1Qm5DLE1BQU07MkJBQUMsV0FBVzt5Q0FsQlosU0FBUztzQkFBakIsS0FBSztnQkFDSSxNQUFNO3NCQUFmLE1BQU07Z0JBNkVQLFFBQVE7c0JBRFAsWUFBWTt1QkFBQyxlQUFlLEVBQUUsQ0FBQyxRQUFRLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21tb25Nb2R1bGUsIGlzUGxhdGZvcm1Ccm93c2VyIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkluaXQsIE9uRGVzdHJveSwgSG9zdExpc3RlbmVyLCBJbmplY3QsIFBMQVRGT1JNX0lEIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgSWNvbkNvbXBvbmVudCB9IGZyb20gJ0Bsay9jb3JlJztcbi8vIFRPRE86IEltcG9ydCBmcm9tIEBsay9jb3JlIG9uY2UgY29yZSBsaWJyYXJ5IGlzIHJlYnVpbHQgd2l0aCBTaWRlYmFyTWVudUl0ZW0gZXhwb3J0XG4vLyBpbXBvcnQgeyBTaWRlYmFyTWVudUl0ZW0gfSBmcm9tICdAbGsvY29yZSc7XG5pbXBvcnQgeyBTaWRlYmFyTWVudUl0ZW0gfSBmcm9tICdAbGsvY29yZS9saWIvaW50ZXJmYWNlcy9zaWRlYmFybWVudS5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgTWVudVNlcnZpY2UgfSBmcm9tICdAbGsvY29yZSc7XG5pbXBvcnQgeyBBdXRoU2VydmljZSB9IGZyb20gJ0Bsay9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtc2lkZWJhcicsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIEljb25Db21wb25lbnRdLFxuICB0ZW1wbGF0ZVVybDogJy4vc2lkZWJhci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsOiAnLi9zaWRlYmFyLmNvbXBvbmVudC5zY3NzJ1xufSlcbmV4cG9ydCBjbGFzcyBTaWRlYmFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBPbkRlc3Ryb3kge1xuICBASW5wdXQoKSBjb2xsYXBzZWQgPSBmYWxzZTtcbiAgQE91dHB1dCgpIHRvZ2dsZSA9IG5ldyBFdmVudEVtaXR0ZXI8dm9pZD4oKTtcblxuICBpY29uU2l6ZU9uQ29sbGFwc2VkID0gMTg7XG4gIGljb25TaXplT25FeHBhbmRlZCA9IDIwO1xuXG4gIG1lbnVMaXN0OiBTaWRlYmFyTWVudUl0ZW1bXSA9IFtdO1xuICBwcml2YXRlIHN1YnNjcmlwdGlvbnMgPSBuZXcgU3Vic2NyaXB0aW9uKCk7XG4gIFxuICAvLyBSZXNwb25zaXZlIHByb3BlcnRpZXNcbiAgaXNNb2JpbGUgPSBmYWxzZTtcbiAgaXNUYWJsZXQgPSBmYWxzZTtcbiAgc2NyZWVuV2lkdGggPSAwO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgcHJpdmF0ZSBtZW51U2VydmljZTogTWVudVNlcnZpY2UsXG4gICAgcHJpdmF0ZSBhdXRoU2VydmljZTogQXV0aFNlcnZpY2UsXG4gICAgQEluamVjdChQTEFURk9STV9JRCkgcHJpdmF0ZSBwbGF0Zm9ybUlkOiBPYmplY3RcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIC8vIEluaXRpYWxpemUgc2NyZWVuIHNpemVcbiAgICB0aGlzLmNoZWNrU2NyZWVuU2l6ZSgpO1xuICAgIFxuICAgIC8vIFN1YnNjcmliZSB0byBtZW51IGNoYW5nZXNcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKFxuICAgICAgdGhpcy5tZW51U2VydmljZS5nZXRNZW51KCkuc3Vic2NyaWJlKG1lbnUgPT4ge1xuICAgICAgICB0aGlzLm1lbnVMaXN0ID0gbWVudTtcbiAgICAgIH0pXG4gICAgKTtcblxuICAgIC8vIFN1YnNjcmliZSB0byBhdXRoIGNoYW5nZXMgdG8gdXBkYXRlIG1lbnVcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKFxuICAgICAgdGhpcy5hdXRoU2VydmljZS5jdXJyZW50VXNlciQuc3Vic2NyaWJlKHVzZXIgPT4ge1xuICAgICAgICBpZiAodXNlcikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdTaWRlYmFyIHJlY2VpdmVkIHVzZXI6JywgdXNlcik7XG4gICAgICAgICAgLy8gTWFwIHVzZXIgdHlwZXMgdG8gbWVudSBzZXJ2aWNlIGV4cGVjdGVkIHZhbHVlc1xuICAgICAgICAgIGxldCBtZW51VXNlclR5cGU6ICdkb2N0b3InIHwgJ2FkbWluJztcbiAgICAgICAgICBpZiAodXNlci51c2VyVHlwZSA9PT0gJ0hPU1BJVEFMJykge1xuICAgICAgICAgICAgbWVudVVzZXJUeXBlID0gJ2FkbWluJztcbiAgICAgICAgICB9IGVsc2UgaWYgKHVzZXIudXNlclR5cGUgPT09ICdET0NUT1InKSB7XG4gICAgICAgICAgICBtZW51VXNlclR5cGUgPSAnZG9jdG9yJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWVudVVzZXJUeXBlID0gJ2RvY3Rvcic7IC8vIERlZmF1bHQgZmFsbGJhY2tcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc29sZS5sb2coJ1VwZGF0aW5nIG1lbnUgZm9yIHVzZXIgdHlwZTonLCBtZW51VXNlclR5cGUpO1xuICAgICAgICAgIHRoaXMubWVudVNlcnZpY2UudXBkYXRlTWVudShtZW51VXNlclR5cGUpO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKTtcbiAgfVxuXG4gIGlzQWN0aXZlKHBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJvdXRlci51cmwgPT09IHBhdGg7XG4gIH1cblxuICBnZXRNZW51SXRlbXNCeVNlY3Rpb24oc2VjdGlvbjogc3RyaW5nKTogU2lkZWJhck1lbnVJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLm1lbnVMaXN0LmZpbHRlcihpdGVtID0+IGl0ZW0uc2VjdGlvbiA9PT0gc2VjdGlvbik7XG4gIH1cblxuICBnZXRTZWN0aW9uVGl0bGUoc2VjdGlvbjogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBzZWN0aW9uVGl0bGVzOiB7IFtrZXk6IHN0cmluZ106IHN0cmluZyB9ID0ge1xuICAgICAgJ21haW4nOiAnTWFpbicsXG4gICAgICAnbWFuYWdlbWVudCc6ICdNYW5hZ2VtZW50JyxcbiAgICAgICdzZXJ2aWNlcyc6ICdTZXJ2aWNlcycsXG4gICAgICAnYWRtaW5pc3RyYXRpb24nOiAnQWRtaW5pc3RyYXRpb24nLFxuICAgICAgJ3Rvb2xzJzogJ1Rvb2xzJ1xuICAgIH07XG4gICAgcmV0dXJuIHNlY3Rpb25UaXRsZXNbc2VjdGlvbl0gfHwgc2VjdGlvbjtcbiAgfVxuXG4gIC8vIFNjcmVlbiBzaXplIGRldGVjdGlvblxuICBASG9zdExpc3RlbmVyKCd3aW5kb3c6cmVzaXplJywgWyckZXZlbnQnXSlcbiAgb25SZXNpemUoZXZlbnQ6IGFueSkge1xuICAgIHRoaXMuY2hlY2tTY3JlZW5TaXplKCk7XG4gIH1cblxuICBwcml2YXRlIGNoZWNrU2NyZWVuU2l6ZSgpIHtcbiAgICAvLyBPbmx5IGNoZWNrIHNjcmVlbiBzaXplIGluIGJyb3dzZXIgKG5vdCBkdXJpbmcgU1NSKVxuICAgIGlmICghaXNQbGF0Zm9ybUJyb3dzZXIodGhpcy5wbGF0Zm9ybUlkKSkge1xuICAgICAgLy8gRGVmYXVsdCB2YWx1ZXMgZm9yIFNTUlxuICAgICAgdGhpcy5zY3JlZW5XaWR0aCA9IDEwMjQ7XG4gICAgICB0aGlzLmlzTW9iaWxlID0gZmFsc2U7XG4gICAgICB0aGlzLmlzVGFibGV0ID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIHRoaXMuc2NyZWVuV2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICB0aGlzLmlzTW9iaWxlID0gdGhpcy5zY3JlZW5XaWR0aCA8PSA3Njg7XG4gICAgdGhpcy5pc1RhYmxldCA9IHRoaXMuc2NyZWVuV2lkdGggPiA3NjggJiYgdGhpcy5zY3JlZW5XaWR0aCA8PSAxMDI0O1xuICAgIFxuICAgIC8vIEF1dG8tY29sbGFwc2Ugb24gbW9iaWxlL3RhYmxldFxuICAgIGlmICh0aGlzLmlzTW9iaWxlIHx8IHRoaXMuaXNUYWJsZXQpIHtcbiAgICAgIGlmICghdGhpcy5jb2xsYXBzZWQpIHtcbiAgICAgICAgdGhpcy50b2dnbGUuZW1pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEdldCBzaWRlYmFyIGNsYXNzZXMgZm9yIHJlc3BvbnNpdmUgYmVoYXZpb3JcbiAgZ2V0U2lkZWJhckNsYXNzZXMoKTogc3RyaW5nIHtcbiAgICBsZXQgY2xhc3NlcyA9ICdzaWRlYmFyJztcbiAgICBcbiAgICBpZiAodGhpcy5jb2xsYXBzZWQpIHtcbiAgICAgIGNsYXNzZXMgKz0gJyBjb2xsYXBzZWQnO1xuICAgIH1cbiAgICBcbiAgICBpZiAodGhpcy5pc01vYmlsZSkge1xuICAgICAgY2xhc3NlcyArPSAnIG1vYmlsZS1vdmVybGF5JztcbiAgICB9IGVsc2UgaWYgKHRoaXMuaXNUYWJsZXQpIHtcbiAgICAgIGNsYXNzZXMgKz0gJyB0YWJsZXQtb3ZlcmxheSc7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNsYXNzZXMgKz0gJyBkZXNrdG9wLXNpZGViYXInO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gY2xhc3NlcztcbiAgfVxuXG4gIC8vIEhhbmRsZSBuYXZpZ2F0aW9uIHdpdGggYXV0by1jbG9zZSBvbiBtb2JpbGVcbiAgbmF2aWdhdGVUbyhwYXRoOiBzdHJpbmcpIHtcbiAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbcGF0aF0pO1xuICAgIFxuICAgIC8vIEF1dG8tY2xvc2Ugc2lkZWJhciBvbiBtb2JpbGUgYWZ0ZXIgbmF2aWdhdGlvblxuICAgIGlmICh0aGlzLmlzTW9iaWxlICYmICF0aGlzLmNvbGxhcHNlZCkge1xuICAgICAgdGhpcy50b2dnbGUuZW1pdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBiYWNrZHJvcCBjbGljayB0byBjbG9zZSBzaWRlYmFyXG4gIG9uQmFja2Ryb3BDbGljaygpIHtcbiAgICBpZiAoKHRoaXMuaXNNb2JpbGUgfHwgdGhpcy5pc1RhYmxldCkgJiYgIXRoaXMuY29sbGFwc2VkKSB7XG4gICAgICB0aGlzLnRvZ2dsZS5lbWl0KCk7XG4gICAgfVxuICB9XG59XG4iLCI8IS0tIEJhY2tkcm9wIGZvciBvdmVybGF5IHNpZGViYXIgLS0+XG48ZGl2IGNsYXNzPVwic2lkZWJhci1iYWNrZHJvcFwiIFxuICAgICBbY2xhc3Muc2hvd109XCIoaXNNb2JpbGUgfHwgaXNUYWJsZXQpICYmICFjb2xsYXBzZWRcIiBcbiAgICAgKGNsaWNrKT1cIm9uQmFja2Ryb3BDbGljaygpXCI+XG48L2Rpdj5cblxuPG5hdiBbY2xhc3NdPVwiZ2V0U2lkZWJhckNsYXNzZXMoKVwiPlxuICA8ZGl2IGNsYXNzPVwic2lkZWJhci1oZWFkZXJcIj5cbiAgICA8c3BhbiBjbGFzcz1cImxvZ29cIj5cbiAgICAgIEBpZiAoIWNvbGxhcHNlZCkge1xuICAgICAgICA8aW1nIHNyYz1cImFzc2V0cy9sb2dvLnN2Z1wiIGFsdD1cIlNocmVlQ2xpbmljXCIgaGVpZ2h0PVwiMzJcIiAvPlxuICAgICAgfVxuICAgIDwvc3Bhbj5cbiAgICA8YnV0dG9uIGNsYXNzPVwiY29sbGFwc2UtYnRuXCIgKGNsaWNrKT1cInRvZ2dsZS5lbWl0KClcIiBbYXR0ci5hcmlhLWxhYmVsXT1cImNvbGxhcHNlZCA/ICdFeHBhbmQgc2lkZWJhcicgOiAnQ29sbGFwc2Ugc2lkZWJhcidcIj5cbiAgICAgIEBpZiAoIWNvbGxhcHNlZCkge1xuICAgICAgICA8c3Bhbj4mI3gyNUMwOzwvc3Bhbj5cbiAgICAgIH0gQGVsc2Uge1xuICAgICAgICA8c3Bhbj4mI3gyNUI2Ozwvc3Bhbj5cbiAgICAgIH1cbiAgICA8L2J1dHRvbj5cbiAgPC9kaXY+XG4gIFxuICA8ZGl2IGNsYXNzPVwic2lkZWJhci1jb250ZW50XCI+XG4gICAgICA8IS0tIE1haW4gTmF2aWdhdGlvbiAtLT5cbiAgPGRpdiBjbGFzcz1cInNpZGViYXItc2VjdGlvblwiPlxuICAgIDx1bCBjbGFzcz1cInNpZGViYXItbmF2XCI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBpdGVtIG9mIGdldE1lbnVJdGVtc0J5U2VjdGlvbignbWFpbicpXCI+XG4gICAgICAgIDxsaSBjbGFzcz1cIm5hdi1pdGVtXCIgXG4gICAgICAgICAgICBbY2xhc3MuYWN0aXZlXT1cIml0ZW0ucm91dGUgJiYgaXNBY3RpdmUoaXRlbS5yb3V0ZSlcIiBcbiAgICAgICAgICAgIChjbGljayk9XCJpdGVtLnJvdXRlICYmIG5hdmlnYXRlVG8oaXRlbS5yb3V0ZSlcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGFwcC1pY29uIFtmb250U2V0XT1cIidtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCdcIiBbZm9udEljb25dPVwiaXRlbS5pY29uXCIgW3NpemVdPVwiY29sbGFwc2VkID8gaWNvblNpemVPbkNvbGxhcHNlZCA6IGljb25TaXplT25FeHBhbmRlZFwiIFtjbGFzc109XCJjb2xsYXBzZWQgPyAnaWNvbi1jb2xsYXBzZWQnIDogJ2ljb24nXCIgW2NvbG9yXT1cIml0ZW0ucm91dGUgJiYgaXNBY3RpdmUoaXRlbS5yb3V0ZSkgPyAndmFyKC0tc2Vjb25kYXJ5LWNvbG9yKScgOiAnJ1wiPjwvYXBwLWljb24+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWNvbGxhcHNlZFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsXCI+e3sgaXRlbS5sYWJlbCB9fTwvc3Bhbj5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2xpPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC91bD5cbiAgPC9kaXY+XG5cbiAgPCEtLSBNYW5hZ2VtZW50IFNlY3Rpb24gKEFkbWluIE9ubHkpIC0tPlxuICA8ZGl2IGNsYXNzPVwic2lkZWJhci1zZWN0aW9uXCIgKm5nSWY9XCJnZXRNZW51SXRlbXNCeVNlY3Rpb24oJ21hbmFnZW1lbnQnKS5sZW5ndGggPiAwXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFjb2xsYXBzZWRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uLXRpdGxlXCI+e3sgZ2V0U2VjdGlvblRpdGxlKCdtYW5hZ2VtZW50JykgfX08L2Rpdj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8dWwgY2xhc3M9XCJzaWRlYmFyLW5hdlwiPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgaXRlbSBvZiBnZXRNZW51SXRlbXNCeVNlY3Rpb24oJ21hbmFnZW1lbnQnKVwiPlxuICAgICAgICA8bGkgY2xhc3M9XCJuYXYtaXRlbVwiIFxuICAgICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJpdGVtLnJvdXRlICYmIGlzQWN0aXZlKGl0ZW0ucm91dGUpXCIgXG4gICAgICAgICAgICAoY2xpY2spPVwiaXRlbS5yb3V0ZSAmJiBuYXZpZ2F0ZVRvKGl0ZW0ucm91dGUpXCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxhcHAtaWNvbiBbZm9udFNldF09XCInbWF0ZXJpYWwtaWNvbnMtb3V0bGluZWQnXCIgW2ZvbnRJY29uXT1cIml0ZW0uaWNvblwiIFtzaXplXT1cImNvbGxhcHNlZCA/IGljb25TaXplT25Db2xsYXBzZWQgOiBpY29uU2l6ZU9uRXhwYW5kZWRcIiBbY2xhc3NdPVwiY29sbGFwc2VkID8gJ2ljb24tY29sbGFwc2VkJyA6ICdpY29uJ1wiIFtjb2xvcl09XCJpdGVtLnJvdXRlICYmIGlzQWN0aXZlKGl0ZW0ucm91dGUpID8gJ3ZhcigtLXNlY29uZGFyeS1jb2xvciknIDogJydcIj48L2FwcC1pY29uPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFjb2xsYXBzZWRcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbFwiPnt7IGl0ZW0ubGFiZWwgfX08L3NwYW4+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9saT5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvdWw+XG4gIDwvZGl2PlxuXG4gIDwhLS0gU2VydmljZXMgU2VjdGlvbiAoQWRtaW4gT25seSkgLS0+XG4gIDxkaXYgY2xhc3M9XCJzaWRlYmFyLXNlY3Rpb25cIiAqbmdJZj1cImdldE1lbnVJdGVtc0J5U2VjdGlvbignc2VydmljZXMnKS5sZW5ndGggPiAwXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFjb2xsYXBzZWRcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uLXRpdGxlXCI+e3sgZ2V0U2VjdGlvblRpdGxlKCdzZXJ2aWNlcycpIH19PC9kaXY+XG4gICAgPC9uZy1jb250YWluZXI+XG4gICAgPHVsIGNsYXNzPVwic2lkZWJhci1uYXZcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGl0ZW0gb2YgZ2V0TWVudUl0ZW1zQnlTZWN0aW9uKCdzZXJ2aWNlcycpXCI+XG4gICAgICAgIDxsaSBjbGFzcz1cIm5hdi1pdGVtXCIgXG4gICAgICAgICAgICBbY2xhc3MuYWN0aXZlXT1cIml0ZW0ucm91dGUgJiYgaXNBY3RpdmUoaXRlbS5yb3V0ZSlcIiBcbiAgICAgICAgICAgIChjbGljayk9XCJpdGVtLnJvdXRlICYmIG5hdmlnYXRlVG8oaXRlbS5yb3V0ZSlcIj5cbiAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgPGFwcC1pY29uIFtmb250U2V0XT1cIidtYXRlcmlhbC1pY29ucy1vdXRsaW5lZCdcIiBbZm9udEljb25dPVwiaXRlbS5pY29uXCIgW3NpemVdPVwiY29sbGFwc2VkID8gaWNvblNpemVPbkNvbGxhcHNlZCA6IGljb25TaXplT25FeHBhbmRlZFwiIFtjbGFzc109XCJjb2xsYXBzZWQgPyAnaWNvbi1jb2xsYXBzZWQnIDogJ2ljb24nXCIgW2NvbG9yXT1cIml0ZW0ucm91dGUgJiYgaXNBY3RpdmUoaXRlbS5yb3V0ZSkgPyAndmFyKC0tc2Vjb25kYXJ5LWNvbG9yKScgOiAnJ1wiPjwvYXBwLWljb24+XG4gICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWNvbGxhcHNlZFwiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImxhYmVsXCI+e3sgaXRlbS5sYWJlbCB9fTwvc3Bhbj5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2xpPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC91bD5cbiAgPC9kaXY+XG5cbiAgPCEtLSBBZG1pbmlzdHJhdGlvbiBTZWN0aW9uIChBZG1pbiBPbmx5KSAtLT5cbiAgPGRpdiBjbGFzcz1cInNpZGViYXItc2VjdGlvblwiICpuZ0lmPVwiZ2V0TWVudUl0ZW1zQnlTZWN0aW9uKCdhZG1pbmlzdHJhdGlvbicpLmxlbmd0aCA+IDBcIj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIWNvbGxhcHNlZFwiPlxuICAgICAgPGRpdiBjbGFzcz1cInNlY3Rpb24tdGl0bGVcIj57eyBnZXRTZWN0aW9uVGl0bGUoJ2FkbWluaXN0cmF0aW9uJykgfX08L2Rpdj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8dWwgY2xhc3M9XCJzaWRlYmFyLW5hdlwiPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgaXRlbSBvZiBnZXRNZW51SXRlbXNCeVNlY3Rpb24oJ2FkbWluaXN0cmF0aW9uJylcIj5cbiAgICAgICAgPGxpIGNsYXNzPVwibmF2LWl0ZW1cIiBcbiAgICAgICAgICAgIFtjbGFzcy5hY3RpdmVdPVwiaXRlbS5yb3V0ZSAmJiBpc0FjdGl2ZShpdGVtLnJvdXRlKVwiIFxuICAgICAgICAgICAgKGNsaWNrKT1cIml0ZW0ucm91dGUgJiYgbmF2aWdhdGVUbyhpdGVtLnJvdXRlKVwiPlxuICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICA8YXBwLWljb24gW2ZvbnRTZXRdPVwiJ21hdGVyaWFsLWljb25zLW91dGxpbmVkJ1wiIFtmb250SWNvbl09XCJpdGVtLmljb25cIiBbc2l6ZV09XCJjb2xsYXBzZWQgPyBpY29uU2l6ZU9uQ29sbGFwc2VkIDogaWNvblNpemVPbkV4cGFuZGVkXCIgW2NsYXNzXT1cImNvbGxhcHNlZCA/ICdpY29uLWNvbGxhcHNlZCcgOiAnaWNvbidcIiBbY29sb3JdPVwiaXRlbS5yb3V0ZSAmJiBpc0FjdGl2ZShpdGVtLnJvdXRlKSA/ICd2YXIoLS1zZWNvbmRhcnktY29sb3IpJyA6ICcnXCI+PC9hcHAtaWNvbj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhY29sbGFwc2VkXCI+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibGFiZWxcIj57eyBpdGVtLmxhYmVsIH19PC9zcGFuPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvbGk+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8L3VsPlxuICA8L2Rpdj5cblxuICA8IS0tIFRvb2xzIFNlY3Rpb24gLS0+XG4gIDxkaXYgY2xhc3M9XCJzaWRlYmFyLWZvb3RlclwiPlxuICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhY29sbGFwc2VkXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwidG9vbHMtdGl0bGVcIj57eyBnZXRTZWN0aW9uVGl0bGUoJ3Rvb2xzJykgfX08L2Rpdj5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8dWwgY2xhc3M9XCJzaWRlYmFyLXRvb2xzXCI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0Zvcj1cImxldCBpdGVtIG9mIGdldE1lbnVJdGVtc0J5U2VjdGlvbigndG9vbHMnKVwiPlxuICAgICAgICA8bGkgY2xhc3M9XCJuYXYtaXRlbVwiIFxuICAgICAgICAgICAgW2NsYXNzLmFjdGl2ZV09XCJpdGVtLnJvdXRlICYmIGlzQWN0aXZlKGl0ZW0ucm91dGUpXCIgXG4gICAgICAgICAgICAoY2xpY2spPVwiaXRlbS5yb3V0ZSAmJiBuYXZpZ2F0ZVRvKGl0ZW0ucm91dGUpXCI+XG4gICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgIDxhcHAtaWNvbiBbZm9udFNldF09XCInbWF0ZXJpYWwtaWNvbnMtb3V0bGluZWQnXCIgW2ZvbnRJY29uXT1cIml0ZW0uaWNvblwiIFtzaXplXT1cImNvbGxhcHNlZCA/IGljb25TaXplT25Db2xsYXBzZWQgOiBpY29uU2l6ZU9uRXhwYW5kZWRcIiBbY2xhc3NdPVwiY29sbGFwc2VkID8gJ2ljb24tY29sbGFwc2VkJyA6ICdpY29uJ1wiIFtjb2xvcl09XCJpdGVtLnJvdXRlICYmIGlzQWN0aXZlKGl0ZW0ucm91dGUpID8gJ3ZhcigtLXNlY29uZGFyeS1jb2xvciknIDogJydcIj48L2FwcC1pY29uPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFjb2xsYXBzZWRcIj5cbiAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsYWJlbFwiPnt7IGl0ZW0ubGFiZWwgfX08L3NwYW4+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9saT5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgIDwvdWw+XG4gIDwvZGl2PlxuICA8L2Rpdj5cbjwvbmF2PlxuIl19