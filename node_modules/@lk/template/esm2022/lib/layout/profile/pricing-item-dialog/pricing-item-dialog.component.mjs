import { Component, Inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ReactiveFormsModule, Validators } from '@angular/forms';
import { MatDialogModule, MAT_DIALOG_DATA } from '@angular/material/dialog';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';
import { MatSelectModule } from '@angular/material/select';
import { MatCheckboxModule } from '@angular/material/checkbox';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { AppInputComponent, AppButtonComponent, AppSelectboxComponent } from '@lk/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
import * as i2 from "@angular/material/dialog";
import * as i3 from "@angular/common";
import * as i4 from "@angular/material/form-field";
import * as i5 from "@angular/material/select";
import * as i6 from "@angular/material/core";
import * as i7 from "@angular/material/checkbox";
import * as i8 from "@angular/material/button";
import * as i9 from "@angular/material/icon";
export class PricingItemDialogComponent {
    constructor(fb, dialogRef, data) {
        this.fb = fb;
        this.dialogRef = dialogRef;
        this.data = data;
        this.categories = ['Consultation', 'Follow-up', 'Emergency', 'Online', 'Dressing', 'Treatment', 'Other'];
        this.units = ['Flat', 'Per cm'];
        this.form = this.fb.group({
            name: [data?.name ?? '', [Validators.required, Validators.minLength(2)]],
            category: [data?.category ?? 'Consultation', Validators.required],
            unit: [data?.unit ?? 'Flat', Validators.required],
            price: [data?.price ?? 0, [Validators.required, Validators.min(0)]],
            followUpNeeded: [data?.followUpNeeded ?? false],
            followUps: this.fb.array([])
        });
        if (data?.followUps?.length) {
            data.followUps.forEach(r => this.addFollowUp(r));
        }
    }
    get followUpsArray() {
        return this.form.get('followUps');
    }
    addFollowUp(rule) {
        this.followUpsArray.push(this.fb.group({
            day: [rule?.day ?? 1, [Validators.required, Validators.min(1)]],
            price: [rule?.price ?? 0, [Validators.required, Validators.min(0)]]
        }));
    }
    removeFollowUp(index) {
        this.followUpsArray.removeAt(index);
    }
    onCancel() {
        this.dialogRef.close();
    }
    onSave() {
        if (this.form.invalid)
            return;
        this.dialogRef.close(this.form.value);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: PricingItemDialogComponent, deps: [{ token: i1.FormBuilder }, { token: i2.MatDialogRef }, { token: MAT_DIALOG_DATA }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.12", type: PricingItemDialogComponent, isStandalone: true, selector: "app-pricing-item-dialog", ngImport: i0, template: "<h2 mat-dialog-title>{{ data ? 'Edit Pricing Item' : 'Add Pricing Item' }}</h2>\n\n<div mat-dialog-content>\n  <form [formGroup]=\"form\" class=\"dialog-form\">\n    <div class=\"grid\">\n      <app-input label=\"Item Name\" placeholder=\"e.g., General Consultation\" formControlName=\"name\" class=\"form-field\"></app-input>\n\n      <mat-form-field appearance=\"outline\" class=\"form-field\">\n        <mat-label>Category</mat-label>\n        <mat-select formControlName=\"category\">\n          <mat-option *ngFor=\"let c of categories\" [value]=\"c\">{{ c }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n\n      <mat-form-field appearance=\"outline\" class=\"form-field\">\n        <mat-label>Unit</mat-label>\n        <mat-select formControlName=\"unit\">\n          <mat-option *ngFor=\"let u of units\" [value]=\"u\">{{ u }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n\n      <app-input label=\"Base Price\" placeholder=\"0\" type=\"number\" formControlName=\"price\" class=\"form-field\"></app-input>\n    </div>\n\n    <div class=\"section\">\n      <mat-checkbox formControlName=\"followUpNeeded\">Follow-ups needed</mat-checkbox>\n    </div>\n\n    <div class=\"section\" *ngIf=\"form.get('followUpNeeded')?.value\" formArrayName=\"followUps\">\n      <div class=\"section-header\">\n        <h4>Day-wise Follow-up Pricing</h4>\n        <button mat-stroked-button type=\"button\" (click)=\"addFollowUp()\">\n          <mat-icon>add</mat-icon>\n          Add Day\n        </button>\n      </div>\n      <div class=\"followups\">\n        <div class=\"followup-row\" *ngFor=\"let fg of followUpsArray.controls; let i = index\" [formGroupName]=\"i\">\n          <app-input label=\"Day\" type=\"number\" formControlName=\"day\" class=\"sm\"></app-input>\n          <app-input label=\"Price\" type=\"number\" formControlName=\"price\" class=\"md\"></app-input>\n          <button mat-icon-button color=\"warn\" type=\"button\" (click)=\"removeFollowUp(i)\">\n            <mat-icon>delete</mat-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div mat-dialog-actions align=\"end\">\n  <button mat-stroked-button (click)=\"onCancel()\">Cancel</button>\n  <button mat-flat-button color=\"primary\" (click)=\"onSave()\" [disabled]=\"form.invalid\">Save</button>\n</div>\n\n\n", styles: [".dialog-form .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.dialog-form .section{margin-top:16px}.dialog-form .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.dialog-form .followups{display:grid;gap:8px}.dialog-form .followup-row{display:grid;grid-template-columns:120px 1fr auto;gap:8px;align-items:center}.dialog-form .form-field.sm,.dialog-form .form-field.md{width:100%}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "ngmodule", type: ReactiveFormsModule }, { kind: "directive", type: i1.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { kind: "directive", type: i1.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { kind: "directive", type: i1.FormControlName, selector: "[formControlName]", inputs: ["formControlName", "disabled", "ngModel"], outputs: ["ngModelChange"] }, { kind: "directive", type: i1.FormGroupName, selector: "[formGroupName]", inputs: ["formGroupName"] }, { kind: "directive", type: i1.FormArrayName, selector: "[formArrayName]", inputs: ["formArrayName"] }, { kind: "ngmodule", type: MatDialogModule }, { kind: "directive", type: i2.MatDialogTitle, selector: "[mat-dialog-title], [matDialogTitle]", inputs: ["id"], exportAs: ["matDialogTitle"] }, { kind: "directive", type: i2.MatDialogActions, selector: "[mat-dialog-actions], mat-dialog-actions, [matDialogActions]", inputs: ["align"] }, { kind: "directive", type: i2.MatDialogContent, selector: "[mat-dialog-content], mat-dialog-content, [matDialogContent]" }, { kind: "ngmodule", type: MatFormFieldModule }, { kind: "component", type: i4.MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i4.MatLabel, selector: "mat-label" }, { kind: "ngmodule", type: MatInputModule }, { kind: "ngmodule", type: MatSelectModule }, { kind: "component", type: i5.MatSelect, selector: "mat-select", inputs: ["aria-describedby", "panelClass", "disabled", "disableRipple", "tabIndex", "hideSingleSelectionIndicator", "placeholder", "required", "multiple", "disableOptionCentering", "compareWith", "value", "aria-label", "aria-labelledby", "errorStateMatcher", "typeaheadDebounceInterval", "sortComparator", "id", "panelWidth"], outputs: ["openedChange", "opened", "closed", "selectionChange", "valueChange"], exportAs: ["matSelect"] }, { kind: "component", type: i6.MatOption, selector: "mat-option", inputs: ["value", "id", "disabled"], outputs: ["onSelectionChange"], exportAs: ["matOption"] }, { kind: "ngmodule", type: MatCheckboxModule }, { kind: "component", type: i7.MatCheckbox, selector: "mat-checkbox", inputs: ["aria-label", "aria-labelledby", "aria-describedby", "id", "required", "labelPosition", "name", "value", "disableRipple", "tabIndex", "color", "checked", "disabled", "indeterminate"], outputs: ["change", "indeterminateChange"], exportAs: ["matCheckbox"] }, { kind: "ngmodule", type: MatButtonModule }, { kind: "component", type: i8.MatButton, selector: "    button[mat-button], button[mat-raised-button], button[mat-flat-button],    button[mat-stroked-button]  ", exportAs: ["matButton"] }, { kind: "component", type: i8.MatIconButton, selector: "button[mat-icon-button]", exportAs: ["matButton"] }, { kind: "ngmodule", type: MatIconModule }, { kind: "component", type: i9.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "component", type: AppInputComponent, selector: "app-input", inputs: ["type", "placeholder", "value", "disabled", "required", "appearance", "label", "errorMessage", "multiline", "rows", "prefixIconName", "prefixIconSize", "suffixIconName", "suffixIconSize", "search", "searchUrl"], outputs: ["valueChange", "searchResults"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: PricingItemDialogComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-pricing-item-dialog', standalone: true, imports: [
                        CommonModule,
                        ReactiveFormsModule,
                        MatDialogModule,
                        MatFormFieldModule,
                        MatInputModule,
                        MatSelectModule,
                        MatCheckboxModule,
                        MatButtonModule,
                        MatIconModule,
                        AppInputComponent,
                        AppButtonComponent,
                        AppSelectboxComponent
                    ], template: "<h2 mat-dialog-title>{{ data ? 'Edit Pricing Item' : 'Add Pricing Item' }}</h2>\n\n<div mat-dialog-content>\n  <form [formGroup]=\"form\" class=\"dialog-form\">\n    <div class=\"grid\">\n      <app-input label=\"Item Name\" placeholder=\"e.g., General Consultation\" formControlName=\"name\" class=\"form-field\"></app-input>\n\n      <mat-form-field appearance=\"outline\" class=\"form-field\">\n        <mat-label>Category</mat-label>\n        <mat-select formControlName=\"category\">\n          <mat-option *ngFor=\"let c of categories\" [value]=\"c\">{{ c }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n\n      <mat-form-field appearance=\"outline\" class=\"form-field\">\n        <mat-label>Unit</mat-label>\n        <mat-select formControlName=\"unit\">\n          <mat-option *ngFor=\"let u of units\" [value]=\"u\">{{ u }}</mat-option>\n        </mat-select>\n      </mat-form-field>\n\n      <app-input label=\"Base Price\" placeholder=\"0\" type=\"number\" formControlName=\"price\" class=\"form-field\"></app-input>\n    </div>\n\n    <div class=\"section\">\n      <mat-checkbox formControlName=\"followUpNeeded\">Follow-ups needed</mat-checkbox>\n    </div>\n\n    <div class=\"section\" *ngIf=\"form.get('followUpNeeded')?.value\" formArrayName=\"followUps\">\n      <div class=\"section-header\">\n        <h4>Day-wise Follow-up Pricing</h4>\n        <button mat-stroked-button type=\"button\" (click)=\"addFollowUp()\">\n          <mat-icon>add</mat-icon>\n          Add Day\n        </button>\n      </div>\n      <div class=\"followups\">\n        <div class=\"followup-row\" *ngFor=\"let fg of followUpsArray.controls; let i = index\" [formGroupName]=\"i\">\n          <app-input label=\"Day\" type=\"number\" formControlName=\"day\" class=\"sm\"></app-input>\n          <app-input label=\"Price\" type=\"number\" formControlName=\"price\" class=\"md\"></app-input>\n          <button mat-icon-button color=\"warn\" type=\"button\" (click)=\"removeFollowUp(i)\">\n            <mat-icon>delete</mat-icon>\n          </button>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div mat-dialog-actions align=\"end\">\n  <button mat-stroked-button (click)=\"onCancel()\">Cancel</button>\n  <button mat-flat-button color=\"primary\" (click)=\"onSave()\" [disabled]=\"form.invalid\">Save</button>\n</div>\n\n\n", styles: [".dialog-form .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px}.dialog-form .section{margin-top:16px}.dialog-form .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}.dialog-form .followups{display:grid;gap:8px}.dialog-form .followup-row{display:grid;grid-template-columns:120px 1fr auto;gap:8px;align-items:center}.dialog-form .form-field.sm,.dialog-form .form-field.md{width:100%}\n"] }]
        }], ctorParameters: () => [{ type: i1.FormBuilder }, { type: i2.MatDialogRef }, { type: undefined, decorators: [{
                    type: Inject,
                    args: [MAT_DIALOG_DATA]
                }] }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicHJpY2luZy1pdGVtLWRpYWxvZy5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21tb24tbGlicy90ZW1wbGF0ZS9zcmMvbGliL2xheW91dC9wcm9maWxlL3ByaWNpbmctaXRlbS1kaWFsb2cvcHJpY2luZy1pdGVtLWRpYWxvZy5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21tb24tbGlicy90ZW1wbGF0ZS9zcmMvbGliL2xheW91dC9wcm9maWxlL3ByaWNpbmctaXRlbS1kaWFsb2cvcHJpY2luZy1pdGVtLWRpYWxvZy5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNsRCxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFxQyxtQkFBbUIsRUFBRSxVQUFVLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUNwRyxPQUFPLEVBQUUsZUFBZSxFQUFnQixlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUMxRixPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUNsRSxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDekQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzNELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQy9ELE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSwwQkFBMEIsQ0FBQztBQUMzRCxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGlCQUFpQixFQUFFLGtCQUFrQixFQUFFLHFCQUFxQixFQUFFLE1BQU0sVUFBVSxD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bUJBQW1CLDA0QkFDbkIsZUFBZSx5YkFDZixrQkFBa0IsMFNBQ2xCLGNBQWMsOEJBQ2QsZUFBZSxtckJBQ2YsaUJBQWlCLDZXQUNqQixlQUFlLHdVQUNmLGFBQWEsb0xBQ2IsaUJBQWlCOzs0RkFPUiwwQkFBMEI7a0JBcEJ0QyxTQUFTOytCQUNFLHlCQUF5QixjQUN2QixJQUFJLFdBQ1A7d0JBQ1AsWUFBWTt3QkFDWixtQkFBbUI7d0JBQ25CLGVBQWU7d0JBQ2Ysa0JBQWtCO3dCQUNsQixjQUFjO3dCQUNkLGVBQWU7d0JBQ2YsaUJBQWlCO3dCQUNqQixlQUFlO3dCQUNmLGFBQWE7d0JBQ2IsaUJBQWlCO3dCQUNqQixrQkFBa0I7d0JBQ2xCLHFCQUFxQjtxQkFDdEI7OzBCQVlFLE1BQU07MkJBQUMsZUFBZSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5qZWN0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgRm9ybUFycmF5LCBGb3JtQnVpbGRlciwgRm9ybUdyb3VwLCBSZWFjdGl2ZUZvcm1zTW9kdWxlLCBWYWxpZGF0b3JzIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTWF0RGlhbG9nTW9kdWxlLCBNYXREaWFsb2dSZWYsIE1BVF9ESUFMT0dfREFUQSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XG5pbXBvcnQgeyBNYXRGb3JtRmllbGRNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9mb3JtLWZpZWxkJztcbmltcG9ydCB7IE1hdElucHV0TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvaW5wdXQnO1xuaW1wb3J0IHsgTWF0U2VsZWN0TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvc2VsZWN0JztcbmltcG9ydCB7IE1hdENoZWNrYm94TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvY2hlY2tib3gnO1xuaW1wb3J0IHsgTWF0QnV0dG9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYnV0dG9uJztcbmltcG9ydCB7IE1hdEljb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9pY29uJztcbmltcG9ydCB7IEFwcElucHV0Q29tcG9uZW50LCBBcHBCdXR0b25Db21wb25lbnQsIEFwcFNlbGVjdGJveENvbXBvbmVudCB9IGZyb20gJ0Bsay9jb3JlJztcblxuZXhwb3J0IGludGVyZmFjZSBGb2xsb3dVcFJ1bGUge1xuICBkYXk6IG51bWJlcjtcbiAgcHJpY2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQcmljaW5nSXRlbURhdGEge1xuICBuYW1lOiBzdHJpbmc7XG4gIGNhdGVnb3J5OiAnQ29uc3VsdGF0aW9uJyB8ICdGb2xsb3ctdXAnIHwgJ0VtZXJnZW5jeScgfCAnT25saW5lJyB8ICdEcmVzc2luZycgfCAnVHJlYXRtZW50JyB8ICdPdGhlcic7XG4gIHVuaXQ6ICdGbGF0JyB8ICdQZXIgY20nO1xuICBwcmljZTogbnVtYmVyO1xuICBmb2xsb3dVcE5lZWRlZDogYm9vbGVhbjtcbiAgZm9sbG93VXBzOiBGb2xsb3dVcFJ1bGVbXTtcbn1cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYXBwLXByaWNpbmctaXRlbS1kaWFsb2cnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbXG4gICAgQ29tbW9uTW9kdWxlLFxuICAgIFJlYWN0aXZlRm9ybXNNb2R1bGUsXG4gICAgTWF0RGlhbG9nTW9kdWxlLFxuICAgIE1hdEZvcm1GaWVsZE1vZHVsZSxcbiAgICBNYXRJbnB1dE1vZHVsZSxcbiAgICBNYXRTZWxlY3RNb2R1bGUsXG4gICAgTWF0Q2hlY2tib3hNb2R1bGUsXG4gICAgTWF0QnV0dG9uTW9kdWxlLFxuICAgIE1hdEljb25Nb2R1bGUsXG4gICAgQXBwSW5wdXRDb21wb25lbnQsXG4gICAgQXBwQnV0dG9uQ29tcG9uZW50LFxuICAgIEFwcFNlbGVjdGJveENvbXBvbmVudFxuICBdLFxuICB0ZW1wbGF0ZVVybDogJy4vcHJpY2luZy1pdGVtLWRpYWxvZy5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL3ByaWNpbmctaXRlbS1kaWFsb2cuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBQcmljaW5nSXRlbURpYWxvZ0NvbXBvbmVudCB7XG4gIGZvcm06IEZvcm1Hcm91cDtcbiAgcmVhZG9ubHkgY2F0ZWdvcmllcyA9IFsnQ29uc3VsdGF0aW9uJywgJ0ZvbGxvdy11cCcsICdFbWVyZ2VuY3knLCAnT25saW5lJywgJ0RyZXNzaW5nJywgJ1RyZWF0bWVudCcsICdPdGhlciddO1xuICByZWFkb25seSB1bml0cyA9IFsnRmxhdCcsICdQZXIgY20nXTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlYWRvbmx5IGZiOiBGb3JtQnVpbGRlcixcbiAgICBwcml2YXRlIHJlYWRvbmx5IGRpYWxvZ1JlZjogTWF0RGlhbG9nUmVmPFByaWNpbmdJdGVtRGlhbG9nQ29tcG9uZW50PixcbiAgICBASW5qZWN0KE1BVF9ESUFMT0dfREFUQSkgcHVibGljIGRhdGE/OiBQYXJ0aWFsPFByaWNpbmdJdGVtRGF0YT5cbiAgKSB7XG4gICAgdGhpcy5mb3JtID0gdGhpcy5mYi5ncm91cCh7XG4gICAgICBuYW1lOiBbZGF0YT8ubmFtZSA/PyAnJywgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMubWluTGVuZ3RoKDIpXV0sXG4gICAgICBjYXRlZ29yeTogW2RhdGE/LmNhdGVnb3J5ID8/ICdDb25zdWx0YXRpb24nLCBWYWxpZGF0b3JzLnJlcXVpcmVkXSxcbiAgICAgIHVuaXQ6IFtkYXRhPy51bml0ID8/ICdGbGF0JywgVmFsaWRhdG9ycy5yZXF1aXJlZF0sXG4gICAgICBwcmljZTogW2RhdGE/LnByaWNlID8/IDAsIFtWYWxpZGF0b3JzLnJlcXVpcmVkLCBWYWxpZGF0b3JzLm1pbigwKV1dLFxuICAgICAgZm9sbG93VXBOZWVkZWQ6IFtkYXRhPy5mb2xsb3dVcE5lZWRlZCA/PyBmYWxzZV0sXG4gICAgICBmb2xsb3dVcHM6IHRoaXMuZmIuYXJyYXkoW10pXG4gICAgfSk7XG5cbiAgICBpZiAoZGF0YT8uZm9sbG93VXBzPy5sZW5ndGgpIHtcbiAgICAgIGRhdGEuZm9sbG93VXBzLmZvckVhY2gociA9PiB0aGlzLmFkZEZvbGxvd1VwKHIpKTtcbiAgICB9XG4gIH1cblxuICBnZXQgZm9sbG93VXBzQXJyYXkoKTogRm9ybUFycmF5IHtcbiAgICByZXR1cm4gdGhpcy5mb3JtLmdldCgnZm9sbG93VXBzJykgYXMgRm9ybUFycmF5O1xuICB9XG5cbiAgYWRkRm9sbG93VXAocnVsZT86IEZvbGxvd1VwUnVsZSkge1xuICAgIHRoaXMuZm9sbG93VXBzQXJyYXkucHVzaCh0aGlzLmZiLmdyb3VwKHtcbiAgICAgIGRheTogW3J1bGU/LmRheSA/PyAxLCBbVmFsaWRhdG9ycy5yZXF1aXJlZCwgVmFsaWRhdG9ycy5taW4oMSldXSxcbiAgICAgIHByaWNlOiBbcnVsZT8ucHJpY2UgPz8gMCwgW1ZhbGlkYXRvcnMucmVxdWlyZWQsIFZhbGlkYXRvcnMubWluKDApXV1cbiAgICB9KSk7XG4gIH1cblxuICByZW1vdmVGb2xsb3dVcChpbmRleDogbnVtYmVyKSB7XG4gICAgdGhpcy5mb2xsb3dVcHNBcnJheS5yZW1vdmVBdChpbmRleCk7XG4gIH1cblxuICBvbkNhbmNlbCgpIHtcbiAgICB0aGlzLmRpYWxvZ1JlZi5jbG9zZSgpO1xuICB9XG5cbiAgb25TYXZlKCkge1xuICAgIGlmICh0aGlzLmZvcm0uaW52YWxpZCkgcmV0dXJuO1xuICAgIHRoaXMuZGlhbG9nUmVmLmNsb3NlKHRoaXMuZm9ybS52YWx1ZSBhcyBQcmljaW5nSXRlbURhdGEpO1xuICB9XG59XG5cblxuIiwiPGgyIG1hdC1kaWFsb2ctdGl0bGU+e3sgZGF0YSA/ICdFZGl0IFByaWNpbmcgSXRlbScgOiAnQWRkIFByaWNpbmcgSXRlbScgfX08L2gyPlxuXG48ZGl2IG1hdC1kaWFsb2ctY29udGVudD5cbiAgPGZvcm0gW2Zvcm1Hcm91cF09XCJmb3JtXCIgY2xhc3M9XCJkaWFsb2ctZm9ybVwiPlxuICAgIDxkaXYgY2xhc3M9XCJncmlkXCI+XG4gICAgICA8YXBwLWlucHV0IGxhYmVsPVwiSXRlbSBOYW1lXCIgcGxhY2Vob2xkZXI9XCJlLmcuLCBHZW5lcmFsIENvbnN1bHRhdGlvblwiIGZvcm1Db250cm9sTmFtZT1cIm5hbWVcIiBjbGFzcz1cImZvcm0tZmllbGRcIj48L2FwcC1pbnB1dD5cblxuICAgICAgPG1hdC1mb3JtLWZpZWxkIGFwcGVhcmFuY2U9XCJvdXRsaW5lXCIgY2xhc3M9XCJmb3JtLWZpZWxkXCI+XG4gICAgICAgIDxtYXQtbGFiZWw+Q2F0ZWdvcnk8L21hdC1sYWJlbD5cbiAgICAgICAgPG1hdC1zZWxlY3QgZm9ybUNvbnRyb2xOYW1lPVwiY2F0ZWdvcnlcIj5cbiAgICAgICAgICA8bWF0LW9wdGlvbiAqbmdGb3I9XCJsZXQgYyBvZiBjYXRlZ29yaWVzXCIgW3ZhbHVlXT1cImNcIj57eyBjIH19PC9tYXQtb3B0aW9uPlxuICAgICAgICA8L21hdC1zZWxlY3Q+XG4gICAgICA8L21hdC1mb3JtLWZpZWxkPlxuXG4gICAgICA8bWF0LWZvcm0tZmllbGQgYXBwZWFyYW5jZT1cIm91dGxpbmVcIiBjbGFzcz1cImZvcm0tZmllbGRcIj5cbiAgICAgICAgPG1hdC1sYWJlbD5Vbml0PC9tYXQtbGFiZWw+XG4gICAgICAgIDxtYXQtc2VsZWN0IGZvcm1Db250cm9sTmFtZT1cInVuaXRcIj5cbiAgICAgICAgICA8bWF0LW9wdGlvbiAqbmdGb3I9XCJsZXQgdSBvZiB1bml0c1wiIFt2YWx1ZV09XCJ1XCI+e3sgdSB9fTwvbWF0LW9wdGlvbj5cbiAgICAgICAgPC9tYXQtc2VsZWN0PlxuICAgICAgPC9tYXQtZm9ybS1maWVsZD5cblxuICAgICAgPGFwcC1pbnB1dCBsYWJlbD1cIkJhc2UgUHJpY2VcIiBwbGFjZWhvbGRlcj1cIjBcIiB0eXBlPVwibnVtYmVyXCIgZm9ybUNvbnRyb2xOYW1lPVwicHJpY2VcIiBjbGFzcz1cImZvcm0tZmllbGRcIj48L2FwcC1pbnB1dD5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCI+XG4gICAgICA8bWF0LWNoZWNrYm94IGZvcm1Db250cm9sTmFtZT1cImZvbGxvd1VwTmVlZGVkXCI+Rm9sbG93LXVwcyBuZWVkZWQ8L21hdC1jaGVja2JveD5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJzZWN0aW9uXCIgKm5nSWY9XCJmb3JtLmdldCgnZm9sbG93VXBOZWVkZWQnKT8udmFsdWVcIiBmb3JtQXJyYXlOYW1lPVwiZm9sbG93VXBzXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwic2VjdGlvbi1oZWFkZXJcIj5cbiAgICAgICAgPGg0PkRheS13aXNlIEZvbGxvdy11cCBQcmljaW5nPC9oND5cbiAgICAgICAgPGJ1dHRvbiBtYXQtc3Ryb2tlZC1idXR0b24gdHlwZT1cImJ1dHRvblwiIChjbGljayk9XCJhZGRGb2xsb3dVcCgpXCI+XG4gICAgICAgICAgPG1hdC1pY29uPmFkZDwvbWF0LWljb24+XG4gICAgICAgICAgQWRkIERheVxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cImZvbGxvd3Vwc1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZm9sbG93dXAtcm93XCIgKm5nRm9yPVwibGV0IGZnIG9mIGZvbGxvd1Vwc0FycmF5LmNvbnRyb2xzOyBsZXQgaSA9IGluZGV4XCIgW2Zvcm1Hcm91cE5hbWVdPVwiaVwiPlxuICAgICAgICAgIDxhcHAtaW5wdXQgbGFiZWw9XCJEYXlcIiB0eXBlPVwibnVtYmVyXCIgZm9ybUNvbnRyb2xOYW1lPVwiZGF5XCIgY2xhc3M9XCJzbVwiPjwvYXBwLWlucHV0PlxuICAgICAgICAgIDxhcHAtaW5wdXQgbGFiZWw9XCJQcmljZVwiIHR5cGU9XCJudW1iZXJcIiBmb3JtQ29udHJvbE5hbWU9XCJwcmljZVwiIGNsYXNzPVwibWRcIj48L2FwcC1pbnB1dD5cbiAgICAgICAgICA8YnV0dG9uIG1hdC1pY29uLWJ1dHRvbiBjb2xvcj1cIndhcm5cIiB0eXBlPVwiYnV0dG9uXCIgKGNsaWNrKT1cInJlbW92ZUZvbGxvd1VwKGkpXCI+XG4gICAgICAgICAgICA8bWF0LWljb24+ZGVsZXRlPC9tYXQtaWNvbj5cbiAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgPC9mb3JtPlxuPC9kaXY+XG5cbjxkaXYgbWF0LWRpYWxvZy1hY3Rpb25zIGFsaWduPVwiZW5kXCI+XG4gIDxidXR0b24gbWF0LXN0cm9rZWQtYnV0dG9uIChjbGljayk9XCJvbkNhbmNlbCgpXCI+Q2FuY2VsPC9idXR0b24+XG4gIDxidXR0b24gbWF0LWZsYXQtYnV0dG9uIGNvbG9yPVwicHJpbWFyeVwiIChjbGljayk9XCJvblNhdmUoKVwiIFtkaXNhYmxlZF09XCJmb3JtLmludmFsaWRcIj5TYXZlPC9idXR0b24+XG48L2Rpdj5cblxuXG4iXX0=