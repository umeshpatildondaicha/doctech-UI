import { Component, Input, Output, EventEmitter, ChangeDetectionStrategy } from '@angular/core';
import { CommonModule } from '@angular/common';
import { CalendarModule } from 'angular-calendar';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { AppButtonComponent } from '../app-button/app-button.component';
import { format } from 'date-fns';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
export class CalendarComponent {
    constructor() {
        this.events = [];
        this.selectedDate = new Date();
        this.view = 'month';
        this.viewDate = new Date();
        this.showNavigation = true;
        this.showToday = true;
        this.allowDateSelection = true;
        this.highlightToday = true;
        this.showEventIndicators = true;
        this.locale = 'en';
        this.dateSelected = new EventEmitter();
        this.eventClicked = new EventEmitter();
        this.monthChanged = new EventEmitter();
        this.viewChanged = new EventEmitter();
        this.calendarEvents = [];
        this.calendar = [];
        this.weekDays = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];
        this.currentMonth = new Date().getMonth();
        this.currentYear = new Date().getFullYear();
    }
    ngOnInit() {
        this.convertEvents();
        this.generateCalendar();
    }
    ngOnChanges() {
        this.convertEvents();
        this.generateCalendar();
    }
    generateCalendar() {
        this.calendar = [];
        const firstDay = new Date(this.currentYear, this.currentMonth, 1);
        const lastDay = new Date(this.currentYear, this.currentMonth + 1, 0);
        const startDate = new Date(firstDay);
        // Adjust to start from Sunday
        const dayOfWeek = firstDay.getDay();
        startDate.setDate(startDate.getDate() - dayOfWeek);
        const weeks = Math.ceil((lastDay.getDate() + dayOfWeek) / 7);
        for (let week = 0; week < weeks; week++) {
            const weekDates = [];
            for (let day = 0; day < 7; day++) {
                const date = new Date(startDate);
                date.setDate(startDate.getDate() + (week * 7) + day);
                weekDates.push(date);
            }
            this.calendar.push(weekDates);
        }
    }
    convertEvents() {
        this.calendarEvents = this.events.map(event => ({
            id: event.id,
            title: event.title,
            start: new Date(event.start),
            end: event.end ? new Date(event.end) : new Date(event.start),
            description: event.description,
            color: event.color || this.getDefaultColor(event.type),
            allDay: event.allDay || false,
            meta: {
                type: event.type,
                originalEvent: event
            }
        }));
    }
    getDefaultColor(type) {
        switch (type) {
            case 'appointment':
                return { primary: '#f44336', secondary: '#ffebee' }; // Red for filled slots
            case 'available':
                return { primary: '#4caf50', secondary: '#e8f5e8' }; // Green for available slots
            case 'break':
                return { primary: '#ff9800', secondary: '#fff3e0' };
            case 'leave':
                return { primary: '#f44336', secondary: '#ffebee' };
            default:
                return { primary: '#757575', secondary: '#f5f5f5' };
        }
    }
    onDateSelected(event) {
        this.selectedDate = event.date;
        this.dateSelected.emit(event.date);
    }
    onEventClicked(event) {
        this.eventClicked.emit(event.event.meta.originalEvent);
    }
    onViewChange(view) {
        this.view = view;
        this.viewChanged.emit(view);
    }
    onViewDateChange(date) {
        this.viewDate = date;
        this.currentMonth = date.getMonth();
        this.currentYear = date.getFullYear();
        this.generateCalendar();
        this.monthChanged.emit({
            year: date.getFullYear(),
            month: date.getMonth()
        });
    }
    onTodayClick() {
        this.viewDate = new Date();
        this.selectedDate = new Date();
        this.currentMonth = new Date().getMonth();
        this.currentYear = new Date().getFullYear();
        this.generateCalendar();
    }
    previousMonth() {
        const newDate = new Date(this.currentYear, this.currentMonth - 1, 1);
        this.onViewDateChange(newDate);
    }
    nextMonth() {
        const newDate = new Date(this.currentYear, this.currentMonth + 1, 1);
        this.onViewDateChange(newDate);
    }
    isToday(date) {
        const today = new Date();
        return date.getDate() === today.getDate() &&
            date.getMonth() === today.getMonth() &&
            date.getFullYear() === today.getFullYear();
    }
    isSelected(date) {
        return date.getDate() === this.selectedDate.getDate() &&
            date.getMonth() === this.selectedDate.getMonth() &&
            date.getFullYear() === this.selectedDate.getFullYear();
    }
    isCurrentMonth(date) {
        return date.getMonth() === this.currentMonth;
    }
    getEventsForDate(date) {
        return this.events.filter(event => {
            const eventDate = new Date(event.start);
            return eventDate.getDate() === date.getDate() &&
                eventDate.getMonth() === date.getMonth() &&
                eventDate.getFullYear() === date.getFullYear();
        });
    }
    getEventColor(event) {
        if (event.color)
            return event.color;
        switch (event.type) {
            case 'appointment':
                return { primary: '#f44336', secondary: '#ffebee' }; // Red for filled slots
            case 'available':
                return { primary: '#4caf50', secondary: '#e8f5e8' }; // Green for available slots
            case 'break':
                return { primary: '#ff9800', secondary: '#fff3e0' };
            case 'leave':
                return { primary: '#f44336', secondary: '#ffebee' };
            default:
                return { primary: '#757575', secondary: '#f5f5f5' };
        }
    }
    formatSelectedDate() {
        const options = {
            weekday: 'short',
            month: 'short',
            day: 'numeric',
            year: 'numeric'
        };
        return this.selectedDate.toLocaleDateString('en-US', options);
    }
    formatEventTime(event) {
        if (event.allDay)
            return 'All-day';
        const startTime = new Date(event.start);
        const endTime = event.end ? new Date(event.end) : startTime;
        const startStr = startTime.toLocaleTimeString('en-US', {
            hour: 'numeric',
            minute: '2-digit',
            hour12: true
        });
        if (event.end) {
            const endStr = endTime.toLocaleTimeString('en-US', {
                hour: 'numeric',
                minute: '2-digit',
                hour12: true
            });
            return `${startStr} - ${endStr}`;
        }
        return startStr;
    }
    getMonthYearString() {
        return format(this.viewDate, 'MMMM yyyy');
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: CalendarComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.12", type: CalendarComponent, isStandalone: true, selector: "app-calendar", inputs: { events: "events", selectedDate: "selectedDate", view: "view", viewDate: "viewDate", showNavigation: "showNavigation", showToday: "showToday", allowDateSelection: "allowDateSelection", highlightToday: "highlightToday", showEventIndicators: "showEventIndicators", locale: "locale" }, outputs: { dateSelected: "dateSelected", eventClicked: "eventClicked", monthChanged: "monthChanged", viewChanged: "viewChanged" }, usesOnChanges: true, ngImport: i0, template: "<div class=\"calendar-container\">\n  <!-- Calendar Header -->\n  <div class=\"calendar-header\">\n    <div class=\"header-content\">\n      <div class=\"month-year\">\n        <h2 class=\"month-year-text\">{{ getMonthYearString() }}</h2>\n      </div>\n      \n      <div class=\"navigation-controls\">\n        <app-button\n          type=\"button\"\n          appearance=\"icon\"\n          (btnClick)=\"previousMonth()\"\n          class=\"nav-btn\"\n          [text]=\"''\"\n          [fontIcon]=\"'chevron_left'\">\n        </app-button>\n        \n        <app-button\n          type=\"button\"\n          appearance=\"basic\"\n          (btnClick)=\"onTodayClick()\"\n          class=\"today-btn\"\n          [text]=\"'Today'\">\n        </app-button>\n        \n        <app-button\n          type=\"button\"\n          appearance=\"icon\"\n          (btnClick)=\"nextMonth()\"\n          class=\"nav-btn\"\n          [text]=\"''\"\n          [fontIcon]=\"'chevron_right'\">\n        </app-button>\n      </div>\n    </div>\n  </div>\n\n  <!-- Calendar Legend -->\n  <div class=\"calendar-legend\" *ngIf=\"showEventIndicators\">\n    <div class=\"legend-item\">\n      <div class=\"legend-dot available\"></div>\n      <span class=\"legend-text\">Available</span>\n    </div>\n    <div class=\"legend-item\">\n      <div class=\"legend-dot appointment\"></div>\n      <span class=\"legend-text\">Booked</span>\n    </div>\n  </div>\n\n  <!-- Calendar and Events Container -->\n  <div class=\"calendar-events-container\">\n    <!-- Calendar Grid -->\n    <div class=\"calendar-grid\">\n      <!-- Week Days Header -->\n      <div class=\"week-header\">\n        <div class=\"week-day\" *ngFor=\"let day of weekDays\">{{ day }}</div>\n      </div>\n\n      <!-- Calendar Days -->\n      <div class=\"calendar-body\">\n        <div class=\"calendar-week\" *ngFor=\"let week of calendar\">\n          <div \n            class=\"calendar-day\"\n            *ngFor=\"let date of week\"\n            [class.today]=\"isToday(date)\"\n            [class.selected]=\"isSelected(date)\"\n            [class.other-month]=\"!isCurrentMonth(date)\"\n            [class.clickable]=\"allowDateSelection\"\n            (click)=\"allowDateSelection ? onDateSelected({date: date}) : null\">\n            \n            <div class=\"day-number\">{{ date.getDate() }}</div>\n            \n            <!-- Event Indicators -->\n            <div \n              class=\"event-indicators\" \n              *ngIf=\"showEventIndicators && getEventsForDate(date).length > 0\">\n              <div \n                class=\"event-dot\"\n                *ngFor=\"let event of getEventsForDate(date).slice(0, 3)\"\n                [class]=\"'event-dot ' + (event.type || 'other')\"\n                [style.background-color]=\"getEventColor(event).primary\">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Events Panel (Right Side) -->\n    <div class=\"events-panel\" *ngIf=\"getEventsForDate(selectedDate).length > 0\">\n      <div class=\"date-header\">\n        <h3 class=\"date-title\">{{ formatSelectedDate() }}</h3>\n      </div>\n      \n\n      <div class=\"events-panel-wrapper\">\n        <div class=\"event-item\" \n        *ngFor=\"let event of getEventsForDate(selectedDate)\"\n        (click)=\"onEventClicked({event: {meta: {originalEvent: event}}})\"\n        [style.border-left-color]=\"getEventColor(event).primary\">\n     <div class=\"event-content\">\n       <div class=\"event-title\">{{ event.title }}</div>\n       <div class=\"event-description\" *ngIf=\"event.description\">{{ event.description }}</div>\n       <div class=\"event-time\">\n         <span *ngIf=\"event.allDay\">All-day</span>\n         <span *ngIf=\"!event.allDay\">{{ formatEventTime(event) }}</span>\n       </div>\n     </div>\n   </div>\n      </div>\n    </div>\n\n    <!-- No Events Message (Right Side) -->\n    <div class=\"no-events-panel\" *ngIf=\"getEventsForDate(selectedDate).length === 0\">\n      <p>No events for {{ formatSelectedDate() }}</p>\n    </div>\n  </div>\n\n  <!-- Events List (Bottom - Mobile/Compact) -->\n  <div class=\"events-list-bottom\" *ngIf=\"getEventsForDate(selectedDate).length > 0\">\n    <div class=\"date-header\">\n      <h3 class=\"date-title\">{{ formatSelectedDate() }}</h3>\n    </div>\n    \n    <div class=\"event-item\" \n         *ngFor=\"let event of getEventsForDate(selectedDate)\"\n         (click)=\"onEventClicked({event: {meta: {originalEvent: event}}})\"\n         [style.border-left-color]=\"getEventColor(event).primary\">\n      <div class=\"event-content\">\n        <div class=\"event-title\">{{ event.title }}</div>\n        <div class=\"event-description\" *ngIf=\"event.description\">{{ event.description }}</div>\n        <div class=\"event-time\">\n          <span *ngIf=\"event.allDay\">All-day</span>\n          <span *ngIf=\"!event.allDay\">{{ formatEventTime(event) }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- No Events Message (Bottom) -->\n  <div class=\"no-events-bottom\" *ngIf=\"getEventsForDate(selectedDate).length === 0\">\n    <p>No events for {{ formatSelectedDate() }}</p>\n  </div>\n</div> ", styles: [".calendar-container{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;max-width:100%;height:100%}.calendar-header{background:#fff;border-bottom:1px solid #e0e0e0;padding:16px 20px;height:4.5em}.calendar-header .header-content{display:flex;justify-content:space-between;align-items:center}.calendar-header .header-content .month-year .month-year-text{margin:0;font-size:18px;font-weight:600;color:#007aff}.calendar-header .header-content .navigation-controls{min-width:10em;display:flex;align-items:center;gap:8px}.calendar-header .header-content .navigation-controls .nav-btn{min-width:3em;width:32px;height:32px;padding:0;color:#007aff}.calendar-header .header-content .navigation-controls .nav-btn ::ng-deep .mat-mdc-button-touch-target{width:32px;height:32px}.calendar-header .header-content .navigation-controls .today-btn{color:#007aff;font-weight:500;min-width:60px;font-size:14px}.calendar-legend{display:flex;justify-content:center;gap:20px;padding:8px 20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;height:2em}.calendar-legend .legend-item{display:flex;align-items:center;gap:6px}.calendar-legend .legend-item .legend-dot{width:8px;height:8px;border-radius:50%}.calendar-legend .legend-item .legend-dot.available{background:#4caf50}.calendar-legend .legend-item .legend-dot.appointment{background:#f44336}.calendar-legend .legend-item .legend-text{font-size:12px;color:#666;font-weight:500}.calendar-events-container{display:flex;height:calc(100% - 6.6em)}.calendar-grid{flex:1;padding:0 20px 16px;min-width:60%}.calendar-grid .week-header{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:8px}.calendar-grid .week-header .week-day{text-align:center;font-size:12px;font-weight:500;color:#8e8e93;padding:8px 0}.calendar-grid .calendar-body .calendar-week{display:grid;grid-template-columns:repeat(7,1fr);border-bottom:1px solid #F2F2F7}.calendar-grid .calendar-body .calendar-week:last-child{border-bottom:none}.calendar-grid .calendar-body .calendar-week .calendar-day{min-height:40px;padding:4px;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:background-color .2s ease}.calendar-grid .calendar-body .calendar-week .calendar-day:hover{background:#f2f2f7}.calendar-grid .calendar-body .calendar-week .calendar-day.today .day-number,.calendar-grid .calendar-body .calendar-week .calendar-day.selected .day-number{background:#007aff;color:#fff;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}.calendar-grid .calendar-body .calendar-week .calendar-day.other-month .day-number{color:#c7c7cc}.calendar-grid .calendar-body .calendar-week .calendar-day .day-number{font-size:16px;font-weight:400;color:#000;margin-bottom:4px;width:28px;height:28px;display:flex;align-items:center;justify-content:center}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators{display:flex;gap:2px;margin-top:2px;flex-wrap:wrap;justify-content:center}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot{width:6px;height:6px;border-radius:50%;background:#8e8e93;transition:transform .2s ease}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot:hover{transform:scale(1.2)}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot.appointment{background:#f44336}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot.available{background:#4caf50}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot.break{background:#ff9800}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot.leave{background:#f44336}.events-panel{width:35%;border-left:1px solid #F2F2F7;background:#fff;display:flex;flex-direction:column;height:100%}.events-panel-wrapper{height:calc(100% - 3.5em);overflow-y:scroll}.events-panel .date-header{padding:.6em 1em .4em;border-bottom:1px solid #F2F2F7;height:2.5em}.events-panel .date-header .date-title{margin:0;font-size:16px;font-weight:600;color:#000}.events-panel .event-item{padding:12px 20px;border-bottom:1px solid #F2F2F7;border-left:4px solid;cursor:pointer;transition:background-color .2s ease}.events-panel .event-item:hover{background:#f2f2f7}.events-panel .event-item:last-child{border-bottom:none}.events-panel .event-item .event-content .event-title{font-size:16px;font-weight:500;color:#000;margin-bottom:4px}.events-panel .event-item .event-content .event-description{font-size:14px;color:#8e8e93;margin-bottom:4px}.events-panel .event-item .event-content .event-time{font-size:14px;color:#8e8e93}.no-events-panel{width:40%;border-left:1px solid #F2F2F7;padding:20px;text-align:center;background:#fff;display:flex;align-items:center;justify-content:center}.no-events-panel p{margin:0;font-size:16px;color:#8e8e93}.events-list-bottom{display:none;border-top:1px solid #F2F2F7;background:#fff}.events-list-bottom .date-header{padding:16px 20px 8px;border-bottom:1px solid #F2F2F7}.events-list-bottom .date-header .date-title{margin:0;font-size:16px;font-weight:600;color:#000}.events-list-bottom .event-item{padding:12px 20px;border-bottom:1px solid #F2F2F7;border-left:4px solid;cursor:pointer;transition:background-color .2s ease}.events-list-bottom .event-item:hover{background:#f2f2f7}.events-list-bottom .event-item:last-child{border-bottom:none}.events-list-bottom .event-item .event-content .event-title{font-size:16px;font-weight:500;color:#000;margin-bottom:4px}.events-list-bottom .event-item .event-content .event-description{font-size:14px;color:#8e8e93;margin-bottom:4px}.events-list-bottom .event-item .event-content .event-time{font-size:14px;color:#8e8e93}.no-events-bottom{display:none;border-top:1px solid #F2F2F7;padding:20px;text-align:center;background:#fff}.no-events-bottom p{margin:0;font-size:16px;color:#8e8e93}@media (max-width: 768px){.calendar-container{border-radius:0;box-shadow:none;max-width:100%;height:100%}.calendar-events-container{flex-direction:column;height:100%}.calendar-grid{padding:0 16px 12px;min-width:auto}.calendar-grid .calendar-body .calendar-week .calendar-day{min-height:35px}.calendar-grid .calendar-body .calendar-week .calendar-day .day-number{font-size:14px;width:24px;height:24px}.calendar-grid .calendar-body .calendar-week .calendar-day.today .day-number,.calendar-grid .calendar-body .calendar-week .calendar-day.selected .day-number{width:24px;height:24px;font-size:12px}.events-panel,.no-events-panel{display:none}.events-list-bottom{display:block}.events-list-bottom .date-header{padding:12px 16px 6px}.events-list-bottom .event-item{padding:10px 16px}.no-events-bottom{display:block;padding:16px}}@media (min-width: 769px) and (max-width: 1024px){.calendar-events-container{flex-direction:column;height:100%}.calendar-grid{min-width:auto}.events-panel,.no-events-panel{display:none}.events-list-bottom,.no-events-bottom{display:block}}@media (min-width: 1025px){.events-list-bottom,.no-events-bottom{display:none}}@media (prefers-color-scheme: dark){.calendar-container{background:#1c1c1e;color:#fff}.calendar-header{background:#1c1c1e;border-bottom-color:#38383a}.calendar-header .header-content .month-year-text{color:#0a84ff}.calendar-legend{background:#2c2c2e;border-bottom-color:#38383a}.calendar-legend .legend-item .legend-text,.calendar-grid .week-header .week-day{color:#8e8e93}.calendar-grid .calendar-body .calendar-week{border-bottom-color:#38383a}.calendar-grid .calendar-body .calendar-week .calendar-day:hover{background:#2c2c2e}.calendar-grid .calendar-body .calendar-week .calendar-day.today .day-number,.calendar-grid .calendar-body .calendar-week .calendar-day.selected .day-number{background:#0a84ff}.calendar-grid .calendar-body .calendar-week .calendar-day.other-month .day-number{color:#48484a}.calendar-grid .calendar-body .calendar-week .calendar-day .day-number{color:#fff}.events-panel{background:#1c1c1e;border-left-color:#38383a}.events-panel .date-header{border-bottom-color:#38383a}.events-panel .date-header .date-title{color:#fff}.events-panel .event-item{border-bottom-color:#38383a}.events-panel .event-item:hover{background:#2c2c2e}.events-panel .event-item .event-content .event-title{color:#fff}.events-panel .event-item .event-content .event-description,.events-panel .event-item .event-content .event-time{color:#8e8e93}.no-events-panel{background:#1c1c1e;border-left-color:#38383a}.no-events-panel p{color:#8e8e93}.events-list-bottom{background:#1c1c1e;border-top-color:#38383a}.events-list-bottom .date-header{border-bottom-color:#38383a}.events-list-bottom .date-header .date-title{color:#fff}.events-list-bottom .event-item{border-bottom-color:#38383a}.events-list-bottom .event-item:hover{background:#2c2c2e}.events-list-bottom .event-item .event-content .event-title{color:#fff}.events-list-bottom .event-item .event-content .event-description,.events-list-bottom .event-item .event-content .event-time{color:#8e8e93}.no-events-bottom{background:#1c1c1e;border-top-color:#38383a}.no-events-bottom p{color:#8e8e93}}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "ngmodule", type: CalendarModule }, { kind: "ngmodule", type: MatButtonModule }, { kind: "ngmodule", type: MatIconModule }, { kind: "component", type: AppButtonComponent, selector: "app-button", inputs: ["color", "type", "disabled", "appearance", "class", "text", "fontIcon"], outputs: ["btnClick"] }], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: CalendarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-calendar', standalone: true, imports: [
                        CommonModule,
                        CalendarModule,
                        MatButtonModule,
                        MatIconModule,
                        AppButtonComponent
                    ], changeDetection: ChangeDetectionStrategy.OnPush, template: "<div class=\"calendar-container\">\n  <!-- Calendar Header -->\n  <div class=\"calendar-header\">\n    <div class=\"header-content\">\n      <div class=\"month-year\">\n        <h2 class=\"month-year-text\">{{ getMonthYearString() }}</h2>\n      </div>\n      \n      <div class=\"navigation-controls\">\n        <app-button\n          type=\"button\"\n          appearance=\"icon\"\n          (btnClick)=\"previousMonth()\"\n          class=\"nav-btn\"\n          [text]=\"''\"\n          [fontIcon]=\"'chevron_left'\">\n        </app-button>\n        \n        <app-button\n          type=\"button\"\n          appearance=\"basic\"\n          (btnClick)=\"onTodayClick()\"\n          class=\"today-btn\"\n          [text]=\"'Today'\">\n        </app-button>\n        \n        <app-button\n          type=\"button\"\n          appearance=\"icon\"\n          (btnClick)=\"nextMonth()\"\n          class=\"nav-btn\"\n          [text]=\"''\"\n          [fontIcon]=\"'chevron_right'\">\n        </app-button>\n      </div>\n    </div>\n  </div>\n\n  <!-- Calendar Legend -->\n  <div class=\"calendar-legend\" *ngIf=\"showEventIndicators\">\n    <div class=\"legend-item\">\n      <div class=\"legend-dot available\"></div>\n      <span class=\"legend-text\">Available</span>\n    </div>\n    <div class=\"legend-item\">\n      <div class=\"legend-dot appointment\"></div>\n      <span class=\"legend-text\">Booked</span>\n    </div>\n  </div>\n\n  <!-- Calendar and Events Container -->\n  <div class=\"calendar-events-container\">\n    <!-- Calendar Grid -->\n    <div class=\"calendar-grid\">\n      <!-- Week Days Header -->\n      <div class=\"week-header\">\n        <div class=\"week-day\" *ngFor=\"let day of weekDays\">{{ day }}</div>\n      </div>\n\n      <!-- Calendar Days -->\n      <div class=\"calendar-body\">\n        <div class=\"calendar-week\" *ngFor=\"let week of calendar\">\n          <div \n            class=\"calendar-day\"\n            *ngFor=\"let date of week\"\n            [class.today]=\"isToday(date)\"\n            [class.selected]=\"isSelected(date)\"\n            [class.other-month]=\"!isCurrentMonth(date)\"\n            [class.clickable]=\"allowDateSelection\"\n            (click)=\"allowDateSelection ? onDateSelected({date: date}) : null\">\n            \n            <div class=\"day-number\">{{ date.getDate() }}</div>\n            \n            <!-- Event Indicators -->\n            <div \n              class=\"event-indicators\" \n              *ngIf=\"showEventIndicators && getEventsForDate(date).length > 0\">\n              <div \n                class=\"event-dot\"\n                *ngFor=\"let event of getEventsForDate(date).slice(0, 3)\"\n                [class]=\"'event-dot ' + (event.type || 'other')\"\n                [style.background-color]=\"getEventColor(event).primary\">\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Events Panel (Right Side) -->\n    <div class=\"events-panel\" *ngIf=\"getEventsForDate(selectedDate).length > 0\">\n      <div class=\"date-header\">\n        <h3 class=\"date-title\">{{ formatSelectedDate() }}</h3>\n      </div>\n      \n\n      <div class=\"events-panel-wrapper\">\n        <div class=\"event-item\" \n        *ngFor=\"let event of getEventsForDate(selectedDate)\"\n        (click)=\"onEventClicked({event: {meta: {originalEvent: event}}})\"\n        [style.border-left-color]=\"getEventColor(event).primary\">\n     <div class=\"event-content\">\n       <div class=\"event-title\">{{ event.title }}</div>\n       <div class=\"event-description\" *ngIf=\"event.description\">{{ event.description }}</div>\n       <div class=\"event-time\">\n         <span *ngIf=\"event.allDay\">All-day</span>\n         <span *ngIf=\"!event.allDay\">{{ formatEventTime(event) }}</span>\n       </div>\n     </div>\n   </div>\n      </div>\n    </div>\n\n    <!-- No Events Message (Right Side) -->\n    <div class=\"no-events-panel\" *ngIf=\"getEventsForDate(selectedDate).length === 0\">\n      <p>No events for {{ formatSelectedDate() }}</p>\n    </div>\n  </div>\n\n  <!-- Events List (Bottom - Mobile/Compact) -->\n  <div class=\"events-list-bottom\" *ngIf=\"getEventsForDate(selectedDate).length > 0\">\n    <div class=\"date-header\">\n      <h3 class=\"date-title\">{{ formatSelectedDate() }}</h3>\n    </div>\n    \n    <div class=\"event-item\" \n         *ngFor=\"let event of getEventsForDate(selectedDate)\"\n         (click)=\"onEventClicked({event: {meta: {originalEvent: event}}})\"\n         [style.border-left-color]=\"getEventColor(event).primary\">\n      <div class=\"event-content\">\n        <div class=\"event-title\">{{ event.title }}</div>\n        <div class=\"event-description\" *ngIf=\"event.description\">{{ event.description }}</div>\n        <div class=\"event-time\">\n          <span *ngIf=\"event.allDay\">All-day</span>\n          <span *ngIf=\"!event.allDay\">{{ formatEventTime(event) }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- No Events Message (Bottom) -->\n  <div class=\"no-events-bottom\" *ngIf=\"getEventsForDate(selectedDate).length === 0\">\n    <p>No events for {{ formatSelectedDate() }}</p>\n  </div>\n</div> ", styles: [".calendar-container{background:#fff;border-radius:8px;box-shadow:0 2px 8px #0000001a;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;max-width:100%;height:100%}.calendar-header{background:#fff;border-bottom:1px solid #e0e0e0;padding:16px 20px;height:4.5em}.calendar-header .header-content{display:flex;justify-content:space-between;align-items:center}.calendar-header .header-content .month-year .month-year-text{margin:0;font-size:18px;font-weight:600;color:#007aff}.calendar-header .header-content .navigation-controls{min-width:10em;display:flex;align-items:center;gap:8px}.calendar-header .header-content .navigation-controls .nav-btn{min-width:3em;width:32px;height:32px;padding:0;color:#007aff}.calendar-header .header-content .navigation-controls .nav-btn ::ng-deep .mat-mdc-button-touch-target{width:32px;height:32px}.calendar-header .header-content .navigation-controls .today-btn{color:#007aff;font-weight:500;min-width:60px;font-size:14px}.calendar-legend{display:flex;justify-content:center;gap:20px;padding:8px 20px;background:#f8f9fa;border-bottom:1px solid #e0e0e0;height:2em}.calendar-legend .legend-item{display:flex;align-items:center;gap:6px}.calendar-legend .legend-item .legend-dot{width:8px;height:8px;border-radius:50%}.calendar-legend .legend-item .legend-dot.available{background:#4caf50}.calendar-legend .legend-item .legend-dot.appointment{background:#f44336}.calendar-legend .legend-item .legend-text{font-size:12px;color:#666;font-weight:500}.calendar-events-container{display:flex;height:calc(100% - 6.6em)}.calendar-grid{flex:1;padding:0 20px 16px;min-width:60%}.calendar-grid .week-header{display:grid;grid-template-columns:repeat(7,1fr);margin-bottom:8px}.calendar-grid .week-header .week-day{text-align:center;font-size:12px;font-weight:500;color:#8e8e93;padding:8px 0}.calendar-grid .calendar-body .calendar-week{display:grid;grid-template-columns:repeat(7,1fr);border-bottom:1px solid #F2F2F7}.calendar-grid .calendar-body .calendar-week:last-child{border-bottom:none}.calendar-grid .calendar-body .calendar-week .calendar-day{min-height:40px;padding:4px;position:relative;display:flex;flex-direction:column;align-items:center;justify-content:center;cursor:pointer;transition:background-color .2s ease}.calendar-grid .calendar-body .calendar-week .calendar-day:hover{background:#f2f2f7}.calendar-grid .calendar-body .calendar-week .calendar-day.today .day-number,.calendar-grid .calendar-body .calendar-week .calendar-day.selected .day-number{background:#007aff;color:#fff;border-radius:50%;width:28px;height:28px;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}.calendar-grid .calendar-body .calendar-week .calendar-day.other-month .day-number{color:#c7c7cc}.calendar-grid .calendar-body .calendar-week .calendar-day .day-number{font-size:16px;font-weight:400;color:#000;margin-bottom:4px;width:28px;height:28px;display:flex;align-items:center;justify-content:center}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators{display:flex;gap:2px;margin-top:2px;flex-wrap:wrap;justify-content:center}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot{width:6px;height:6px;border-radius:50%;background:#8e8e93;transition:transform .2s ease}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot:hover{transform:scale(1.2)}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot.appointment{background:#f44336}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot.available{background:#4caf50}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot.break{background:#ff9800}.calendar-grid .calendar-body .calendar-week .calendar-day .event-indicators .event-dot.leave{background:#f44336}.events-panel{width:35%;border-left:1px solid #F2F2F7;background:#fff;display:flex;flex-direction:column;height:100%}.events-panel-wrapper{height:calc(100% - 3.5em);overflow-y:scroll}.events-panel .date-header{padding:.6em 1em .4em;border-bottom:1px solid #F2F2F7;height:2.5em}.events-panel .date-header .date-title{margin:0;font-size:16px;font-weight:600;color:#000}.events-panel .event-item{padding:12px 20px;border-bottom:1px solid #F2F2F7;border-left:4px solid;cursor:pointer;transition:background-color .2s ease}.events-panel .event-item:hover{background:#f2f2f7}.events-panel .event-item:last-child{border-bottom:none}.events-panel .event-item .event-content .event-title{font-size:16px;font-weight:500;color:#000;margin-bottom:4px}.events-panel .event-item .event-content .event-description{font-size:14px;color:#8e8e93;margin-bottom:4px}.events-panel .event-item .event-content .event-time{font-size:14px;color:#8e8e93}.no-events-panel{width:40%;border-left:1px solid #F2F2F7;padding:20px;text-align:center;background:#fff;display:flex;align-items:center;justify-content:center}.no-events-panel p{margin:0;font-size:16px;color:#8e8e93}.events-list-bottom{display:none;border-top:1px solid #F2F2F7;background:#fff}.events-list-bottom .date-header{padding:16px 20px 8px;border-bottom:1px solid #F2F2F7}.events-list-bottom .date-header .date-title{margin:0;font-size:16px;font-weight:600;color:#000}.events-list-bottom .event-item{padding:12px 20px;border-bottom:1px solid #F2F2F7;border-left:4px solid;cursor:pointer;transition:background-color .2s ease}.events-list-bottom .event-item:hover{background:#f2f2f7}.events-list-bottom .event-item:last-child{border-bottom:none}.events-list-bottom .event-item .event-content .event-title{font-size:16px;font-weight:500;color:#000;margin-bottom:4px}.events-list-bottom .event-item .event-content .event-description{font-size:14px;color:#8e8e93;margin-bottom:4px}.events-list-bottom .event-item .event-content .event-time{font-size:14px;color:#8e8e93}.no-events-bottom{display:none;border-top:1px solid #F2F2F7;padding:20px;text-align:center;background:#fff}.no-events-bottom p{margin:0;font-size:16px;color:#8e8e93}@media (max-width: 768px){.calendar-container{border-radius:0;box-shadow:none;max-width:100%;height:100%}.calendar-events-container{flex-direction:column;height:100%}.calendar-grid{padding:0 16px 12px;min-width:auto}.calendar-grid .calendar-body .calendar-week .calendar-day{min-height:35px}.calendar-grid .calendar-body .calendar-week .calendar-day .day-number{font-size:14px;width:24px;height:24px}.calendar-grid .calendar-body .calendar-week .calendar-day.today .day-number,.calendar-grid .calendar-body .calendar-week .calendar-day.selected .day-number{width:24px;height:24px;font-size:12px}.events-panel,.no-events-panel{display:none}.events-list-bottom{display:block}.events-list-bottom .date-header{padding:12px 16px 6px}.events-list-bottom .event-item{padding:10px 16px}.no-events-bottom{display:block;padding:16px}}@media (min-width: 769px) and (max-width: 1024px){.calendar-events-container{flex-direction:column;height:100%}.calendar-grid{min-width:auto}.events-panel,.no-events-panel{display:none}.events-list-bottom,.no-events-bottom{display:block}}@media (min-width: 1025px){.events-list-bottom,.no-events-bottom{display:none}}@media (prefers-color-scheme: dark){.calendar-container{background:#1c1c1e;color:#fff}.calendar-header{background:#1c1c1e;border-bottom-color:#38383a}.calendar-header .header-content .month-year-text{color:#0a84ff}.calendar-legend{background:#2c2c2e;border-bottom-color:#38383a}.calendar-legend .legend-item .legend-text,.calendar-grid .week-header .week-day{color:#8e8e93}.calendar-grid .calendar-body .calendar-week{border-bottom-color:#38383a}.calendar-grid .calendar-body .calendar-week .calendar-day:hover{background:#2c2c2e}.calendar-grid .calendar-body .calendar-week .calendar-day.today .day-number,.calendar-grid .calendar-body .calendar-week .calendar-day.selected .day-number{background:#0a84ff}.calendar-grid .calendar-body .calendar-week .calendar-day.other-month .day-number{color:#48484a}.calendar-grid .calendar-body .calendar-week .calendar-day .day-number{color:#fff}.events-panel{background:#1c1c1e;border-left-color:#38383a}.events-panel .date-header{border-bottom-color:#38383a}.events-panel .date-header .date-title{color:#fff}.events-panel .event-item{border-bottom-color:#38383a}.events-panel .event-item:hover{background:#2c2c2e}.events-panel .event-item .event-content .event-title{color:#fff}.events-panel .event-item .event-content .event-description,.events-panel .event-item .event-content .event-time{color:#8e8e93}.no-events-panel{background:#1c1c1e;border-left-color:#38383a}.no-events-panel p{color:#8e8e93}.events-list-bottom{background:#1c1c1e;border-top-color:#38383a}.events-list-bottom .date-header{border-bottom-color:#38383a}.events-list-bottom .date-header .date-title{color:#fff}.events-list-bottom .event-item{border-bottom-color:#38383a}.events-list-bottom .event-item:hover{background:#2c2c2e}.events-list-bottom .event-item .event-content .event-title{color:#fff}.events-list-bottom .event-item .event-content .event-description,.events-list-bottom .event-item .event-content .event-time{color:#8e8e93}.no-events-bottom{background:#1c1c1e;border-top-color:#38383a}.no-events-bottom p{color:#8e8e93}}\n"] }]
        }], propDecorators: { events: [{
                type: Input
            }], selectedDate: [{
                type: Input
            }], view: [{
                type: Input
            }], viewDate: [{
                type: Input
            }], showNavigation: [{
                type: Input
            }], showToday: [{
                type: Input
            }], allowDateSelection: [{
                type: Input
            }], highlightToday: [{
                type: Input
            }], showEventIndicators: [{
                type: Input
            }], locale: [{
                type: Input
            }], dateSelected: [{
                type: Output
            }], eventClicked: [{
                type: Output
            }], monthChanged: [{
                type: Output
            }], viewChanged: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2FsZW5kYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29tbW9uLWxpYnMvY29yZS9zcmMvbGliL3Rvb2xzL2NhbGVuZGFyL2NhbGVuZGFyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9jYWxlbmRhci9jYWxlbmRhci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFVLHVCQUF1QixFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3hHLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDbEQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzNELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxvQ0FBb0MsQ0FBQztBQUN4RSxPQUFPLEVBQTRFLE1BQU0sRUFBWSxNQUFNLFVBQVUsQ0FBQzs7O0FBOEJ0SCxNQUFNLE9BQU8saUJBQWlCO0lBZDlCO1FBZVcsV0FBTSxHQUFvQixFQUFFLENBQUM7UUFDN0IsaUJBQVksR0FBUyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQ2hDLFNBQUksR0FBNkIsT0FBTyxDQUFDO1FBQ3pDLGFBQVEsR0FBUyxJQUFJLElBQUksRUFBRSxDQUFDO1FBQzVCLG1CQUFjLEdBQVksSUFBSSxDQUFDO1FBQy9CLGNBQVMsR0FBWSxJQUFJLENBQUM7UUFDMUIsdUJBQWtCLEdBQVksSUFBSSxDQUFDO1FBQ25DLG1CQUFjLEdBQVksSUFBSSxDQUFDO1FBQy9CLHdC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Z0pPLGlsU0R0SEgsWUFBWSwrUEFDWixjQUFjLDhCQUNkLGVBQWUsOEJBQ2YsYUFBYSwrQkFDYixrQkFBa0I7OzRGQU1ULGlCQUFpQjtrQkFkN0IsU0FBUzsrQkFDRSxjQUFjLGNBQ1osSUFBSSxXQUNQO3dCQUNQLFlBQVk7d0JBQ1osY0FBYzt3QkFDZCxlQUFlO3dCQUNmLGFBQWE7d0JBQ2Isa0JBQWtCO3FCQUNuQixtQkFDZ0IsdUJBQXVCLENBQUMsTUFBTTs4QkFLdEMsTUFBTTtzQkFBZCxLQUFLO2dCQUNHLFlBQVk7c0JBQXBCLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLO2dCQUNHLGtCQUFrQjtzQkFBMUIsS0FBSztnQkFDRyxjQUFjO3NCQUF0QixLQUFLO2dCQUNHLG1CQUFtQjtzQkFBM0IsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBRUksWUFBWTtzQkFBckIsTUFBTTtnQkFDRyxZQUFZO3NCQUFyQixNQUFNO2dCQUNHLFlBQVk7c0JBQXJCLE1BQU07Z0JBQ0csV0FBVztzQkFBcEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkluaXQsIENoYW5nZURldGVjdGlvblN0cmF0ZWd5IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgQ2FsZW5kYXJNb2R1bGUgfSBmcm9tICdhbmd1bGFyLWNhbGVuZGFyJztcbmltcG9ydCB7IE1hdEJ1dHRvbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2J1dHRvbic7XG5pbXBvcnQgeyBNYXRJY29uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvaWNvbic7XG5pbXBvcnQgeyBBcHBCdXR0b25Db21wb25lbnQgfSBmcm9tICcuLi9hcHAtYnV0dG9uL2FwcC1idXR0b24uY29tcG9uZW50JztcbmltcG9ydCB7IHN0YXJ0T2ZNb250aCwgZW5kT2ZNb250aCwgc3RhcnRPZldlZWssIGVuZE9mV2VlaywgaXNTYW1lTW9udGgsIGlzU2FtZURheSwgZm9ybWF0LCBwYXJzZUlTTyB9IGZyb20gJ2RhdGUtZm5zJztcblxuZXhwb3J0IGludGVyZmFjZSBDYWxlbmRhckV2ZW50IHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgc3RhcnQ6IERhdGU7XG4gIGVuZD86IERhdGU7XG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuICB0eXBlPzogJ2FwcG9pbnRtZW50JyB8ICdicmVhaycgfCAnbGVhdmUnIHwgJ2F2YWlsYWJsZScgfCAnb3RoZXInO1xuICBjb2xvcj86IHtcbiAgICBwcmltYXJ5OiBzdHJpbmc7XG4gICAgc2Vjb25kYXJ5OiBzdHJpbmc7XG4gIH07XG4gIGFsbERheT86IGJvb2xlYW47XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FwcC1jYWxlbmRhcicsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgQ2FsZW5kYXJNb2R1bGUsXG4gICAgTWF0QnV0dG9uTW9kdWxlLFxuICAgIE1hdEljb25Nb2R1bGUsXG4gICAgQXBwQnV0dG9uQ29tcG9uZW50XG4gIF0sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICB0ZW1wbGF0ZVVybDogJy4vY2FsZW5kYXIuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybDogJy4vY2FsZW5kYXIuY29tcG9uZW50LnNjc3MnXG59KVxuZXhwb3J0IGNsYXNzIENhbGVuZGFyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgZXZlbnRzOiBDYWxlbmRhckV2ZW50W10gPSBbXTtcbiAgQElucHV0KCkgc2VsZWN0ZWREYXRlOiBEYXRlID0gbmV3IERhdGUoKTtcbiAgQElucHV0KCkgdmlldzogJ21vbnRoJyB8ICd3ZWVrJyB8ICdkYXknID0gJ21vbnRoJztcbiAgQElucHV0KCkgdmlld0RhdGU6IERhdGUgPSBuZXcgRGF0ZSgpO1xuICBASW5wdXQoKSBzaG93TmF2aWdhdGlvbjogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIHNob3dUb2RheTogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIGFsbG93RGF0ZVNlbGVjdGlvbjogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIGhpZ2hsaWdodFRvZGF5OiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0KCkgc2hvd0V2ZW50SW5kaWNhdG9yczogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIGxvY2FsZTogc3RyaW5nID0gJ2VuJztcbiAgXG4gIEBPdXRwdXQoKSBkYXRlU2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPERhdGU+KCk7XG4gIEBPdXRwdXQoKSBldmVudENsaWNrZWQgPSBuZXcgRXZlbnRFbWl0dGVyPENhbGVuZGFyRXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBtb250aENoYW5nZWQgPSBuZXcgRXZlbnRFbWl0dGVyPHsgeWVhcjogbnVtYmVyOyBtb250aDogbnVtYmVyIH0+KCk7XG4gIEBPdXRwdXQoKSB2aWV3Q2hhbmdlZCA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuXG4gIGNhbGVuZGFyRXZlbnRzOiBhbnlbXSA9IFtdO1xuICBjYWxlbmRhcjogRGF0ZVtdW10gPSBbXTtcbiAgd2Vla0RheXMgPSBbJ1MnLCAnTScsICdUJywgJ1cnLCAnVCcsICdGJywgJ1MnXTtcbiAgY3VycmVudE1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpO1xuICBjdXJyZW50WWVhciA9IG5ldyBEYXRlKCkuZ2V0RnVsbFllYXIoKTtcblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmNvbnZlcnRFdmVudHMoKTtcbiAgICB0aGlzLmdlbmVyYXRlQ2FsZW5kYXIoKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKCkge1xuICAgIHRoaXMuY29udmVydEV2ZW50cygpO1xuICAgIHRoaXMuZ2VuZXJhdGVDYWxlbmRhcigpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUNhbGVuZGFyKCkge1xuICAgIHRoaXMuY2FsZW5kYXIgPSBbXTtcbiAgICBjb25zdCBmaXJzdERheSA9IG5ldyBEYXRlKHRoaXMuY3VycmVudFllYXIsIHRoaXMuY3VycmVudE1vbnRoLCAxKTtcbiAgICBjb25zdCBsYXN0RGF5ID0gbmV3IERhdGUodGhpcy5jdXJyZW50WWVhciwgdGhpcy5jdXJyZW50TW9udGggKyAxLCAwKTtcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShmaXJzdERheSk7XG4gICAgXG4gICAgLy8gQWRqdXN0IHRvIHN0YXJ0IGZyb20gU3VuZGF5XG4gICAgY29uc3QgZGF5T2ZXZWVrID0gZmlyc3REYXkuZ2V0RGF5KCk7XG4gICAgc3RhcnREYXRlLnNldERhdGUoc3RhcnREYXRlLmdldERhdGUoKSAtIGRheU9mV2Vlayk7XG5cbiAgICBjb25zdCB3ZWVrcyA9IE1hdGguY2VpbCgobGFzdERheS5nZXREYXRlKCkgKyBkYXlPZldlZWspIC8gNyk7XG4gICAgXG4gICAgZm9yIChsZXQgd2VlayA9IDA7IHdlZWsgPCB3ZWVrczsgd2VlaysrKSB7XG4gICAgICBjb25zdCB3ZWVrRGF0ZXM6IERhdGVbXSA9IFtdO1xuICAgICAgZm9yIChsZXQgZGF5ID0gMDsgZGF5IDwgNzsgZGF5KyspIHtcbiAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XG4gICAgICAgIGRhdGUuc2V0RGF0ZShzdGFydERhdGUuZ2V0RGF0ZSgpICsgKHdlZWsgKiA3KSArIGRheSk7XG4gICAgICAgIHdlZWtEYXRlcy5wdXNoKGRhdGUpO1xuICAgICAgfVxuICAgICAgdGhpcy5jYWxlbmRhci5wdXNoKHdlZWtEYXRlcyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjb252ZXJ0RXZlbnRzKCkge1xuICAgIHRoaXMuY2FsZW5kYXJFdmVudHMgPSB0aGlzLmV2ZW50cy5tYXAoZXZlbnQgPT4gKHtcbiAgICAgIGlkOiBldmVudC5pZCxcbiAgICAgIHRpdGxlOiBldmVudC50aXRsZSxcbiAgICAgIHN0YXJ0OiBuZXcgRGF0ZShldmVudC5zdGFydCksXG4gICAgICBlbmQ6IGV2ZW50LmVuZCA/IG5ldyBEYXRlKGV2ZW50LmVuZCkgOiBuZXcgRGF0ZShldmVudC5zdGFydCksXG4gICAgICBkZXNjcmlwdGlvbjogZXZlbnQuZGVzY3JpcHRpb24sXG4gICAgICBjb2xvcjogZXZlbnQuY29sb3IgfHwgdGhpcy5nZXREZWZhdWx0Q29sb3IoZXZlbnQudHlwZSksXG4gICAgICBhbGxEYXk6IGV2ZW50LmFsbERheSB8fCBmYWxzZSxcbiAgICAgIG1ldGE6IHtcbiAgICAgICAgdHlwZTogZXZlbnQudHlwZSxcbiAgICAgICAgb3JpZ2luYWxFdmVudDogZXZlbnRcbiAgICAgIH1cbiAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIGdldERlZmF1bHRDb2xvcih0eXBlPzogc3RyaW5nKSB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdhcHBvaW50bWVudCc6XG4gICAgICAgIHJldHVybiB7IHByaW1hcnk6ICcjZjQ0MzM2Jywgc2Vjb25kYXJ5OiAnI2ZmZWJlZScgfTsgLy8gUmVkIGZvciBmaWxsZWQgc2xvdHNcbiAgICAgIGNhc2UgJ2F2YWlsYWJsZSc6XG4gICAgICAgIHJldHVybiB7IHByaW1hcnk6ICcjNGNhZjUwJywgc2Vjb25kYXJ5OiAnI2U4ZjVlOCcgfTsgLy8gR3JlZW4gZm9yIGF2YWlsYWJsZSBzbG90c1xuICAgICAgY2FzZSAnYnJlYWsnOlxuICAgICAgICByZXR1cm4geyBwcmltYXJ5OiAnI2ZmOTgwMCcsIHNlY29uZGFyeTogJyNmZmYzZTAnIH07XG4gICAgICBjYXNlICdsZWF2ZSc6XG4gICAgICAgIHJldHVybiB7IHByaW1hcnk6ICcjZjQ0MzM2Jywgc2Vjb25kYXJ5OiAnI2ZmZWJlZScgfTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7IHByaW1hcnk6ICcjNzU3NTc1Jywgc2Vjb25kYXJ5OiAnI2Y1ZjVmNScgfTtcbiAgICB9XG4gIH1cblxuICBvbkRhdGVTZWxlY3RlZChldmVudDogYW55KSB7XG4gICAgdGhpcy5zZWxlY3RlZERhdGUgPSBldmVudC5kYXRlO1xuICAgIHRoaXMuZGF0ZVNlbGVjdGVkLmVtaXQoZXZlbnQuZGF0ZSk7XG4gIH1cblxuICBvbkV2ZW50Q2xpY2tlZChldmVudDogYW55KSB7XG4gICAgdGhpcy5ldmVudENsaWNrZWQuZW1pdChldmVudC5ldmVudC5tZXRhLm9yaWdpbmFsRXZlbnQpO1xuICB9XG5cbiAgb25WaWV3Q2hhbmdlKHZpZXc6IHN0cmluZykge1xuICAgIHRoaXMudmlldyA9IHZpZXcgYXMgJ21vbnRoJyB8ICd3ZWVrJyB8ICdkYXknO1xuICAgIHRoaXMudmlld0NoYW5nZWQuZW1pdCh2aWV3KTtcbiAgfVxuXG4gIG9uVmlld0RhdGVDaGFuZ2UoZGF0ZTogRGF0ZSkge1xuICAgIHRoaXMudmlld0RhdGUgPSBkYXRlO1xuICAgIHRoaXMuY3VycmVudE1vbnRoID0gZGF0ZS5nZXRNb250aCgpO1xuICAgIHRoaXMuY3VycmVudFllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKCk7XG4gICAgdGhpcy5tb250aENoYW5nZWQuZW1pdCh7IFxuICAgICAgeWVhcjogZGF0ZS5nZXRGdWxsWWVhcigpLCBcbiAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCkgXG4gICAgfSk7XG4gIH1cblxuICBvblRvZGF5Q2xpY2soKSB7XG4gICAgdGhpcy52aWV3RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgdGhpcy5zZWxlY3RlZERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuY3VycmVudE1vbnRoID0gbmV3IERhdGUoKS5nZXRNb250aCgpO1xuICAgIHRoaXMuY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG4gICAgdGhpcy5nZW5lcmF0ZUNhbGVuZGFyKCk7XG4gIH1cblxuICBwcmV2aW91c01vbnRoKCkge1xuICAgIGNvbnN0IG5ld0RhdGUgPSBuZXcgRGF0ZSh0aGlzLmN1cnJlbnRZZWFyLCB0aGlzLmN1cnJlbnRNb250aCAtIDEsIDEpO1xuICAgIHRoaXMub25WaWV3RGF0ZUNoYW5nZShuZXdEYXRlKTtcbiAgfVxuXG4gIG5leHRNb250aCgpIHtcbiAgICBjb25zdCBuZXdEYXRlID0gbmV3IERhdGUodGhpcy5jdXJyZW50WWVhciwgdGhpcy5jdXJyZW50TW9udGggKyAxLCAxKTtcbiAgICB0aGlzLm9uVmlld0RhdGVDaGFuZ2UobmV3RGF0ZSk7XG4gIH1cblxuICBpc1RvZGF5KGRhdGU6IERhdGUpOiBib29sZWFuIHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgcmV0dXJuIGRhdGUuZ2V0RGF0ZSgpID09PSB0b2RheS5nZXREYXRlKCkgJiZcbiAgICAgICAgICAgZGF0ZS5nZXRNb250aCgpID09PSB0b2RheS5nZXRNb250aCgpICYmXG4gICAgICAgICAgIGRhdGUuZ2V0RnVsbFllYXIoKSA9PT0gdG9kYXkuZ2V0RnVsbFllYXIoKTtcbiAgfVxuXG4gIGlzU2VsZWN0ZWQoZGF0ZTogRGF0ZSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBkYXRlLmdldERhdGUoKSA9PT0gdGhpcy5zZWxlY3RlZERhdGUuZ2V0RGF0ZSgpICYmXG4gICAgICAgICAgIGRhdGUuZ2V0TW9udGgoKSA9PT0gdGhpcy5zZWxlY3RlZERhdGUuZ2V0TW9udGgoKSAmJlxuICAgICAgICAgICBkYXRlLmdldEZ1bGxZZWFyKCkgPT09IHRoaXMuc2VsZWN0ZWREYXRlLmdldEZ1bGxZZWFyKCk7XG4gIH1cblxuICBpc0N1cnJlbnRNb250aChkYXRlOiBEYXRlKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGRhdGUuZ2V0TW9udGgoKSA9PT0gdGhpcy5jdXJyZW50TW9udGg7XG4gIH1cblxuICBnZXRFdmVudHNGb3JEYXRlKGRhdGU6IERhdGUpOiBDYWxlbmRhckV2ZW50W10ge1xuICAgIHJldHVybiB0aGlzLmV2ZW50cy5maWx0ZXIoZXZlbnQgPT4ge1xuICAgICAgY29uc3QgZXZlbnREYXRlID0gbmV3IERhdGUoZXZlbnQuc3RhcnQpO1xuICAgICAgcmV0dXJuIGV2ZW50RGF0ZS5nZXREYXRlKCkgPT09IGRhdGUuZ2V0RGF0ZSgpICYmXG4gICAgICAgICAgICAgZXZlbnREYXRlLmdldE1vbnRoKCkgPT09IGRhdGUuZ2V0TW9udGgoKSAmJlxuICAgICAgICAgICAgIGV2ZW50RGF0ZS5nZXRGdWxsWWVhcigpID09PSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRFdmVudENvbG9yKGV2ZW50OiBDYWxlbmRhckV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmNvbG9yKSByZXR1cm4gZXZlbnQuY29sb3I7XG4gICAgXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdhcHBvaW50bWVudCc6XG4gICAgICAgIHJldHVybiB7IHByaW1hcnk6ICcjZjQ0MzM2Jywgc2Vjb25kYXJ5OiAnI2ZmZWJlZScgfTsgLy8gUmVkIGZvciBmaWxsZWQgc2xvdHNcbiAgICAgIGNhc2UgJ2F2YWlsYWJsZSc6XG4gICAgICAgIHJldHVybiB7IHByaW1hcnk6ICcjNGNhZjUwJywgc2Vjb25kYXJ5OiAnI2U4ZjVlOCcgfTsgLy8gR3JlZW4gZm9yIGF2YWlsYWJsZSBzbG90c1xuICAgICAgY2FzZSAnYnJlYWsnOlxuICAgICAgICByZXR1cm4geyBwcmltYXJ5OiAnI2ZmOTgwMCcsIHNlY29uZGFyeTogJyNmZmYzZTAnIH07XG4gICAgICBjYXNlICdsZWF2ZSc6XG4gICAgICAgIHJldHVybiB7IHByaW1hcnk6ICcjZjQ0MzM2Jywgc2Vjb25kYXJ5OiAnI2ZmZWJlZScgfTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiB7IHByaW1hcnk6ICcjNzU3NTc1Jywgc2Vjb25kYXJ5OiAnI2Y1ZjVmNScgfTtcbiAgICB9XG4gIH1cblxuICBmb3JtYXRTZWxlY3RlZERhdGUoKTogc3RyaW5nIHtcbiAgICBjb25zdCBvcHRpb25zOiBJbnRsLkRhdGVUaW1lRm9ybWF0T3B0aW9ucyA9IHsgXG4gICAgICB3ZWVrZGF5OiAnc2hvcnQnLCBcbiAgICAgIG1vbnRoOiAnc2hvcnQnLCBcbiAgICAgIGRheTogJ251bWVyaWMnLFxuICAgICAgeWVhcjogJ251bWVyaWMnXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5zZWxlY3RlZERhdGUudG9Mb2NhbGVEYXRlU3RyaW5nKCdlbi1VUycsIG9wdGlvbnMpO1xuICB9XG5cbiAgZm9ybWF0RXZlbnRUaW1lKGV2ZW50OiBDYWxlbmRhckV2ZW50KTogc3RyaW5nIHtcbiAgICBpZiAoZXZlbnQuYWxsRGF5KSByZXR1cm4gJ0FsbC1kYXknO1xuICAgIFxuICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKGV2ZW50LnN0YXJ0KTtcbiAgICBjb25zdCBlbmRUaW1lID0gZXZlbnQuZW5kID8gbmV3IERhdGUoZXZlbnQuZW5kKSA6IHN0YXJ0VGltZTtcbiAgICBcbiAgICBjb25zdCBzdGFydFN0ciA9IHN0YXJ0VGltZS50b0xvY2FsZVRpbWVTdHJpbmcoJ2VuLVVTJywgeyBcbiAgICAgIGhvdXI6ICdudW1lcmljJywgXG4gICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgIGhvdXIxMjogdHJ1ZSBcbiAgICB9KTtcbiAgICBcbiAgICBpZiAoZXZlbnQuZW5kKSB7XG4gICAgICBjb25zdCBlbmRTdHIgPSBlbmRUaW1lLnRvTG9jYWxlVGltZVN0cmluZygnZW4tVVMnLCB7IFxuICAgICAgICBob3VyOiAnbnVtZXJpYycsIFxuICAgICAgICBtaW51dGU6ICcyLWRpZ2l0JyxcbiAgICAgICAgaG91cjEyOiB0cnVlIFxuICAgICAgfSk7XG4gICAgICByZXR1cm4gYCR7c3RhcnRTdHJ9IC0gJHtlbmRTdHJ9YDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHN0YXJ0U3RyO1xuICB9XG5cbiAgZ2V0TW9udGhZZWFyU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGZvcm1hdCh0aGlzLnZpZXdEYXRlLCAnTU1NTSB5eXl5Jyk7XG4gIH1cbn0gIiwiPGRpdiBjbGFzcz1cImNhbGVuZGFyLWNvbnRhaW5lclwiPlxuICA8IS0tIENhbGVuZGFyIEhlYWRlciAtLT5cbiAgPGRpdiBjbGFzcz1cImNhbGVuZGFyLWhlYWRlclwiPlxuICAgIDxkaXYgY2xhc3M9XCJoZWFkZXItY29udGVudFwiPlxuICAgICAgPGRpdiBjbGFzcz1cIm1vbnRoLXllYXJcIj5cbiAgICAgICAgPGgyIGNsYXNzPVwibW9udGgteWVhci10ZXh0XCI+e3sgZ2V0TW9udGhZZWFyU3RyaW5nKCkgfX08L2gyPlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3M9XCJuYXZpZ2F0aW9uLWNvbnRyb2xzXCI+XG4gICAgICAgIDxhcHAtYnV0dG9uXG4gICAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgICAgYXBwZWFyYW5jZT1cImljb25cIlxuICAgICAgICAgIChidG5DbGljayk9XCJwcmV2aW91c01vbnRoKClcIlxuICAgICAgICAgIGNsYXNzPVwibmF2LWJ0blwiXG4gICAgICAgICAgW3RleHRdPVwiJydcIlxuICAgICAgICAgIFtmb250SWNvbl09XCInY2hldnJvbl9sZWZ0J1wiPlxuICAgICAgICA8L2FwcC1idXR0b24+XG4gICAgICAgIFxuICAgICAgICA8YXBwLWJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGFwcGVhcmFuY2U9XCJiYXNpY1wiXG4gICAgICAgICAgKGJ0bkNsaWNrKT1cIm9uVG9kYXlDbGljaygpXCJcbiAgICAgICAgICBjbGFzcz1cInRvZGF5LWJ0blwiXG4gICAgICAgICAgW3RleHRdPVwiJ1RvZGF5J1wiPlxuICAgICAgICA8L2FwcC1idXR0b24+XG4gICAgICAgIFxuICAgICAgICA8YXBwLWJ1dHRvblxuICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgIGFwcGVhcmFuY2U9XCJpY29uXCJcbiAgICAgICAgICAoYnRuQ2xpY2spPVwibmV4dE1vbnRoKClcIlxuICAgICAgICAgIGNsYXNzPVwibmF2LWJ0blwiXG4gICAgICAgICAgW3RleHRdPVwiJydcIlxuICAgICAgICAgIFtmb250SWNvbl09XCInY2hldnJvbl9yaWdodCdcIj5cbiAgICAgICAgPC9hcHAtYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG4gIDwhLS0gQ2FsZW5kYXIgTGVnZW5kIC0tPlxuICA8ZGl2IGNsYXNzPVwiY2FsZW5kYXItbGVnZW5kXCIgKm5nSWY9XCJzaG93RXZlbnRJbmRpY2F0b3JzXCI+XG4gICAgPGRpdiBjbGFzcz1cImxlZ2VuZC1pdGVtXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibGVnZW5kLWRvdCBhdmFpbGFibGVcIj48L2Rpdj5cbiAgICAgIDxzcGFuIGNsYXNzPVwibGVnZW5kLXRleHRcIj5BdmFpbGFibGU8L3NwYW4+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cImxlZ2VuZC1pdGVtXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwibGVnZW5kLWRvdCBhcHBvaW50bWVudFwiPjwvZGl2PlxuICAgICAgPHNwYW4gY2xhc3M9XCJsZWdlbmQtdGV4dFwiPkJvb2tlZDwvc3Bhbj5cbiAgICA8L2Rpdj5cbiAgPC9kaXY+XG5cbiAgPCEtLSBDYWxlbmRhciBhbmQgRXZlbnRzIENvbnRhaW5lciAtLT5cbiAgPGRpdiBjbGFzcz1cImNhbGVuZGFyLWV2ZW50cy1jb250YWluZXJcIj5cbiAgICA8IS0tIENhbGVuZGFyIEdyaWQgLS0+XG4gICAgPGRpdiBjbGFzcz1cImNhbGVuZGFyLWdyaWRcIj5cbiAgICAgIDwhLS0gV2VlayBEYXlzIEhlYWRlciAtLT5cbiAgICAgIDxkaXYgY2xhc3M9XCJ3ZWVrLWhlYWRlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwid2Vlay1kYXlcIiAqbmdGb3I9XCJsZXQgZGF5IG9mIHdlZWtEYXlzXCI+e3sgZGF5IH19PC9kaXY+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPCEtLSBDYWxlbmRhciBEYXlzIC0tPlxuICAgICAgPGRpdiBjbGFzcz1cImNhbGVuZGFyLWJvZHlcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImNhbGVuZGFyLXdlZWtcIiAqbmdGb3I9XCJsZXQgd2VlayBvZiBjYWxlbmRhclwiPlxuICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICBjbGFzcz1cImNhbGVuZGFyLWRheVwiXG4gICAgICAgICAgICAqbmdGb3I9XCJsZXQgZGF0ZSBvZiB3ZWVrXCJcbiAgICAgICAgICAgIFtjbGFzcy50b2RheV09XCJpc1RvZGF5KGRhdGUpXCJcbiAgICAgICAgICAgIFtjbGFzcy5zZWxlY3RlZF09XCJpc1NlbGVjdGVkKGRhdGUpXCJcbiAgICAgICAgICAgIFtjbGFzcy5vdGhlci1tb250aF09XCIhaXNDdXJyZW50TW9udGgoZGF0ZSlcIlxuICAgICAgICAgICAgW2NsYXNzLmNsaWNrYWJsZV09XCJhbGxvd0RhdGVTZWxlY3Rpb25cIlxuICAgICAgICAgICAgKGNsaWNrKT1cImFsbG93RGF0ZVNlbGVjdGlvbiA/IG9uRGF0ZVNlbGVjdGVkKHtkYXRlOiBkYXRlfSkgOiBudWxsXCI+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkYXktbnVtYmVyXCI+e3sgZGF0ZS5nZXREYXRlKCkgfX08L2Rpdj5cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgPCEtLSBFdmVudCBJbmRpY2F0b3JzIC0tPlxuICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgY2xhc3M9XCJldmVudC1pbmRpY2F0b3JzXCIgXG4gICAgICAgICAgICAgICpuZ0lmPVwic2hvd0V2ZW50SW5kaWNhdG9ycyAmJiBnZXRFdmVudHNGb3JEYXRlKGRhdGUpLmxlbmd0aCA+IDBcIj5cbiAgICAgICAgICAgICAgPGRpdiBcbiAgICAgICAgICAgICAgICBjbGFzcz1cImV2ZW50LWRvdFwiXG4gICAgICAgICAgICAgICAgKm5nRm9yPVwibGV0IGV2ZW50IG9mIGdldEV2ZW50c0ZvckRhdGUoZGF0ZSkuc2xpY2UoMCwgMylcIlxuICAgICAgICAgICAgICAgIFtjbGFzc109XCInZXZlbnQtZG90ICcgKyAoZXZlbnQudHlwZSB8fCAnb3RoZXInKVwiXG4gICAgICAgICAgICAgICAgW3N0eWxlLmJhY2tncm91bmQtY29sb3JdPVwiZ2V0RXZlbnRDb2xvcihldmVudCkucHJpbWFyeVwiPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPCEtLSBFdmVudHMgUGFuZWwgKFJpZ2h0IFNpZGUpIC0tPlxuICAgIDxkaXYgY2xhc3M9XCJldmVudHMtcGFuZWxcIiAqbmdJZj1cImdldEV2ZW50c0ZvckRhdGUoc2VsZWN0ZWREYXRlKS5sZW5ndGggPiAwXCI+XG4gICAgICA8ZGl2IGNsYXNzPVwiZGF0ZS1oZWFkZXJcIj5cbiAgICAgICAgPGgzIGNsYXNzPVwiZGF0ZS10aXRsZVwiPnt7IGZvcm1hdFNlbGVjdGVkRGF0ZSgpIH19PC9oMz5cbiAgICAgIDwvZGl2PlxuICAgICAgXG5cbiAgICAgIDxkaXYgY2xhc3M9XCJldmVudHMtcGFuZWwtd3JhcHBlclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtaXRlbVwiIFxuICAgICAgICAqbmdGb3I9XCJsZXQgZXZlbnQgb2YgZ2V0RXZlbnRzRm9yRGF0ZShzZWxlY3RlZERhdGUpXCJcbiAgICAgICAgKGNsaWNrKT1cIm9uRXZlbnRDbGlja2VkKHtldmVudDoge21ldGE6IHtvcmlnaW5hbEV2ZW50OiBldmVudH19fSlcIlxuICAgICAgICBbc3R5bGUuYm9yZGVyLWxlZnQtY29sb3JdPVwiZ2V0RXZlbnRDb2xvcihldmVudCkucHJpbWFyeVwiPlxuICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtY29udGVudFwiPlxuICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC10aXRsZVwiPnt7IGV2ZW50LnRpdGxlIH19PC9kaXY+XG4gICAgICAgPGRpdiBjbGFzcz1cImV2ZW50LWRlc2NyaXB0aW9uXCIgKm5nSWY9XCJldmVudC5kZXNjcmlwdGlvblwiPnt7IGV2ZW50LmRlc2NyaXB0aW9uIH19PC9kaXY+XG4gICAgICAgPGRpdiBjbGFzcz1cImV2ZW50LXRpbWVcIj5cbiAgICAgICAgIDxzcGFuICpuZ0lmPVwiZXZlbnQuYWxsRGF5XCI+QWxsLWRheTwvc3Bhbj5cbiAgICAgICAgIDxzcGFuICpuZ0lmPVwiIWV2ZW50LmFsbERheVwiPnt7IGZvcm1hdEV2ZW50VGltZShldmVudCkgfX08L3NwYW4+XG4gICAgICAgPC9kaXY+XG4gICAgIDwvZGl2PlxuICAgPC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDwhLS0gTm8gRXZlbnRzIE1lc3NhZ2UgKFJpZ2h0IFNpZGUpIC0tPlxuICAgIDxkaXYgY2xhc3M9XCJuby1ldmVudHMtcGFuZWxcIiAqbmdJZj1cImdldEV2ZW50c0ZvckRhdGUoc2VsZWN0ZWREYXRlKS5sZW5ndGggPT09IDBcIj5cbiAgICAgIDxwPk5vIGV2ZW50cyBmb3Ige3sgZm9ybWF0U2VsZWN0ZWREYXRlKCkgfX08L3A+XG4gICAgPC9kaXY+XG4gIDwvZGl2PlxuXG4gIDwhLS0gRXZlbnRzIExpc3QgKEJvdHRvbSAtIE1vYmlsZS9Db21wYWN0KSAtLT5cbiAgPGRpdiBjbGFzcz1cImV2ZW50cy1saXN0LWJvdHRvbVwiICpuZ0lmPVwiZ2V0RXZlbnRzRm9yRGF0ZShzZWxlY3RlZERhdGUpLmxlbmd0aCA+IDBcIj5cbiAgICA8ZGl2IGNsYXNzPVwiZGF0ZS1oZWFkZXJcIj5cbiAgICAgIDxoMyBjbGFzcz1cImRhdGUtdGl0bGVcIj57eyBmb3JtYXRTZWxlY3RlZERhdGUoKSB9fTwvaDM+XG4gICAgPC9kaXY+XG4gICAgXG4gICAgPGRpdiBjbGFzcz1cImV2ZW50LWl0ZW1cIiBcbiAgICAgICAgICpuZ0Zvcj1cImxldCBldmVudCBvZiBnZXRFdmVudHNGb3JEYXRlKHNlbGVjdGVkRGF0ZSlcIlxuICAgICAgICAgKGNsaWNrKT1cIm9uRXZlbnRDbGlja2VkKHtldmVudDoge21ldGE6IHtvcmlnaW5hbEV2ZW50OiBldmVudH19fSlcIlxuICAgICAgICAgW3N0eWxlLmJvcmRlci1sZWZ0LWNvbG9yXT1cImdldEV2ZW50Q29sb3IoZXZlbnQpLnByaW1hcnlcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJldmVudC1jb250ZW50XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC10aXRsZVwiPnt7IGV2ZW50LnRpdGxlIH19PC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJldmVudC1kZXNjcmlwdGlvblwiICpuZ0lmPVwiZXZlbnQuZGVzY3JpcHRpb25cIj57eyBldmVudC5kZXNjcmlwdGlvbiB9fTwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZXZlbnQtdGltZVwiPlxuICAgICAgICAgIDxzcGFuICpuZ0lmPVwiZXZlbnQuYWxsRGF5XCI+QWxsLWRheTwvc3Bhbj5cbiAgICAgICAgICA8c3BhbiAqbmdJZj1cIiFldmVudC5hbGxEYXlcIj57eyBmb3JtYXRFdmVudFRpbWUoZXZlbnQpIH19PC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8IS0tIE5vIEV2ZW50cyBNZXNzYWdlIChCb3R0b20pIC0tPlxuICA8ZGl2IGNsYXNzPVwibm8tZXZlbnRzLWJvdHRvbVwiICpuZ0lmPVwiZ2V0RXZlbnRzRm9yRGF0ZShzZWxlY3RlZERhdGUpLmxlbmd0aCA9PT0gMFwiPlxuICAgIDxwPk5vIGV2ZW50cyBmb3Ige3sgZm9ybWF0U2VsZWN0ZWREYXRlKCkgfX08L3A+XG4gIDwvZGl2PlxuPC9kaXY+ICJdfQ==