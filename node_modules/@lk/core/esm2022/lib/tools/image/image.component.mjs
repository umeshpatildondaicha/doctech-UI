import { Component, Input, Output, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';
import * as i0 from "@angular/core";
export class ImageComponent {
    constructor() {
        this.src = undefined;
        this.alt = '';
        this.width = '';
        this.height = '';
        this.class = '';
        this.style = '';
        this.loading = 'lazy';
        this.decoding = 'async';
        this.crossorigin = undefined;
        this.config = undefined;
        this.clickable = false;
        this.imageLoad = new EventEmitter();
        this.imageError = new EventEmitter();
        this.imageClick = new EventEmitter();
        // Cached style to prevent repeated method calls
        this.cachedStyle = ''; // Public so template can access it directly
        this.lastWidth = '';
        this.lastHeight = '';
        this.lastStyle = '';
    }
    ngOnInit() {
        // If config is provided, override individual inputs
        if (this.config) {
            this.src = this.config.src || this.src;
            this.alt = this.config.alt || this.alt;
            this.width = this.config.width || this.width;
            this.height = this.config.height || this.height;
            this.class = this.config.class || this.class;
            this.style = this.config.style || this.style;
            this.loading = this.config.loading || this.loading;
            this.decoding = this.config.decoding || this.decoding;
            this.crossorigin = this.config.crossorigin || this.crossorigin;
        }
        this.updateCachedStyle();
    }
    ngOnChanges() {
        // Update cached style when inputs change
        if (this.width !== this.lastWidth || this.height !== this.lastHeight || this.style !== this.lastStyle) {
            this.updateCachedStyle();
            this.lastWidth = this.width;
            this.lastHeight = this.height;
            this.lastStyle = this.style;
        }
    }
    updateCachedStyle() {
        let style = this.style || '';
        if (this.width) {
            style += `width: ${typeof this.width === 'number' ? this.width + 'px' : this.width}; `;
        }
        if (this.height) {
            style += `height: ${typeof this.height === 'number' ? this.height + 'px' : this.height}; `;
        }
        this.cachedStyle = style.trim();
    }
    getImageStyle() {
        return this.cachedStyle;
    }
    onImageLoad(event) {
        this.imageLoad.emit(event);
    }
    onImageError(event) {
        this.imageError.emit(event);
    }
    onImageClick(event) {
        if (this.clickable) {
            this.imageClick.emit(event);
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: ImageComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.12", type: ImageComponent, isStandalone: true, selector: "app-image", inputs: { src: "src", alt: "alt", width: "width", height: "height", class: "class", style: "style", loading: "loading", decoding: "decoding", crossorigin: "crossorigin", config: "config", clickable: "clickable" }, outputs: { imageLoad: "imageLoad", imageError: "imageError", imageClick: "imageClick" }, usesOnChanges: true, ngImport: i0, template: "<img \n  [src]=\"src\" \n  [alt]=\"alt\"\n  [class]=\"class + (clickable ? ' clickable' : '')\"\n  [style]=\"cachedStyle\"\n  [loading]=\"loading\"\n  [decoding]=\"decoding\"\n  [attr.crossorigin]=\"crossorigin\"\n  (error)=\"onImageError($event)\"\n  (load)=\"onImageLoad($event)\"\n  (click)=\"onImageClick($event)\"\n  role=\"img\"\n  [attr.aria-label]=\"alt\"> ", styles: [":host{display:inline-block}img{max-width:100%;height:auto;display:block;border-radius:4px;transition:opacity .3s ease,transform .2s ease}img:hover{transform:scale(1.02)}img.rounded{border-radius:8px}img.circle{border-radius:50%}img.shadow{box-shadow:0 2px 8px #0000001a}img.border{border:1px solid #e0e0e0}img.clickable{cursor:pointer}img.clickable:hover{transform:scale(1.05);box-shadow:0 4px 12px #00000026}img.loading{opacity:.7}img.error{opacity:.5;filter:grayscale(100%)}.responsive{width:100%;height:auto}.contain{object-fit:contain}.cover{object-fit:cover}.fill{object-fit:fill}.small{max-width:100px}.medium{max-width:200px}.large{max-width:400px}.xlarge{max-width:600px}.aspect-ratio-16-9{position:relative;width:100%;height:0;padding-bottom:56.25%}.aspect-ratio-16-9 img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.aspect-ratio-4-3{position:relative;width:100%;height:0;padding-bottom:75%}.aspect-ratio-4-3 img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.aspect-ratio-1-1{position:relative;width:100%;height:0;padding-bottom:100%}.aspect-ratio-1-1 img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: ImageComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-image', standalone: true, imports: [CommonModule], template: "<img \n  [src]=\"src\" \n  [alt]=\"alt\"\n  [class]=\"class + (clickable ? ' clickable' : '')\"\n  [style]=\"cachedStyle\"\n  [loading]=\"loading\"\n  [decoding]=\"decoding\"\n  [attr.crossorigin]=\"crossorigin\"\n  (error)=\"onImageError($event)\"\n  (load)=\"onImageLoad($event)\"\n  (click)=\"onImageClick($event)\"\n  role=\"img\"\n  [attr.aria-label]=\"alt\"> ", styles: [":host{display:inline-block}img{max-width:100%;height:auto;display:block;border-radius:4px;transition:opacity .3s ease,transform .2s ease}img:hover{transform:scale(1.02)}img.rounded{border-radius:8px}img.circle{border-radius:50%}img.shadow{box-shadow:0 2px 8px #0000001a}img.border{border:1px solid #e0e0e0}img.clickable{cursor:pointer}img.clickable:hover{transform:scale(1.05);box-shadow:0 4px 12px #00000026}img.loading{opacity:.7}img.error{opacity:.5;filter:grayscale(100%)}.responsive{width:100%;height:auto}.contain{object-fit:contain}.cover{object-fit:cover}.fill{object-fit:fill}.small{max-width:100px}.medium{max-width:200px}.large{max-width:400px}.xlarge{max-width:600px}.aspect-ratio-16-9{position:relative;width:100%;height:0;padding-bottom:56.25%}.aspect-ratio-16-9 img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.aspect-ratio-4-3{position:relative;width:100%;height:0;padding-bottom:75%}.aspect-ratio-4-3 img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}.aspect-ratio-1-1{position:relative;width:100%;height:0;padding-bottom:100%}.aspect-ratio-1-1 img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}\n"] }]
        }], propDecorators: { src: [{
                type: Input
            }], alt: [{
                type: Input
            }], width: [{
                type: Input
            }], height: [{
                type: Input
            }], class: [{
                type: Input
            }], style: [{
                type: Input
            }], loading: [{
                type: Input
            }], decoding: [{
                type: Input
            }], crossorigin: [{
                type: Input
            }], config: [{
                type: Input
            }], clickable: [{
                type: Input
            }], imageLoad: [{
                type: Output
            }], imageError: [{
                type: Output
            }], imageClick: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1hZ2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29tbW9uLWxpYnMvY29yZS9zcmMvbGliL3Rvb2xzL2ltYWdlL2ltYWdlLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9pbWFnZS9pbWFnZS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFxQixNQUFNLGVBQWUsQ0FBQztBQUMxRixPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7O0FBcUIvQyxNQUFNLE9BQU8sY0FBYztJQVAzQjtRQVFXLFFBQUcsR0FBdUIsU0FBUyxDQUFDO1FBQ3BDLFFBQUcsR0FBVyxFQUFFLENBQUM7UUFDakIsVUFBSyxHQUFvQixFQUFFLENBQUM7UUFDNUIsV0FBTSxHQUFvQixFQUFFLENBQUM7UUFDN0IsVUFBSyxHQUFXLEVBQUUsQ0FBQztRQUNuQixVQUFLLEdBQVcsRUFBRSxDQUFDO1FBQ25CLFlBQU8sR0FBcUIsTUFBTSxDQUFDO1FBQ25DLGFBQVEsR0FBOEIsT0FBTyxDQUFDO1FBQzlDLGdCQUFXLEdBQWdELFNBQVMsQ0FBQztRQUNyRSxXQUFNLEdBQTRCLFNBQVMsQ0FBQztRQUM1QyxjQUFTLEdBQVksS0FBSyxDQUFDO1FBRTFCLGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBUyxDQUFDO1FBQ3RDLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBUyxDQUFDO1FBQ3ZDLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBUyxDQUFDO1FBRWpELGdEQUFnRDtRQUNoRCxnQkFBVyxHQUFXLEVBQUUsQ0FBQyxDQUFDLDRDQUE0QztRQUM5RCxjQUFTLEdBQW9CLEVBQUUsQ0FBQztRQUNoQyxl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SUFDN0IsQ0FBQztJQUVELFlBQVksQ0FBQyxLQUFZO1FBQ3ZCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzlCLENBQUM7SUFFRCxZQUFZLENBQUMsS0FBWTtRQUN2QixJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUNuQixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM5QixDQUFDO0lBQ0gsQ0FBQzsrR0EvRVUsY0FBYzttR0FBZCxjQUFjLHlZQ3RCM0IsK1dBWTJCLGd1Q0RNZixZQUFZOzs0RkFJWCxjQUFjO2tCQVAxQixTQUFTOytCQUNFLFdBQVcsY0FDVCxJQUFJLFdBQ1AsQ0FBQyxZQUFZLENBQUM7OEJBS2QsR0FBRztzQkFBWCxLQUFLO2dCQUNHLEdBQUc7c0JBQVgsS0FBSztnQkFDRyxLQUFLO3NCQUFiLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLO2dCQUNHLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxLQUFLO3NCQUFiLEtBQUs7Z0JBQ0csT0FBTztzQkFBZixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csV0FBVztzQkFBbkIsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFFSSxTQUFTO3NCQUFsQixNQUFNO2dCQUNHLFVBQVU7c0JBQW5CLE1BQU07Z0JBQ0csVUFBVTtzQkFBbkIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkluaXQsIE9uQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZUNvbmZpZyB7XG4gIHNyYzogc3RyaW5nO1xuICBhbHQ/OiBzdHJpbmc7XG4gIHdpZHRoPzogc3RyaW5nIHwgbnVtYmVyO1xuICBoZWlnaHQ/OiBzdHJpbmcgfCBudW1iZXI7XG4gIGNsYXNzPzogc3RyaW5nO1xuICBzdHlsZT86IHN0cmluZztcbiAgbG9hZGluZz86ICdsYXp5JyB8ICdlYWdlcic7XG4gIGRlY29kaW5nPzogJ2FzeW5jJyB8ICdzeW5jJyB8ICdhdXRvJztcbiAgY3Jvc3NvcmlnaW4/OiAnYW5vbnltb3VzJyB8ICd1c2UtY3JlZGVudGlhbHMnO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdhcHAtaW1hZ2UnLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlXSxcbiAgdGVtcGxhdGVVcmw6ICcuL2ltYWdlLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmxzOiBbJy4vaW1hZ2UuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBJbWFnZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgQElucHV0KCkgc3JjOiBzdHJpbmcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpIGFsdDogc3RyaW5nID0gJyc7XG4gIEBJbnB1dCgpIHdpZHRoOiBzdHJpbmcgfCBudW1iZXIgPSAnJztcbiAgQElucHV0KCkgaGVpZ2h0OiBzdHJpbmcgfCBudW1iZXIgPSAnJztcbiAgQElucHV0KCkgY2xhc3M6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKSBzdHlsZTogc3RyaW5nID0gJyc7XG4gIEBJbnB1dCgpIGxvYWRpbmc6ICdsYXp5JyB8ICdlYWdlcicgPSAnbGF6eSc7XG4gIEBJbnB1dCgpIGRlY29kaW5nOiAnYXN5bmMnIHwgJ3N5bmMnIHwgJ2F1dG8nID0gJ2FzeW5jJztcbiAgQElucHV0KCkgY3Jvc3NvcmlnaW46ICdhbm9ueW1vdXMnIHwgJ3VzZS1jcmVkZW50aWFscycgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpIGNvbmZpZzogSW1hZ2VDb25maWcgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG4gIEBJbnB1dCgpIGNsaWNrYWJsZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIEBPdXRwdXQoKSBpbWFnZUxvYWQgPSBuZXcgRXZlbnRFbWl0dGVyPEV2ZW50PigpO1xuICBAT3V0cHV0KCkgaW1hZ2VFcnJvciA9IG5ldyBFdmVudEVtaXR0ZXI8RXZlbnQ+KCk7XG4gIEBPdXRwdXQoKSBpbWFnZUNsaWNrID0gbmV3IEV2ZW50RW1pdHRlcjxFdmVudD4oKTtcblxuICAvLyBDYWNoZWQgc3R5bGUgdG8gcHJldmVudCByZXBlYXRlZCBtZXRob2QgY2FsbHNcbiAgY2FjaGVkU3R5bGU6IHN0cmluZyA9ICcnOyAvLyBQdWJsaWMgc28gdGVtcGxhdGUgY2FuIGFjY2VzcyBpdCBkaXJlY3RseVxuICBwcml2YXRlIGxhc3RXaWR0aDogc3RyaW5nIHwgbnVtYmVyID0gJyc7XG4gIHByaXZhdGUgbGFzdEhlaWdodDogc3RyaW5nIHwgbnVtYmVyID0gJyc7XG4gIHByaXZhdGUgbGFzdFN0eWxlOiBzdHJpbmcgPSAnJztcblxuICBuZ09uSW5pdCgpIHtcbiAgICAvLyBJZiBjb25maWcgaXMgcHJvdmlkZWQsIG92ZXJyaWRlIGluZGl2aWR1YWwgaW5wdXRzXG4gICAgaWYgKHRoaXMuY29uZmlnKSB7XG4gICAgICB0aGlzLnNyYyA9IHRoaXMuY29uZmlnLnNyYyB8fCB0aGlzLnNyYztcbiAgICAgIHRoaXMuYWx0ID0gdGhpcy5jb25maWcuYWx0IHx8IHRoaXMuYWx0O1xuICAgICAgdGhpcy53aWR0aCA9IHRoaXMuY29uZmlnLndpZHRoIHx8IHRoaXMud2lkdGg7XG4gICAgICB0aGlzLmhlaWdodCA9IHRoaXMuY29uZmlnLmhlaWdodCB8fCB0aGlzLmhlaWdodDtcbiAgICAgIHRoaXMuY2xhc3MgPSB0aGlzLmNvbmZpZy5jbGFzcyB8fCB0aGlzLmNsYXNzO1xuICAgICAgdGhpcy5zdHlsZSA9IHRoaXMuY29uZmlnLnN0eWxlIHx8IHRoaXMuc3R5bGU7XG4gICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLmNvbmZpZy5sb2FkaW5nIHx8IHRoaXMubG9hZGluZztcbiAgICAgIHRoaXMuZGVjb2RpbmcgPSB0aGlzLmNvbmZpZy5kZWNvZGluZyB8fCB0aGlzLmRlY29kaW5nO1xuICAgICAgdGhpcy5jcm9zc29yaWdpbiA9IHRoaXMuY29uZmlnLmNyb3Nzb3JpZ2luIHx8IHRoaXMuY3Jvc3NvcmlnaW47XG4gICAgfVxuICAgIHRoaXMudXBkYXRlQ2FjaGVkU3R5bGUoKTtcbiAgfVxuXG4gIG5nT25DaGFuZ2VzKCkge1xuICAgIC8vIFVwZGF0ZSBjYWNoZWQgc3R5bGUgd2hlbiBpbnB1dHMgY2hhbmdlXG4gICAgaWYgKHRoaXMud2lkdGggIT09IHRoaXMubGFzdFdpZHRoIHx8IHRoaXMuaGVpZ2h0ICE9PSB0aGlzLmxhc3RIZWlnaHQgfHwgdGhpcy5zdHlsZSAhPT0gdGhpcy5sYXN0U3R5bGUpIHtcbiAgICAgIHRoaXMudXBkYXRlQ2FjaGVkU3R5bGUoKTtcbiAgICAgIHRoaXMubGFzdFdpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgIHRoaXMubGFzdEhlaWdodCA9IHRoaXMuaGVpZ2h0O1xuICAgICAgdGhpcy5sYXN0U3R5bGUgPSB0aGlzLnN0eWxlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlQ2FjaGVkU3R5bGUoKTogdm9pZCB7XG4gICAgbGV0IHN0eWxlID0gdGhpcy5zdHlsZSB8fCAnJztcbiAgICBcbiAgICBpZiAodGhpcy53aWR0aCkge1xuICAgICAgc3R5bGUgKz0gYHdpZHRoOiAke3R5cGVvZiB0aGlzLndpZHRoID09PSAnbnVtYmVyJyA/IHRoaXMud2lkdGggKyAncHgnIDogdGhpcy53aWR0aH07IGA7XG4gICAgfVxuICAgIFxuICAgIGlmICh0aGlzLmhlaWdodCkge1xuICAgICAgc3R5bGUgKz0gYGhlaWdodDogJHt0eXBlb2YgdGhpcy5oZWlnaHQgPT09ICdudW1iZXInID8gdGhpcy5oZWlnaHQgKyAncHgnIDogdGhpcy5oZWlnaHR9OyBgO1xuICAgIH1cbiAgICBcbiAgICB0aGlzLmNhY2hlZFN0eWxlID0gc3R5bGUudHJpbSgpO1xuICB9XG5cbiAgZ2V0SW1hZ2VTdHlsZSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmNhY2hlZFN0eWxlO1xuICB9XG5cbiAgb25JbWFnZUxvYWQoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5pbWFnZUxvYWQuZW1pdChldmVudCk7XG4gIH1cblxuICBvbkltYWdlRXJyb3IoZXZlbnQ6IEV2ZW50KTogdm9pZCB7XG4gICAgdGhpcy5pbWFnZUVycm9yLmVtaXQoZXZlbnQpO1xuICB9XG5cbiAgb25JbWFnZUNsaWNrKGV2ZW50OiBFdmVudCk6IHZvaWQge1xuICAgIGlmICh0aGlzLmNsaWNrYWJsZSkge1xuICAgICAgdGhpcy5pbWFnZUNsaWNrLmVtaXQoZXZlbnQpO1xuICAgIH1cbiAgfVxufSAiLCI8aW1nIFxuICBbc3JjXT1cInNyY1wiIFxuICBbYWx0XT1cImFsdFwiXG4gIFtjbGFzc109XCJjbGFzcyArIChjbGlja2FibGUgPyAnIGNsaWNrYWJsZScgOiAnJylcIlxuICBbc3R5bGVdPVwiY2FjaGVkU3R5bGVcIlxuICBbbG9hZGluZ109XCJsb2FkaW5nXCJcbiAgW2RlY29kaW5nXT1cImRlY29kaW5nXCJcbiAgW2F0dHIuY3Jvc3NvcmlnaW5dPVwiY3Jvc3NvcmlnaW5cIlxuICAoZXJyb3IpPVwib25JbWFnZUVycm9yKCRldmVudClcIlxuICAobG9hZCk9XCJvbkltYWdlTG9hZCgkZXZlbnQpXCJcbiAgKGNsaWNrKT1cIm9uSW1hZ2VDbGljaygkZXZlbnQpXCJcbiAgcm9sZT1cImltZ1wiXG4gIFthdHRyLmFyaWEtbGFiZWxdPVwiYWx0XCI+ICJdfQ==