import { Component, Input, ViewChild } from '@angular/core';
import { CommonModule } from '@angular/common';
import * as i0 from "@angular/core";
import * as i1 from "../../services/chart.service";
export class ChartComponent {
    constructor(chartService) {
        this.chartService = chartService;
        this.height = '100%';
        this.width = '100%';
        this.chartInstance = null;
    }
    ngOnInit() {
        if (this.chartOptions$) {
            this.subscription = this.chartOptions$.subscribe(options => {
                this.renderChart(options);
            });
        }
        else if (this.chartOptions) {
            this.renderChart(this.chartOptions);
        }
    }
    ngOnChanges(changes) {
        if (changes['chartOptions'] && this.chartOptions && !this.chartOptions$) {
            this.renderChart(this.chartOptions);
        }
    }
    ngOnDestroy() {
        if (this.subscription) {
            this.subscription.unsubscribe();
        }
        if (this.chartInstance) {
            this.chartInstance.destroy();
        }
    }
    renderChart(options) {
        if (this.chartContainer) {
            if (this.chartInstance) {
                this.chartInstance.destroy();
            }
            this.chartInstance = this.chartService.createChart(this.chartContainer.nativeElement, options);
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: ChartComponent, deps: [{ token: i1.ChartService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.12", type: ChartComponent, isStandalone: true, selector: "app-chart", inputs: { chartOptions$: "chartOptions$", chartOptions: "chartOptions", height: "height", width: "width" }, viewQueries: [{ propertyName: "chartContainer", first: true, predicate: ["chartContainer"], descendants: true, static: true }], usesOnChanges: true, ngImport: i0, template: "<div class=\"chart-container\" [style.width]=\"width\" [style.height]=\"height\">\n  <div #chartContainer class=\"chart-content\"></div>\n</div>\n\n", styles: [".chart-container{width:100%;border:1px solid #e0e0e0;border-radius:4px;padding:16px;background-color:#fff}.chart-content{width:100%;height:100%}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: ChartComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-chart', standalone: true, imports: [CommonModule], template: "<div class=\"chart-container\" [style.width]=\"width\" [style.height]=\"height\">\n  <div #chartContainer class=\"chart-content\"></div>\n</div>\n\n", styles: [".chart-container{width:100%;border:1px solid #e0e0e0;border-radius:4px;padding:16px;background-color:#fff}.chart-content{width:100%;height:100%}\n"] }]
        }], ctorParameters: () => [{ type: i1.ChartService }], propDecorators: { chartOptions$: [{
                type: Input
            }], chartOptions: [{
                type: Input
            }], height: [{
                type: Input
            }], width: [{
                type: Input
            }], chartContainer: [{
                type: ViewChild,
                args: ['chartContainer', { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY2hhcnQuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29tbW9uLWxpYnMvY29yZS9zcmMvbGliL3Rvb2xzL2NoYXJ0L2NoYXJ0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9jaGFydC9jaGFydC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBZ0QsU0FBUyxFQUFhLE1BQU0sZUFBZSxDQUFDO0FBQ3JILE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQzs7O0FBWS9DLE1BQU0sT0FBTyxjQUFjO0lBV3pCLFlBQW9CLFlBQTBCO1FBQTFCLGlCQUFZLEdBQVosWUFBWSxDQUFjO1FBUnJDLFdBQU0sR0FBVyxNQUFNLENBQUM7UUFDeEIsVUFBSyxHQUFXLE1BQU0sQ0FBQztRQUl4QixrQkFBYSxHQUFRLElBQUksQ0FBQztJQUdlLENBQUM7SUFFbEQsUUFBUTtRQUNOLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLEVBQUU7Z0JBQ3pELElBQUksQ0FBQyxXQUFXLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDNUIsQ0FBQyxDQUFDLENBQUM7UUFDTCxDQUFDO2FBQU0sSUFBSSxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7WUFDN0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDdEMsQ0FBQztJQUNILENBQUM7SUFFRCxXQUFXLENBQUMsT0FBc0I7UUFDaEMsSUFBSSxPQUFPLENBQUMsY0FBYyxDQUFDLElBQUksSUFBSSxDQUFDLFlBQVksSUFBSSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUN4RSxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUN0QyxDQUFDO0lBQ0gsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQztZQUN0QixJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ2xDLENBQUM7UUFDRCxJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztZQUN2QixJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDO1FBQy9CLENBQUM7SUFDSCxDQUFDO0lBRU8sV0FBVyxDQUFDLE9BQXFCO1FBQ3ZDLElBQUksSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ3hCLElBQUksSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO2dCQUN2QixJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBQy9CLENBQUM7WUFDRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUNoRCxJQUFJLENBQUMsY0FBYyxDQUFDLGFBQWEsRUFDakMsT0FBTyxDQUNSLENBQUM7UUFDSixDQUFDO0lBQ0gsQ0FBQzsrR0FoRFUsY0FBYzttR0FBZCxjQUFjLHNVQ2IzQixzSkFJQSwyTURLWSxZQUFZOzs0RkFJWCxjQUFjO2tCQVAxQixTQUFTOytCQUNFLFdBQVcsY0FDVCxJQUFJLFdBQ1AsQ0FBQyxZQUFZLENBQUM7aUZBS2QsYUFBYTtzQkFBckIsS0FBSztnQkFDRyxZQUFZO3NCQUFwQixLQUFLO2dCQUNHLE1BQU07c0JBQWQsS0FBSztnQkFDRyxLQUFLO3NCQUFiLEtBQUs7Z0JBRXlDLGNBQWM7c0JBQTVELFNBQVM7dUJBQUMsZ0JBQWdCLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT25Jbml0LCBPbkNoYW5nZXMsIFNpbXBsZUNoYW5nZXMsIEVsZW1lbnRSZWYsIFZpZXdDaGlsZCwgT25EZXN0cm95IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBDaGFydFNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9jaGFydC5zZXJ2aWNlJztcbmltcG9ydCB7IENoYXJ0T3B0aW9ucyB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvY2hhcnQuaW50ZXJmYWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYXBwLWNoYXJ0JyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZV0sXG4gIHRlbXBsYXRlVXJsOiAnLi9jaGFydC5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsOiAnLi9jaGFydC5jb21wb25lbnQuc2Nzcydcbn0pXG5leHBvcnQgY2xhc3MgQ2hhcnRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcywgT25EZXN0cm95IHtcbiAgQElucHV0KCkgY2hhcnRPcHRpb25zJCE6IE9ic2VydmFibGU8Q2hhcnRPcHRpb25zPjtcbiAgQElucHV0KCkgY2hhcnRPcHRpb25zPzogQ2hhcnRPcHRpb25zO1xuICBASW5wdXQoKSBoZWlnaHQ6IHN0cmluZyA9ICcxMDAlJztcbiAgQElucHV0KCkgd2lkdGg6IHN0cmluZyA9ICcxMDAlJztcblxuICBAVmlld0NoaWxkKCdjaGFydENvbnRhaW5lcicsIHsgc3RhdGljOiB0cnVlIH0pIGNoYXJ0Q29udGFpbmVyITogRWxlbWVudFJlZjtcblxuICBwcml2YXRlIGNoYXJ0SW5zdGFuY2U6IGFueSA9IG51bGw7XG4gIHByaXZhdGUgc3Vic2NyaXB0aW9uPzogU3Vic2NyaXB0aW9uO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgY2hhcnRTZXJ2aWNlOiBDaGFydFNlcnZpY2UpIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgaWYgKHRoaXMuY2hhcnRPcHRpb25zJCkge1xuICAgICAgdGhpcy5zdWJzY3JpcHRpb24gPSB0aGlzLmNoYXJ0T3B0aW9ucyQuc3Vic2NyaWJlKG9wdGlvbnMgPT4ge1xuICAgICAgICB0aGlzLnJlbmRlckNoYXJ0KG9wdGlvbnMpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmICh0aGlzLmNoYXJ0T3B0aW9ucykge1xuICAgICAgdGhpcy5yZW5kZXJDaGFydCh0aGlzLmNoYXJ0T3B0aW9ucyk7XG4gICAgfVxuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzWydjaGFydE9wdGlvbnMnXSAmJiB0aGlzLmNoYXJ0T3B0aW9ucyAmJiAhdGhpcy5jaGFydE9wdGlvbnMkKSB7XG4gICAgICB0aGlzLnJlbmRlckNoYXJ0KHRoaXMuY2hhcnRPcHRpb25zKTtcbiAgICB9XG4gIH1cblxuICBuZ09uRGVzdHJveSgpIHtcbiAgICBpZiAodGhpcy5zdWJzY3JpcHRpb24pIHtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmNoYXJ0SW5zdGFuY2UpIHtcbiAgICAgIHRoaXMuY2hhcnRJbnN0YW5jZS5kZXN0cm95KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJDaGFydChvcHRpb25zOiBDaGFydE9wdGlvbnMpIHtcbiAgICBpZiAodGhpcy5jaGFydENvbnRhaW5lcikge1xuICAgICAgaWYgKHRoaXMuY2hhcnRJbnN0YW5jZSkge1xuICAgICAgICB0aGlzLmNoYXJ0SW5zdGFuY2UuZGVzdHJveSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5jaGFydEluc3RhbmNlID0gdGhpcy5jaGFydFNlcnZpY2UuY3JlYXRlQ2hhcnQoXG4gICAgICAgIHRoaXMuY2hhcnRDb250YWluZXIubmF0aXZlRWxlbWVudCxcbiAgICAgICAgb3B0aW9uc1xuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cblxuIiwiPGRpdiBjbGFzcz1cImNoYXJ0LWNvbnRhaW5lclwiIFtzdHlsZS53aWR0aF09XCJ3aWR0aFwiIFtzdHlsZS5oZWlnaHRdPVwiaGVpZ2h0XCI+XG4gIDxkaXYgI2NoYXJ0Q29udGFpbmVyIGNsYXNzPVwiY2hhcnQtY29udGVudFwiPjwvZGl2PlxuPC9kaXY+XG5cbiJdfQ==