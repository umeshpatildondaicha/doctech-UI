import { Component, Input, Output, EventEmitter, forwardRef } from '@angular/core';
import { MatFormFieldModule } from '@angular/material/form-field';
import { MatInputModule } from '@angular/material/input';
import { MatIconModule } from '@angular/material/icon';
import { MatAutocompleteModule } from '@angular/material/autocomplete';
import { FormsModule, NG_VALUE_ACCESSOR } from '@angular/forms';
import { HttpClientModule } from '@angular/common/http';
import { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';
import { Subject, of } from 'rxjs';
import { CommonModule } from '@angular/common';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "@angular/common";
import * as i3 from "@angular/material/form-field";
import * as i4 from "@angular/material/input";
import * as i5 from "@angular/material/icon";
import * as i6 from "@angular/material/autocomplete";
import * as i7 from "@angular/material/core";
export class AppInputComponent {
    constructor(http) {
        this.http = http;
        this.type = 'text';
        this.placeholder = '';
        this.value = '';
        this.disabled = false;
        this.required = false;
        this.appearance = 'outline';
        this.label = '';
        this.errorMessage = '';
        this.multiline = false;
        this.rows = 1;
        this.prefixIconSize = '24px';
        this.suffixIconSize = '24px';
        this.search = false;
        this.searchUrl = '';
        this.valueChange = new EventEmitter();
        this.searchResults = new EventEmitter();
        this.searchOptions = [];
        this.searchSubject = new Subject();
        // ControlValueAccessor implementation
        this.onChange = (value) => { };
        this.onTouched = () => { };
        this.searchSubject.pipe(debounceTime(300), distinctUntilChanged(), switchMap((searchValue) => {
            if (this.search && this.searchUrl && searchValue) {
                const url = this.searchUrl.replace('${searchValue}', encodeURIComponent(searchValue));
                return this.http.get(url);
            }
            return of([]);
        })).subscribe(results => {
            this.searchOptions = results;
            this.searchResults.emit(results);
        });
    }
    onInput(event) {
        const input = event.target;
        this.value = input.value;
        this.valueChange.emit(input.value);
        this.onChange(input.value);
        this.onTouched();
        if (this.search) {
            this.searchSubject.next(input.value);
        }
    }
    // ControlValueAccessor methods
    writeValue(value) {
        this.value = value || '';
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    setDisabledState(isDisabled) {
        this.disabled = isDisabled;
    }
    // Handle form control value changes
    onFormControlChange(value) {
        this.value = value;
        this.onChange(value);
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: AppInputComponent, deps: [{ token: i1.HttpClient }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.12", type: AppInputComponent, isStandalone: true, selector: "app-input", inputs: { type: "type", placeholder: "placeholder", value: "value", disabled: "disabled", required: "required", appearance: "appearance", label: "label", errorMessage: "errorMessage", multiline: "multiline", rows: "rows", prefixIconName: "prefixIconName", prefixIconSize: "prefixIconSize", suffixIconName: "suffixIconName", suffixIconSize: "suffixIconSize", search: "search", searchUrl: "searchUrl" }, outputs: { valueChange: "valueChange", searchResults: "searchResults" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => AppInputComponent),
                multi: true
            }
        ], ngImport: i0, template: "@if(search && !multiline) {\n  <mat-form-field [appearance]=\"appearance\" class=\"app-search-input-field\" hideRequiredMarker=\"true\">\n    <mat-label *ngIf=\"label\">{{ label }}</mat-label>\n    @if(prefixIconName) {\n      <mat-icon matPrefix [style.fontSize]=\"prefixIconSize\">{{ prefixIconName }}</mat-icon>\n    }\n    <input\n      matInput\n      [type]=\"type\"\n      [placeholder]=\"placeholder\"\n      [disabled]=\"disabled\"\n      [required]=\"required\"\n      [value]=\"value\"\n      (input)=\"onInput($event)\"\n      [matAutocomplete]=\"auto\"\n    />\n    @if(suffixIconName) {\n      <mat-icon matSuffix [style.fontSize]=\"suffixIconSize\">{{ suffixIconName }}</mat-icon>\n    }\n    <mat-error *ngIf=\"errorMessage\">{{ errorMessage }}</mat-error>\n    <mat-autocomplete #auto=\"matAutocomplete\">\n      <mat-option *ngFor=\"let option of searchOptions\" [value]=\"option\">\n        {{ option }}\n      </mat-option>\n    </mat-autocomplete>\n  </mat-form-field>\n} @else {\n  <mat-form-field [appearance]=\"appearance\" class=\"app-input-field\" hideRequiredMarker=\"true\">\n    <mat-label *ngIf=\"label\">{{ label }}</mat-label>\n    @if(prefixIconName) {\n      <mat-icon matPrefix [style.fontSize]=\"prefixIconSize\">{{ prefixIconName }}</mat-icon>\n    }\n    @if(multiline) {\n      <textarea\n        matInput\n        [placeholder]=\"placeholder\"\n        [disabled]=\"disabled\"\n        [required]=\"required\"\n        [value]=\"value\"\n        (input)=\"onInput($event)\"\n        [rows]=\"rows\">\n      </textarea>\n    } @else {\n      <input\n        matInput\n        [type]=\"type\"\n        [placeholder]=\"placeholder\"\n        [disabled]=\"disabled\"\n        [required]=\"required\"\n        [value]=\"value\"\n        (input)=\"onInput($event)\"\n      />\n    }\n    @if(suffixIconName) {\n      <mat-icon matSuffix [style.fontSize]=\"suffixIconSize\">{{ suffixIconName }}</mat-icon>\n    }\n    <mat-error *ngIf=\"errorMessage\">{{ errorMessage }}</mat-error>\n  </mat-form-field>\n}\n", styles: [".app-search-input-field{width:100%;background:#fff;border-radius:var(--input-radius);box-shadow:0 0 0 1px #ececec;transition:box-shadow .2s}.app-search-input-field .mat-mdc-form-field-flex{border-radius:2rem;background:#fff;min-height:48px;align-items:center;box-shadow:none;border:none;padding-left:.5rem;padding-right:.5rem}.app-search-input-field .mat-mdc-form-field-outline{display:none}.app-search-input-field .mat-mdc-form-field-infix{padding:0}.app-search-input-field .mat-mdc-form-field-label{display:none}.app-search-input-field .mat-mdc-input-element{font-size:1.1rem;color:#222;background:transparent;border:none;outline:none;box-shadow:none;padding:.75rem 0}.app-search-input-field .mat-mdc-input-element::placeholder{color:silver;opacity:1;font-weight:400}.app-search-input-field .mat-icon{color:#18b6b2;font-size:1.5rem!important;margin-right:.5rem;margin-left:.25rem;vertical-align:middle}.app-search-input-field .mat-mdc-form-field-subscript-wrapper{display:none!important}.app-search-input-field ::ng-deep .mdc-notched-outline__leading,.app-search-input-field ::ng-deep .mdc-notched-outline__trailing{border-color:transparent!important}.app-search-input-field ::ng-deep .mat-mdc-text-field-wrapper{height:2.5em!important}.app-search-input-field ::ng-deep .mat-mdc-form-field-flex{align-self:center;height:3.5em!important}.app-search-input-field ::ng-deep .mat-mdc-form-field-infix{padding-bottom:0!important;padding-top:.25em}.app-input-field{width:100%}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "ngmodule", type: MatFormFieldModule }, { kind: "component", type: i3.MatFormField, selector: "mat-form-field", inputs: ["hideRequiredMarker", "color", "floatLabel", "appearance", "subscriptSizing", "hintLabel"], exportAs: ["matFormField"] }, { kind: "directive", type: i3.MatLabel, selector: "mat-label" }, { kind: "directive", type: i3.MatError, selector: "mat-error, [matError]", inputs: ["id"] }, { kind: "directive", type: i3.MatPrefix, selector: "[matPrefix], [matIconPrefix], [matTextPrefix]", inputs: ["matTextPrefix"] }, { kind: "directive", type: i3.MatSuffix, selector: "[matSuffix], [matIconSuffix], [matTextSuffix]", inputs: ["matTextSuffix"] }, { kind: "ngmodule", type: MatInputModule }, { kind: "directive", type: i4.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["disabled", "id", "placeholder", "name", "required", "type", "errorStateMatcher", "aria-describedby", "value", "readonly"], exportAs: ["matInput"] }, { kind: "ngmodule", type: MatIconModule }, { kind: "component", type: i5.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "ngmodule", type: MatAutocompleteModule }, { kind: "component", type: i6.MatAutocomplete, selector: "mat-autocomplete", inputs: ["aria-label", "aria-labelledby", "displayWith", "autoActiveFirstOption", "autoSelectActiveOption", "requireSelection", "panelWidth", "disableRipple", "class", "hideSingleSelectionIndicator"], outputs: ["optionSelected", "opened", "closed", "optionActivated"], exportAs: ["matAutocomplete"] }, { kind: "component", type: i7.MatOption, selector: "mat-option", inputs: ["value", "id", "disabled"], outputs: ["onSelectionChange"], exportAs: ["matOption"] }, { kind: "directive", type: i6.MatAutocompleteTrigger, selector: "input[matAutocomplete], textarea[matAutocomplete]", inputs: ["matAutocomplete", "matAutocompletePosition", "matAutocompleteConnectedTo", "autocomplete", "matAutocompleteDisabled"], exportAs: ["matAutocompleteTrigger"] }, { kind: "ngmodule", type: FormsModule }, { kind: "ngmodule", type: HttpClientModule }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: AppInputComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-input', standalone: true, imports: [CommonModule, MatFormFieldModule, MatInputModule, MatIconModule, MatAutocompleteModule, FormsModule, HttpClientModule], providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => AppInputComponent),
                            multi: true
                        }
                    ], template: "@if(search && !multiline) {\n  <mat-form-field [appearance]=\"appearance\" class=\"app-search-input-field\" hideRequiredMarker=\"true\">\n    <mat-label *ngIf=\"label\">{{ label }}</mat-label>\n    @if(prefixIconName) {\n      <mat-icon matPrefix [style.fontSize]=\"prefixIconSize\">{{ prefixIconName }}</mat-icon>\n    }\n    <input\n      matInput\n      [type]=\"type\"\n      [placeholder]=\"placeholder\"\n      [disabled]=\"disabled\"\n      [required]=\"required\"\n      [value]=\"value\"\n      (input)=\"onInput($event)\"\n      [matAutocomplete]=\"auto\"\n    />\n    @if(suffixIconName) {\n      <mat-icon matSuffix [style.fontSize]=\"suffixIconSize\">{{ suffixIconName }}</mat-icon>\n    }\n    <mat-error *ngIf=\"errorMessage\">{{ errorMessage }}</mat-error>\n    <mat-autocomplete #auto=\"matAutocomplete\">\n      <mat-option *ngFor=\"let option of searchOptions\" [value]=\"option\">\n        {{ option }}\n      </mat-option>\n    </mat-autocomplete>\n  </mat-form-field>\n} @else {\n  <mat-form-field [appearance]=\"appearance\" class=\"app-input-field\" hideRequiredMarker=\"true\">\n    <mat-label *ngIf=\"label\">{{ label }}</mat-label>\n    @if(prefixIconName) {\n      <mat-icon matPrefix [style.fontSize]=\"prefixIconSize\">{{ prefixIconName }}</mat-icon>\n    }\n    @if(multiline) {\n      <textarea\n        matInput\n        [placeholder]=\"placeholder\"\n        [disabled]=\"disabled\"\n        [required]=\"required\"\n        [value]=\"value\"\n        (input)=\"onInput($event)\"\n        [rows]=\"rows\">\n      </textarea>\n    } @else {\n      <input\n        matInput\n        [type]=\"type\"\n        [placeholder]=\"placeholder\"\n        [disabled]=\"disabled\"\n        [required]=\"required\"\n        [value]=\"value\"\n        (input)=\"onInput($event)\"\n      />\n    }\n    @if(suffixIconName) {\n      <mat-icon matSuffix [style.fontSize]=\"suffixIconSize\">{{ suffixIconName }}</mat-icon>\n    }\n    <mat-error *ngIf=\"errorMessage\">{{ errorMessage }}</mat-error>\n  </mat-form-field>\n}\n", styles: [".app-search-input-field{width:100%;background:#fff;border-radius:var(--input-radius);box-shadow:0 0 0 1px #ececec;transition:box-shadow .2s}.app-search-input-field .mat-mdc-form-field-flex{border-radius:2rem;background:#fff;min-height:48px;align-items:center;box-shadow:none;border:none;padding-left:.5rem;padding-right:.5rem}.app-search-input-field .mat-mdc-form-field-outline{display:none}.app-search-input-field .mat-mdc-form-field-infix{padding:0}.app-search-input-field .mat-mdc-form-field-label{display:none}.app-search-input-field .mat-mdc-input-element{font-size:1.1rem;color:#222;background:transparent;border:none;outline:none;box-shadow:none;padding:.75rem 0}.app-search-input-field .mat-mdc-input-element::placeholder{color:silver;opacity:1;font-weight:400}.app-search-input-field .mat-icon{color:#18b6b2;font-size:1.5rem!important;margin-right:.5rem;margin-left:.25rem;vertical-align:middle}.app-search-input-field .mat-mdc-form-field-subscript-wrapper{display:none!important}.app-search-input-field ::ng-deep .mdc-notched-outline__leading,.app-search-input-field ::ng-deep .mdc-notched-outline__trailing{border-color:transparent!important}.app-search-input-field ::ng-deep .mat-mdc-text-field-wrapper{height:2.5em!important}.app-search-input-field ::ng-deep .mat-mdc-form-field-flex{align-self:center;height:3.5em!important}.app-search-input-field ::ng-deep .mat-mdc-form-field-infix{padding-bottom:0!important;padding-top:.25em}.app-input-field{width:100%}\n"] }]
        }], ctorParameters: () => [{ type: i1.HttpClient }], propDecorators: { type: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], value: [{
                type: Input
            }], disabled: [{
                type: Input
            }], required: [{
                type: Input
            }], appearance: [{
                type: Input
            }], label: [{
                type: Input
            }], errorMessage: [{
                type: Input
            }], multiline: [{
                type: Input
            }], rows: [{
                type: Input
            }], prefixIconName: [{
                type: Input
            }], prefixIconSize: [{
                type: Input
            }], suffixIconName: [{
                type: Input
            }], suffixIconSize: [{
                type: Input
            }], search: [{
                type: Input
            }], searchUrl: [{
                type: Input
            }], valueChange: [{
                type: Output
            }], searchResults: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLWlucHV0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9hcHAtaW5wdXQvYXBwLWlucHV0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9hcHAtaW5wdXQvYXBwLWlucHV0LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ25GLE9BQU8sRUFBRSxrQkFBa0IsRUFBMEIsTUFBTSw4QkFBOEIsQ0FBQztBQUMxRixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDekQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxxQkFBcUIsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3ZFLE9BQU8sRUFBRSxXQUFXLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEYsT0FBTyxFQUFjLGdCQUFnQixFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFDcEUsT0FBTyxFQUFFLFlBQVksRUFBRSxvQkFBb0IsRUFBRSxTQUFTLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUMvRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEVBQUUsRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNuQyxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7Ozs7Ozs7OztBQWdCL0MsTUFBTSxPQUFPLGlCQUFpQjtJQTJCNUIsWUFBb0IsSUFBZ0I7UUFBaEIsU0FBSSxHQUFKLElBQUksQ0FBWTtRQTFCM0IsU0FBSSxHQUFX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QXRCLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSztnQkFDRyxjQUFjO3NCQUF0QixLQUFLO2dCQUNHLE1BQU07c0JBQWQsS0FBSztnQkFDRyxTQUFTO3NCQUFqQixLQUFLO2dCQUNJLFdBQVc7c0JBQXBCLE1BQU07Z0JBQ0csYUFBYTtzQkFBdEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBmb3J3YXJkUmVmIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBNYXRGb3JtRmllbGRNb2R1bGUsIE1hdEZvcm1GaWVsZEFwcGVhcmFuY2UgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9mb3JtLWZpZWxkJztcbmltcG9ydCB7IE1hdElucHV0TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvaW5wdXQnO1xuaW1wb3J0IHsgTWF0SWNvbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2ljb24nO1xuaW1wb3J0IHsgTWF0QXV0b2NvbXBsZXRlTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYXV0b2NvbXBsZXRlJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlLCBDb250cm9sVmFsdWVBY2Nlc3NvciwgTkdfVkFMVUVfQUNDRVNTT1IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBIdHRwQ2xpZW50LCBIdHRwQ2xpZW50TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgZGVib3VuY2VUaW1lLCBkaXN0aW5jdFVudGlsQ2hhbmdlZCwgc3dpdGNoTWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgU3ViamVjdCwgb2YgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FwcC1pbnB1dCcsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGUsIE1hdEZvcm1GaWVsZE1vZHVsZSwgTWF0SW5wdXRNb2R1bGUsIE1hdEljb25Nb2R1bGUsIE1hdEF1dG9jb21wbGV0ZU1vZHVsZSwgRm9ybXNNb2R1bGUsIEh0dHBDbGllbnRNb2R1bGVdLFxuICB0ZW1wbGF0ZVVybDogJy4vYXBwLWlucHV0LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmw6ICcuL2FwcC1pbnB1dC5jb21wb25lbnQuc2NzcycsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gQXBwSW5wdXRDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgQXBwSW5wdXRDb21wb25lbnQgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciB7XG4gIEBJbnB1dCgpIHR5cGU6IHN0cmluZyA9ICd0ZXh0JztcbiAgQElucHV0KCkgcGxhY2Vob2xkZXI6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKSB2YWx1ZTogc3RyaW5nID0gJyc7XG4gIEBJbnB1dCgpIGRpc2FibGVkID0gZmFsc2U7XG4gIEBJbnB1dCgpIHJlcXVpcmVkID0gZmFsc2U7XG4gIEBJbnB1dCgpIGFwcGVhcmFuY2U6IE1hdEZvcm1GaWVsZEFwcGVhcmFuY2UgPSAnb3V0bGluZSc7XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmcgPSAnJztcbiAgQElucHV0KCkgZXJyb3JNZXNzYWdlOiBzdHJpbmcgPSAnJztcbiAgQElucHV0KCkgbXVsdGlsaW5lOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIHJvd3M6IG51bWJlciA9IDE7XG4gIEBJbnB1dCgpIHByZWZpeEljb25OYW1lPzogc3RyaW5nO1xuICBASW5wdXQoKSBwcmVmaXhJY29uU2l6ZTogc3RyaW5nID0gJzI0cHgnO1xuICBASW5wdXQoKSBzdWZmaXhJY29uTmFtZT86IHN0cmluZztcbiAgQElucHV0KCkgc3VmZml4SWNvblNpemU6IHN0cmluZyA9ICcyNHB4JztcbiAgQElucHV0KCkgc2VhcmNoOiBib29sZWFuID0gZmFsc2U7XG4gIEBJbnB1dCgpIHNlYXJjaFVybDogc3RyaW5nID0gJyc7XG4gIEBPdXRwdXQoKSB2YWx1ZUNoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuICBAT3V0cHV0KCkgc2VhcmNoUmVzdWx0cyA9IG5ldyBFdmVudEVtaXR0ZXI8YW55W10+KCk7XG5cbiAgc2VhcmNoT3B0aW9uczogYW55W10gPSBbXTtcbiAgcHJpdmF0ZSBzZWFyY2hTdWJqZWN0ID0gbmV3IFN1YmplY3Q8c3RyaW5nPigpO1xuXG4gIC8vIENvbnRyb2xWYWx1ZUFjY2Vzc29yIGltcGxlbWVudGF0aW9uXG4gIHByaXZhdGUgb25DaGFuZ2UgPSAodmFsdWU6IGFueSkgPT4ge307XG4gIHByaXZhdGUgb25Ub3VjaGVkID0gKCkgPT4ge307XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBodHRwOiBIdHRwQ2xpZW50KSB7XG4gICAgdGhpcy5zZWFyY2hTdWJqZWN0LnBpcGUoXG4gICAgICBkZWJvdW5jZVRpbWUoMzAwKSxcbiAgICAgIGRpc3RpbmN0VW50aWxDaGFuZ2VkKCksXG4gICAgICBzd2l0Y2hNYXAoKHNlYXJjaFZhbHVlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuc2VhcmNoICYmIHRoaXMuc2VhcmNoVXJsICYmIHNlYXJjaFZhbHVlKSB7XG4gICAgICAgICAgY29uc3QgdXJsID0gdGhpcy5zZWFyY2hVcmwucmVwbGFjZSgnJHtzZWFyY2hWYWx1ZX0nLCBlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoVmFsdWUpKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldDxhbnlbXT4odXJsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2YoW10pO1xuICAgICAgfSlcbiAgICApLnN1YnNjcmliZShyZXN1bHRzID0+IHtcbiAgICAgIHRoaXMuc2VhcmNoT3B0aW9ucyA9IHJlc3VsdHM7XG4gICAgICB0aGlzLnNlYXJjaFJlc3VsdHMuZW1pdChyZXN1bHRzKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9uSW5wdXQoZXZlbnQ6IEV2ZW50KSB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICB0aGlzLnZhbHVlID0gaW5wdXQudmFsdWU7XG4gICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KGlucHV0LnZhbHVlKTtcbiAgICB0aGlzLm9uQ2hhbmdlKGlucHV0LnZhbHVlKTtcbiAgICB0aGlzLm9uVG91Y2hlZCgpO1xuICAgIFxuICAgIGlmICh0aGlzLnNlYXJjaCkge1xuICAgICAgdGhpcy5zZWFyY2hTdWJqZWN0Lm5leHQoaW5wdXQudmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIC8vIENvbnRyb2xWYWx1ZUFjY2Vzc29yIG1ldGhvZHNcbiAgd3JpdGVWYWx1ZSh2YWx1ZTogYW55KTogdm9pZCB7XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlIHx8ICcnO1xuICB9XG5cbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46IGFueSk6IHZvaWQge1xuICAgIHRoaXMub25Ub3VjaGVkID0gZm47XG4gIH1cblxuICBzZXREaXNhYmxlZFN0YXRlKGlzRGlzYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLmRpc2FibGVkID0gaXNEaXNhYmxlZDtcbiAgfVxuXG4gIC8vIEhhbmRsZSBmb3JtIGNvbnRyb2wgdmFsdWUgY2hhbmdlc1xuICBvbkZvcm1Db250cm9sQ2hhbmdlKHZhbHVlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgdGhpcy5vbkNoYW5nZSh2YWx1ZSk7XG4gIH1cbn1cbiIsIkBpZihzZWFyY2ggJiYgIW11bHRpbGluZSkge1xuICA8bWF0LWZvcm0tZmllbGQgW2FwcGVhcmFuY2VdPVwiYXBwZWFyYW5jZVwiIGNsYXNzPVwiYXBwLXNlYXJjaC1pbnB1dC1maWVsZFwiIGhpZGVSZXF1aXJlZE1hcmtlcj1cInRydWVcIj5cbiAgICA8bWF0LWxhYmVsICpuZ0lmPVwibGFiZWxcIj57eyBsYWJlbCB9fTwvbWF0LWxhYmVsPlxuICAgIEBpZihwcmVmaXhJY29uTmFtZSkge1xuICAgICAgPG1hdC1pY29uIG1hdFByZWZpeCBbc3R5bGUuZm9udFNpemVdPVwicHJlZml4SWNvblNpemVcIj57eyBwcmVmaXhJY29uTmFtZSB9fTwvbWF0LWljb24+XG4gICAgfVxuICAgIDxpbnB1dFxuICAgICAgbWF0SW5wdXRcbiAgICAgIFt0eXBlXT1cInR5cGVcIlxuICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgIFtkaXNhYmxlZF09XCJkaXNhYmxlZFwiXG4gICAgICBbcmVxdWlyZWRdPVwicmVxdWlyZWRcIlxuICAgICAgW3ZhbHVlXT1cInZhbHVlXCJcbiAgICAgIChpbnB1dCk9XCJvbklucHV0KCRldmVudClcIlxuICAgICAgW21hdEF1dG9jb21wbGV0ZV09XCJhdXRvXCJcbiAgICAvPlxuICAgIEBpZihzdWZmaXhJY29uTmFtZSkge1xuICAgICAgPG1hdC1pY29uIG1hdFN1ZmZpeCBbc3R5bGUuZm9udFNpemVdPVwic3VmZml4SWNvblNpemVcIj57eyBzdWZmaXhJY29uTmFtZSB9fTwvbWF0LWljb24+XG4gICAgfVxuICAgIDxtYXQtZXJyb3IgKm5nSWY9XCJlcnJvck1lc3NhZ2VcIj57eyBlcnJvck1lc3NhZ2UgfX08L21hdC1lcnJvcj5cbiAgICA8bWF0LWF1dG9jb21wbGV0ZSAjYXV0bz1cIm1hdEF1dG9jb21wbGV0ZVwiPlxuICAgICAgPG1hdC1vcHRpb24gKm5nRm9yPVwibGV0IG9wdGlvbiBvZiBzZWFyY2hPcHRpb25zXCIgW3ZhbHVlXT1cIm9wdGlvblwiPlxuICAgICAgICB7eyBvcHRpb24gfX1cbiAgICAgIDwvbWF0LW9wdGlvbj5cbiAgICA8L21hdC1hdXRvY29tcGxldGU+XG4gIDwvbWF0LWZvcm0tZmllbGQ+XG59IEBlbHNlIHtcbiAgPG1hdC1mb3JtLWZpZWxkIFthcHBlYXJhbmNlXT1cImFwcGVhcmFuY2VcIiBjbGFzcz1cImFwcC1pbnB1dC1maWVsZFwiIGhpZGVSZXF1aXJlZE1hcmtlcj1cInRydWVcIj5cbiAgICA8bWF0LWxhYmVsICpuZ0lmPVwibGFiZWxcIj57eyBsYWJlbCB9fTwvbWF0LWxhYmVsPlxuICAgIEBpZihwcmVmaXhJY29uTmFtZSkge1xuICAgICAgPG1hdC1pY29uIG1hdFByZWZpeCBbc3R5bGUuZm9udFNpemVdPVwicHJlZml4SWNvblNpemVcIj57eyBwcmVmaXhJY29uTmFtZSB9fTwvbWF0LWljb24+XG4gICAgfVxuICAgIEBpZihtdWx0aWxpbmUpIHtcbiAgICAgIDx0ZXh0YXJlYVxuICAgICAgICBtYXRJbnB1dFxuICAgICAgICBbcGxhY2Vob2xkZXJdPVwicGxhY2Vob2xkZXJcIlxuICAgICAgICBbZGlzYWJsZWRdPVwiZGlzYWJsZWRcIlxuICAgICAgICBbcmVxdWlyZWRdPVwicmVxdWlyZWRcIlxuICAgICAgICBbdmFsdWVdPVwidmFsdWVcIlxuICAgICAgICAoaW5wdXQpPVwib25JbnB1dCgkZXZlbnQpXCJcbiAgICAgICAgW3Jvd3NdPVwicm93c1wiPlxuICAgICAgPC90ZXh0YXJlYT5cbiAgICB9IEBlbHNlIHtcbiAgICAgIDxpbnB1dFxuICAgICAgICBtYXRJbnB1dFxuICAgICAgICBbdHlwZV09XCJ0eXBlXCJcbiAgICAgICAgW3BsYWNlaG9sZGVyXT1cInBsYWNlaG9sZGVyXCJcbiAgICAgICAgW2Rpc2FibGVkXT1cImRpc2FibGVkXCJcbiAgICAgICAgW3JlcXVpcmVkXT1cInJlcXVpcmVkXCJcbiAgICAgICAgW3ZhbHVlXT1cInZhbHVlXCJcbiAgICAgICAgKGlucHV0KT1cIm9uSW5wdXQoJGV2ZW50KVwiXG4gICAgICAvPlxuICAgIH1cbiAgICBAaWYoc3VmZml4SWNvbk5hbWUpIHtcbiAgICAgIDxtYXQtaWNvbiBtYXRTdWZmaXggW3N0eWxlLmZvbnRTaXplXT1cInN1ZmZpeEljb25TaXplXCI+e3sgc3VmZml4SWNvbk5hbWUgfX08L21hdC1pY29uPlxuICAgIH1cbiAgICA8bWF0LWVycm9yICpuZ0lmPVwiZXJyb3JNZXNzYWdlXCI+e3sgZXJyb3JNZXNzYWdlIH19PC9tYXQtZXJyb3I+XG4gIDwvbWF0LWZvcm0tZmllbGQ+XG59XG4iXX0=