import { Component, Input, Output, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { MatInputModule } from '@angular/material/input';
import { MatFormFieldModule } from '@angular/material/form-field';
import { AppButtonComponent } from '../app-button/app-button.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/forms";
export class JsonReflectComponent {
    constructor() {
        this.json = {};
        this.editable = true;
        this.showControls = true;
        this.height = '400px';
        this.jsonChange = new EventEmitter();
        this.save = new EventEmitter();
        this.cancel = new EventEmitter();
        this.jsonString = '';
        this.isEditing = false;
        this.errorMessage = '';
    }
    ngOnInit() {
        this.updateJsonString();
    }
    ngOnChanges(changes) {
        if (changes['json'] && !this.isEditing) {
            this.updateJsonString();
        }
    }
    updateJsonString() {
        try {
            this.jsonString = JSON.stringify(this.json, null, 2);
            this.errorMessage = '';
        }
        catch (error) {
            this.jsonString = '';
            this.errorMessage = 'Invalid JSON';
        }
    }
    toggleEdit() {
        if (this.editable) {
            this.isEditing = !this.isEditing;
            if (!this.isEditing) {
                this.updateJsonString();
            }
        }
    }
    onJsonChange() {
        try {
            const parsed = JSON.parse(this.jsonString);
            this.json = parsed;
            this.errorMessage = '';
            this.jsonChange.emit(parsed);
        }
        catch (error) {
            this.errorMessage = 'Invalid JSON format';
        }
    }
    onSave() {
        try {
            const parsed = JSON.parse(this.jsonString);
            this.json = parsed;
            this.errorMessage = '';
            this.isEditing = false;
            this.save.emit(parsed);
        }
        catch (error) {
            this.errorMessage = 'Invalid JSON format. Cannot save.';
        }
    }
    onCancel() {
        this.updateJsonString();
        this.isEditing = false;
        this.errorMessage = '';
        this.cancel.emit();
    }
    formatJson() {
        try {
            const parsed = JSON.parse(this.jsonString);
            this.jsonString = JSON.stringify(parsed, null, 2);
            this.errorMessage = '';
        }
        catch (error) {
            this.errorMessage = 'Invalid JSON format';
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: JsonReflectComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.12", type: JsonReflectComponent, isStandalone: true, selector: "app-json-reflect", inputs: { json: "json", editable: "editable", showControls: "showControls", height: "height" }, outputs: { jsonChange: "jsonChange", save: "save", cancel: "cancel" }, usesOnChanges: true, ngImport: i0, template: "<div class=\"json-reflect-container\" [style.height]=\"height\">\n  @if (showControls && editable) {\n    <div class=\"json-controls\">\n      @if (!isEditing) {\n        <app-button\n          text=\"Edit\"\n          fontIcon=\"edit\"\n          appearance=\"raised\"\n          color=\"primary\"\n          (btnClick)=\"toggleEdit()\"\n        ></app-button>\n      } @else {\n        <app-button\n          text=\"Save\"\n          fontIcon=\"save\"\n          appearance=\"raised\"\n          color=\"primary\"\n          (btnClick)=\"onSave()\"\n        ></app-button>\n        <app-button\n          text=\"Cancel\"\n          fontIcon=\"cancel\"\n          appearance=\"flat\"\n          color=\"warn\"\n          (btnClick)=\"onCancel()\"\n        ></app-button>\n        <app-button\n          text=\"Format\"\n          fontIcon=\"code\"\n          appearance=\"flat\"\n          (btnClick)=\"formatJson()\"\n        ></app-button>\n      }\n    </div>\n  }\n\n  @if (errorMessage) {\n    <div class=\"error-message\">{{ errorMessage }}</div>\n  }\n\n  @if (isEditing && editable) {\n    <textarea\n      class=\"json-editor\"\n      [(ngModel)]=\"jsonString\"\n      (input)=\"onJsonChange()\"\n      placeholder=\"Enter JSON here...\"\n    ></textarea>\n  } @else {\n    <pre class=\"json-viewer\">{{ jsonString }}</pre>\n  }\n</div>\n\n", styles: [".json-reflect-container{display:flex;flex-direction:column;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.json-controls{display:flex;gap:8px;padding:8px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0}.error-message{padding:8px 16px;background-color:#ffebee;color:#c62828;font-size:14px;border-bottom:1px solid #e0e0e0}.json-editor{flex:1;padding:16px;font-family:Courier New,monospace;font-size:14px;line-height:1.5;border:none;outline:none;resize:none;background-color:#fafafa}.json-viewer{flex:1;padding:16px;margin:0;font-family:Courier New,monospace;font-size:14px;line-height:1.5;overflow:auto;background-color:#fafafa;white-space:pre-wrap;word-wrap:break-word}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "ngmodule", type: FormsModule }, { kind: "directive", type: i1.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { kind: "directive", type: i1.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { kind: "directive", type: i1.NgModel, selector: "[ngModel]:not([formControlName]):not([formControl])", inputs: ["name", "disabled", "ngModel", "ngModelOptions"], outputs: ["ngModelChange"], exportAs: ["ngModel"] }, { kind: "ngmodule", type: MatButtonModule }, { kind: "ngmodule", type: MatIconModule }, { kind: "ngmodule", type: MatInputModule }, { kind: "ngmodule", type: MatFormFieldModule }, { kind: "component", type: AppButtonComponent, selector: "app-button", inputs: ["color", "type", "disabled", "appearance", "class", "text", "fontIcon"], outputs: ["btnClick"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: JsonReflectComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-json-reflect', standalone: true, imports: [
                        CommonModule,
                        FormsModule,
                        MatButtonModule,
                        MatIconModule,
                        MatInputModule,
                        MatFormFieldModule,
                        AppButtonComponent
                    ], template: "<div class=\"json-reflect-container\" [style.height]=\"height\">\n  @if (showControls && editable) {\n    <div class=\"json-controls\">\n      @if (!isEditing) {\n        <app-button\n          text=\"Edit\"\n          fontIcon=\"edit\"\n          appearance=\"raised\"\n          color=\"primary\"\n          (btnClick)=\"toggleEdit()\"\n        ></app-button>\n      } @else {\n        <app-button\n          text=\"Save\"\n          fontIcon=\"save\"\n          appearance=\"raised\"\n          color=\"primary\"\n          (btnClick)=\"onSave()\"\n        ></app-button>\n        <app-button\n          text=\"Cancel\"\n          fontIcon=\"cancel\"\n          appearance=\"flat\"\n          color=\"warn\"\n          (btnClick)=\"onCancel()\"\n        ></app-button>\n        <app-button\n          text=\"Format\"\n          fontIcon=\"code\"\n          appearance=\"flat\"\n          (btnClick)=\"formatJson()\"\n        ></app-button>\n      }\n    </div>\n  }\n\n  @if (errorMessage) {\n    <div class=\"error-message\">{{ errorMessage }}</div>\n  }\n\n  @if (isEditing && editable) {\n    <textarea\n      class=\"json-editor\"\n      [(ngModel)]=\"jsonString\"\n      (input)=\"onJsonChange()\"\n      placeholder=\"Enter JSON here...\"\n    ></textarea>\n  } @else {\n    <pre class=\"json-viewer\">{{ jsonString }}</pre>\n  }\n</div>\n\n", styles: [".json-reflect-container{display:flex;flex-direction:column;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.json-controls{display:flex;gap:8px;padding:8px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0}.error-message{padding:8px 16px;background-color:#ffebee;color:#c62828;font-size:14px;border-bottom:1px solid #e0e0e0}.json-editor{flex:1;padding:16px;font-family:Courier New,monospace;font-size:14px;line-height:1.5;border:none;outline:none;resize:none;background-color:#fafafa}.json-viewer{flex:1;padding:16px;margin:0;font-family:Courier New,monospace;font-size:14px;line-height:1.5;overflow:auto;background-color:#fafafa;white-space:pre-wrap;word-wrap:break-word}\n"] }]
        }], propDecorators: { json: [{
                type: Input
            }], editable: [{
                type: Input
            }], showControls: [{
                type: Input
            }], height: [{
                type: Input
            }], jsonChange: [{
                type: Output
            }], save: [{
                type: Output
            }], cancel: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianNvbi1yZWZsZWN0LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9qc29uLXJlZmxlY3QvanNvbi1yZWZsZWN0LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9qc29uLXJlZmxlY3QvanNvbi1yZWZsZWN0LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQW9DLE1BQU0sZUFBZSxDQUFDO0FBQ3pHLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDN0MsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzNELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDekQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDbEUsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7OztBQWlCeEUsTUFBTSxPQUFPLG9CQUFvQjtJQWZqQztRQWdCVyxTQUFJLEdBQVEsRUFBRSxDQUFDO1FBQ2YsYUFBUSxHQUFZLElBQUksQ0FBQztRQUN6QixpQkFBWSxHQUFZLElBQUksQ0FBQztRQUM3QixXQUFNLEdBQVcsT0FBTyxDQUFDO1FBRXhCLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3JDLFNBQUksR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQy9CLFdBQU0s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RyxFQUFFLENBQUM7UUFDekIsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixJQUFJLENBQUMsWUFBWSxHQUFHLHFCQUFxQixDQUFDO1FBQzVDLENBQUM7SUFDSCxDQUFDOytHQWpGVSxvQkFBb0I7bUdBQXBCLG9CQUFvQix3UUN4QmpDLHcwQ0FvREEsNHVCRHZDSSxZQUFZLDhCQUNaLFdBQVcsOG1CQUNYLGVBQWUsOEJBQ2YsYUFBYSw4QkFDYixjQUFjLDhCQUNkLGtCQUFrQiwrQkFDbEIsa0JBQWtCOzs0RkFLVCxvQkFBb0I7a0JBZmhDLFNBQVM7K0JBQ0Usa0JBQWtCLGNBQ2hCLElBQUksV0FDUDt3QkFDUCxZQUFZO3dCQUNaLFdBQVc7d0JBQ1gsZUFBZTt3QkFDZixhQUFhO3dCQUNiLGNBQWM7d0JBQ2Qsa0JBQWtCO3dCQUNsQixrQkFBa0I7cUJBQ25COzhCQUtRLElBQUk7c0JBQVosS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLFlBQVk7c0JBQXBCLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLO2dCQUVJLFVBQVU7c0JBQW5CLE1BQU07Z0JBQ0csSUFBSTtzQkFBYixNQUFNO2dCQUNHLE1BQU07c0JBQWYsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkluaXQsIE9uQ2hhbmdlcywgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEZvcm1zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTWF0QnV0dG9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYnV0dG9uJztcbmltcG9ydCB7IE1hdEljb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9pY29uJztcbmltcG9ydCB7IE1hdElucHV0TW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvaW5wdXQnO1xuaW1wb3J0IHsgTWF0Rm9ybUZpZWxkTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZm9ybS1maWVsZCc7XG5pbXBvcnQgeyBBcHBCdXR0b25Db21wb25lbnQgfSBmcm9tICcuLi9hcHAtYnV0dG9uL2FwcC1idXR0b24uY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYXBwLWpzb24tcmVmbGVjdCcsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgRm9ybXNNb2R1bGUsXG4gICAgTWF0QnV0dG9uTW9kdWxlLFxuICAgIE1hdEljb25Nb2R1bGUsXG4gICAgTWF0SW5wdXRNb2R1bGUsXG4gICAgTWF0Rm9ybUZpZWxkTW9kdWxlLFxuICAgIEFwcEJ1dHRvbkNvbXBvbmVudFxuICBdLFxuICB0ZW1wbGF0ZVVybDogJy4vanNvbi1yZWZsZWN0LmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmw6ICcuL2pzb24tcmVmbGVjdC5jb21wb25lbnQuc2Nzcydcbn0pXG5leHBvcnQgY2xhc3MgSnNvblJlZmxlY3RDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uQ2hhbmdlcyB7XG4gIEBJbnB1dCgpIGpzb246IGFueSA9IHt9O1xuICBASW5wdXQoKSBlZGl0YWJsZTogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIHNob3dDb250cm9sczogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIGhlaWdodDogc3RyaW5nID0gJzQwMHB4JztcbiAgXG4gIEBPdXRwdXQoKSBqc29uQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBzYXZlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBjYW5jZWwgPSBuZXcgRXZlbnRFbWl0dGVyPHZvaWQ+KCk7XG5cbiAganNvblN0cmluZzogc3RyaW5nID0gJyc7XG4gIGlzRWRpdGluZzogYm9vbGVhbiA9IGZhbHNlO1xuICBlcnJvck1lc3NhZ2U6IHN0cmluZyA9ICcnO1xuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMudXBkYXRlSnNvblN0cmluZygpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzWydqc29uJ10gJiYgIXRoaXMuaXNFZGl0aW5nKSB7XG4gICAgICB0aGlzLnVwZGF0ZUpzb25TdHJpbmcoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVKc29uU3RyaW5nKCkge1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmpzb25TdHJpbmcgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmpzb24sIG51bGwsIDIpO1xuICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnJztcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5qc29uU3RyaW5nID0gJyc7XG4gICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICdJbnZhbGlkIEpTT04nO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUVkaXQoKSB7XG4gICAgaWYgKHRoaXMuZWRpdGFibGUpIHtcbiAgICAgIHRoaXMuaXNFZGl0aW5nID0gIXRoaXMuaXNFZGl0aW5nO1xuICAgICAgaWYgKCF0aGlzLmlzRWRpdGluZykge1xuICAgICAgICB0aGlzLnVwZGF0ZUpzb25TdHJpbmcoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBvbkpzb25DaGFuZ2UoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UodGhpcy5qc29uU3RyaW5nKTtcbiAgICAgIHRoaXMuanNvbiA9IHBhcnNlZDtcbiAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJyc7XG4gICAgICB0aGlzLmpzb25DaGFuZ2UuZW1pdChwYXJzZWQpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICB0aGlzLmVycm9yTWVzc2FnZSA9ICdJbnZhbGlkIEpTT04gZm9ybWF0JztcbiAgICB9XG4gIH1cblxuICBvblNhdmUoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UodGhpcy5qc29uU3RyaW5nKTtcbiAgICAgIHRoaXMuanNvbiA9IHBhcnNlZDtcbiAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJyc7XG4gICAgICB0aGlzLmlzRWRpdGluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5zYXZlLmVtaXQocGFyc2VkKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgdGhpcy5lcnJvck1lc3NhZ2UgPSAnSW52YWxpZCBKU09OIGZvcm1hdC4gQ2Fubm90IHNhdmUuJztcbiAgICB9XG4gIH1cblxuICBvbkNhbmNlbCgpIHtcbiAgICB0aGlzLnVwZGF0ZUpzb25TdHJpbmcoKTtcbiAgICB0aGlzLmlzRWRpdGluZyA9IGZhbHNlO1xuICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJyc7XG4gICAgdGhpcy5jYW5jZWwuZW1pdCgpO1xuICB9XG5cbiAgZm9ybWF0SnNvbigpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZSh0aGlzLmpzb25TdHJpbmcpO1xuICAgICAgdGhpcy5qc29uU3RyaW5nID0gSlNPTi5zdHJpbmdpZnkocGFyc2VkLCBudWxsLCAyKTtcbiAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJyc7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gJ0ludmFsaWQgSlNPTiBmb3JtYXQnO1xuICAgIH1cbiAgfVxufVxuXG4iLCI8ZGl2IGNsYXNzPVwianNvbi1yZWZsZWN0LWNvbnRhaW5lclwiIFtzdHlsZS5oZWlnaHRdPVwiaGVpZ2h0XCI+XG4gIEBpZiAoc2hvd0NvbnRyb2xzICYmIGVkaXRhYmxlKSB7XG4gICAgPGRpdiBjbGFzcz1cImpzb24tY29udHJvbHNcIj5cbiAgICAgIEBpZiAoIWlzRWRpdGluZykge1xuICAgICAgICA8YXBwLWJ1dHRvblxuICAgICAgICAgIHRleHQ9XCJFZGl0XCJcbiAgICAgICAgICBmb250SWNvbj1cImVkaXRcIlxuICAgICAgICAgIGFwcGVhcmFuY2U9XCJyYWlzZWRcIlxuICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgKGJ0bkNsaWNrKT1cInRvZ2dsZUVkaXQoKVwiXG4gICAgICAgID48L2FwcC1idXR0b24+XG4gICAgICB9IEBlbHNlIHtcbiAgICAgICAgPGFwcC1idXR0b25cbiAgICAgICAgICB0ZXh0PVwiU2F2ZVwiXG4gICAgICAgICAgZm9udEljb249XCJzYXZlXCJcbiAgICAgICAgICBhcHBlYXJhbmNlPVwicmFpc2VkXCJcbiAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgIChidG5DbGljayk9XCJvblNhdmUoKVwiXG4gICAgICAgID48L2FwcC1idXR0b24+XG4gICAgICAgIDxhcHAtYnV0dG9uXG4gICAgICAgICAgdGV4dD1cIkNhbmNlbFwiXG4gICAgICAgICAgZm9udEljb249XCJjYW5jZWxcIlxuICAgICAgICAgIGFwcGVhcmFuY2U9XCJmbGF0XCJcbiAgICAgICAgICBjb2xvcj1cIndhcm5cIlxuICAgICAgICAgIChidG5DbGljayk9XCJvbkNhbmNlbCgpXCJcbiAgICAgICAgPjwvYXBwLWJ1dHRvbj5cbiAgICAgICAgPGFwcC1idXR0b25cbiAgICAgICAgICB0ZXh0PVwiRm9ybWF0XCJcbiAgICAgICAgICBmb250SWNvbj1cImNvZGVcIlxuICAgICAgICAgIGFwcGVhcmFuY2U9XCJmbGF0XCJcbiAgICAgICAgICAoYnRuQ2xpY2spPVwiZm9ybWF0SnNvbigpXCJcbiAgICAgICAgPjwvYXBwLWJ1dHRvbj5cbiAgICAgIH1cbiAgICA8L2Rpdj5cbiAgfVxuXG4gIEBpZiAoZXJyb3JNZXNzYWdlKSB7XG4gICAgPGRpdiBjbGFzcz1cImVycm9yLW1lc3NhZ2VcIj57eyBlcnJvck1lc3NhZ2UgfX08L2Rpdj5cbiAgfVxuXG4gIEBpZiAoaXNFZGl0aW5nICYmIGVkaXRhYmxlKSB7XG4gICAgPHRleHRhcmVhXG4gICAgICBjbGFzcz1cImpzb24tZWRpdG9yXCJcbiAgICAgIFsobmdNb2RlbCldPVwianNvblN0cmluZ1wiXG4gICAgICAoaW5wdXQpPVwib25Kc29uQ2hhbmdlKClcIlxuICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciBKU09OIGhlcmUuLi5cIlxuICAgID48L3RleHRhcmVhPlxuICB9IEBlbHNlIHtcbiAgICA8cHJlIGNsYXNzPVwianNvbi12aWV3ZXJcIj57eyBqc29uU3RyaW5nIH19PC9wcmU+XG4gIH1cbjwvZGl2PlxuXG4iXX0=