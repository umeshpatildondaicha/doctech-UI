import { Component, Input, Output, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatButtonToggleModule } from '@angular/material/button-toggle';
import { MatButtonModule } from '@angular/material/button';
import { AppButtonComponent } from '../app-button/app-button.component';
import { IconComponent } from '../app-icon/icon.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/button-toggle";
export class ToggleButtonComponent {
    constructor() {
        this.options = [];
        this.value = null;
        this.multiple = false;
        this.appearance = 'standard';
        this.vertical = false;
        this.valueChange = new EventEmitter();
        this.buttonClick = new EventEmitter();
        this.selectedValues = [];
    }
    ngOnInit() {
        if (this.multiple) {
            this.selectedValues = Array.isArray(this.value) ? [...this.value] : [];
        }
    }
    onToggleChange(value) {
        if (this.multiple) {
            this.selectedValues = Array.isArray(value) ? value : [value];
            this.valueChange.emit(this.selectedValues);
        }
        else {
            this.value = value;
            this.valueChange.emit(value);
            const option = this.options.find(opt => opt.value === value);
            if (option) {
                this.buttonClick.emit({ value, option });
            }
        }
    }
    onClick(option) {
        if (!option.disabled) {
            if (this.multiple) {
                const index = this.selectedValues.indexOf(option.value);
                if (index > -1) {
                    this.selectedValues.splice(index, 1);
                }
                else {
                    this.selectedValues.push(option.value);
                }
                this.valueChange.emit([...this.selectedValues]);
                this.buttonClick.emit({ value: option.value, option });
            }
            else {
                this.value = option.value;
                this.valueChange.emit(option.value);
                this.buttonClick.emit({ value: option.value, option });
            }
        }
    }
    isSelected(option) {
        if (this.multiple) {
            return this.selectedValues.includes(option.value);
        }
        return this.value === option.value;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: ToggleButtonComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.12", type: ToggleButtonComponent, isStandalone: true, selector: "app-toggle-button", inputs: { options: "options", value: "value", multiple: "multiple", appearance: "appearance", vertical: "vertical" }, outputs: { valueChange: "valueChange", buttonClick: "buttonClick" }, ngImport: i0, template: "@if (multiple) {\n  <mat-button-toggle-group\n    [value]=\"selectedValues\"\n    [multiple]=\"true\"\n    [appearance]=\"appearance\"\n    [vertical]=\"vertical\"\n    (change)=\"onToggleChange($event.value)\"\n    class=\"toggle-group\"\n  >\n    @for (option of options; track option.value) {\n      <mat-button-toggle [value]=\"option.value\" [disabled]=\"option.disabled\">\n        @if (option.icon) {\n          <app-icon [fontIcon]=\"option.icon\"></app-icon>\n        }\n        <span>{{ option.label }}</span>\n      </mat-button-toggle>\n    }\n  </mat-button-toggle-group>\n} @else {\n  <div class=\"toggle-buttons\" [class.vertical]=\"vertical\">\n    @for (option of options; track option.value) {\n      <app-button\n        [text]=\"option.label\"\n        [fontIcon]=\"option.icon || ''\"\n        [color]=\"option.color || (isSelected(option) ? 'primary' : 'secondary')\"\n        [appearance]=\"isSelected(option) ? 'raised' : 'flat'\"\n        [disabled]=\"option.disabled || false\"\n        (btnClick)=\"onClick(option)\"\n        [class.selected]=\"isSelected(option)\"\n      ></app-button>\n    }\n  </div>\n}\n\n", styles: [".toggle-group{display:flex;flex-wrap:wrap;gap:8px}.toggle-buttons{display:flex;gap:8px;flex-wrap:wrap}.toggle-buttons.vertical{flex-direction:column}.toggle-buttons app-button.selected{opacity:1}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "ngmodule", type: MatButtonToggleModule }, { kind: "directive", type: i1.MatButtonToggleGroup, selector: "mat-button-toggle-group", inputs: ["appearance", "name", "vertical", "value", "multiple", "disabled", "hideSingleSelectionIndicator", "hideMultipleSelectionIndicator"], outputs: ["valueChange", "change"], exportAs: ["matButtonToggleGroup"] }, { kind: "component", type: i1.MatButtonToggle, selector: "mat-button-toggle", inputs: ["aria-label", "aria-labelledby", "id", "name", "value", "tabIndex", "disableRipple", "appearance", "checked", "disabled"], outputs: ["change"], exportAs: ["matButtonToggle"] }, { kind: "ngmodule", type: MatButtonModule }, { kind: "component", type: AppButtonComponent, selector: "app-button", inputs: ["color", "type", "disabled", "appearance", "class", "text", "fontIcon"], outputs: ["btnClick"] }, { kind: "component", type: IconComponent, selector: "app-icon", inputs: ["fontSet", "fontIcon", "iconType", "icomoonClass", "size", "isBlink", "fontBold", "color", "class", "counter", "isCovered"], outputs: ["iconClick"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: ToggleButtonComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-toggle-button', standalone: true, imports: [CommonModule, MatButtonToggleModule, MatButtonModule, AppButtonComponent, IconComponent], template: "@if (multiple) {\n  <mat-button-toggle-group\n    [value]=\"selectedValues\"\n    [multiple]=\"true\"\n    [appearance]=\"appearance\"\n    [vertical]=\"vertical\"\n    (change)=\"onToggleChange($event.value)\"\n    class=\"toggle-group\"\n  >\n    @for (option of options; track option.value) {\n      <mat-button-toggle [value]=\"option.value\" [disabled]=\"option.disabled\">\n        @if (option.icon) {\n          <app-icon [fontIcon]=\"option.icon\"></app-icon>\n        }\n        <span>{{ option.label }}</span>\n      </mat-button-toggle>\n    }\n  </mat-button-toggle-group>\n} @else {\n  <div class=\"toggle-buttons\" [class.vertical]=\"vertical\">\n    @for (option of options; track option.value) {\n      <app-button\n        [text]=\"option.label\"\n        [fontIcon]=\"option.icon || ''\"\n        [color]=\"option.color || (isSelected(option) ? 'primary' : 'secondary')\"\n        [appearance]=\"isSelected(option) ? 'raised' : 'flat'\"\n        [disabled]=\"option.disabled || false\"\n        (btnClick)=\"onClick(option)\"\n        [class.selected]=\"isSelected(option)\"\n      ></app-button>\n    }\n  </div>\n}\n\n", styles: [".toggle-group{display:flex;flex-wrap:wrap;gap:8px}.toggle-buttons{display:flex;gap:8px;flex-wrap:wrap}.toggle-buttons.vertical{flex-direction:column}.toggle-buttons app-button.selected{opacity:1}\n"] }]
        }], propDecorators: { options: [{
                type: Input
            }], value: [{
                type: Input
            }], multiple: [{
                type: Input
            }], appearance: [{
                type: Input
            }], vertical: [{
                type: Input
            }], valueChange: [{
                type: Output
            }], buttonClick: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9nZ2xlLWJ1dHRvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21tb24tbGlicy9jb3JlL3NyYy9saWIvdG9vbHMvdG9nZ2xlLWJ1dHRvbi90b2dnbGUtYnV0dG9uLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy90b2dnbGUtYnV0dG9uL3RvZ2dsZS1idXR0b24uY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQUUsWUFBWSxFQUFFLE1BQU0saUJBQWlCLENBQUM7QUFDL0MsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0saUNBQWlDLENBQUM7QUFDeEUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzNELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBQ3hFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQzs7O0FBaUIzRCxNQUFNLE9BQU8scUJBQXFCO0lBUGxDO1FBUVcsWUFBTyxHQUF5QixFQUFFLENBQUM7UUFDbkMsVUFBSyxHQUFRLElBQUksQ0FBQztRQUNsQixhQUFRLEdBQVksS0FBSyxDQUFDO1FBQzFCLGVBQVUsR0FBMEIsVUFBVSxDQUFDO1FBQy9DLGFBQVEsR0FBWSxLQUFLLENBQUM7UUFFekIsZ0JBQVcsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBQ3RDLGdCQUFXLEdBQUcsSUFBSSxZQUFZLEVBQThDLENBQUM7UUFFdkYsbUJBQWMsR0FBVSxFQUFFLENBQUM7S0ErQzVCO0lBN0NDLFFBQVE7UUFDTixJQUFJLElBQUksQ0FB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Qix3bEJBQUUsZUFBZSwrQkFBRSxrQkFBa0IsZ0tBQUUsYUFBYTs7NEZBSXRGLHFCQUFxQjtrQkFQakMsU0FBUzsrQkFDRSxtQkFBbUIsY0FDakIsSUFBSSxXQUNQLENBQUMsWUFBWSxFQUFFLHFCQUFxQixFQUFFLGVBQWUsRUFBRSxrQkFBa0IsRUFBRSxhQUFhLENBQUM7OEJBS3pGLE9BQU87c0JBQWYsS0FBSztnQkFDRyxLQUFLO3NCQUFiLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBRUksV0FBVztzQkFBcEIsTUFBTTtnQkFDRyxXQUFXO3NCQUFwQixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IE1hdEJ1dHRvblRvZ2dsZU1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2J1dHRvbi10b2dnbGUnO1xuaW1wb3J0IHsgTWF0QnV0dG9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvYnV0dG9uJztcbmltcG9ydCB7IEFwcEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJy4uL2FwcC1idXR0b24vYXBwLWJ1dHRvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgSWNvbkNvbXBvbmVudCB9IGZyb20gJy4uL2FwcC1pY29uL2ljb24uY29tcG9uZW50JztcblxuZXhwb3J0IGludGVyZmFjZSBUb2dnbGVCdXR0b25PcHRpb24ge1xuICB2YWx1ZTogYW55O1xuICBsYWJlbDogc3RyaW5nO1xuICBpY29uPzogc3RyaW5nO1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIGNvbG9yPzogJ3ByaW1hcnknIHwgJ2FjY2VudCcgfCAnd2Fybic7XG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FwcC10b2dnbGUtYnV0dG9uJyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW0NvbW1vbk1vZHVsZSwgTWF0QnV0dG9uVG9nZ2xlTW9kdWxlLCBNYXRCdXR0b25Nb2R1bGUsIEFwcEJ1dHRvbkNvbXBvbmVudCwgSWNvbkNvbXBvbmVudF0sXG4gIHRlbXBsYXRlVXJsOiAnLi90b2dnbGUtYnV0dG9uLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmw6ICcuL3RvZ2dsZS1idXR0b24uY29tcG9uZW50LnNjc3MnXG59KVxuZXhwb3J0IGNsYXNzIFRvZ2dsZUJ1dHRvbkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpIG9wdGlvbnM6IFRvZ2dsZUJ1dHRvbk9wdGlvbltdID0gW107XG4gIEBJbnB1dCgpIHZhbHVlOiBhbnkgPSBudWxsO1xuICBASW5wdXQoKSBtdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBhcHBlYXJhbmNlOiAnc3RhbmRhcmQnIHwgJ2xlZ2FjeScgPSAnc3RhbmRhcmQnO1xuICBASW5wdXQoKSB2ZXJ0aWNhbDogYm9vbGVhbiA9IGZhbHNlO1xuICBcbiAgQE91dHB1dCgpIHZhbHVlQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBidXR0b25DbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8eyB2YWx1ZTogYW55OyBvcHRpb246IFRvZ2dsZUJ1dHRvbk9wdGlvbiB9PigpO1xuXG4gIHNlbGVjdGVkVmFsdWVzOiBhbnlbXSA9IFtdO1xuXG4gIG5nT25Jbml0KCkge1xuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XG4gICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzID0gQXJyYXkuaXNBcnJheSh0aGlzLnZhbHVlKSA/IFsuLi50aGlzLnZhbHVlXSA6IFtdO1xuICAgIH1cbiAgfVxuXG4gIG9uVG9nZ2xlQ2hhbmdlKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5tdWx0aXBsZSkge1xuICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcyA9IEFycmF5LmlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBbdmFsdWVdO1xuICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KHRoaXMuc2VsZWN0ZWRWYWx1ZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICB0aGlzLnZhbHVlQ2hhbmdlLmVtaXQodmFsdWUpO1xuICAgICAgY29uc3Qgb3B0aW9uID0gdGhpcy5vcHRpb25zLmZpbmQob3B0ID0+IG9wdC52YWx1ZSA9PT0gdmFsdWUpO1xuICAgICAgaWYgKG9wdGlvbikge1xuICAgICAgICB0aGlzLmJ1dHRvbkNsaWNrLmVtaXQoeyB2YWx1ZSwgb3B0aW9uIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG9uQ2xpY2sob3B0aW9uOiBUb2dnbGVCdXR0b25PcHRpb24pIHtcbiAgICBpZiAoIW9wdGlvbi5kaXNhYmxlZCkge1xuICAgICAgaWYgKHRoaXMubXVsdGlwbGUpIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnNlbGVjdGVkVmFsdWVzLmluZGV4T2Yob3B0aW9uLnZhbHVlKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkVmFsdWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZWxlY3RlZFZhbHVlcy5wdXNoKG9wdGlvbi52YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZS5lbWl0KFsuLi50aGlzLnNlbGVjdGVkVmFsdWVzXSk7XG4gICAgICAgIHRoaXMuYnV0dG9uQ2xpY2suZW1pdCh7IHZhbHVlOiBvcHRpb24udmFsdWUsIG9wdGlvbiB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSBvcHRpb24udmFsdWU7XG4gICAgICAgIHRoaXMudmFsdWVDaGFuZ2UuZW1pdChvcHRpb24udmFsdWUpO1xuICAgICAgICB0aGlzLmJ1dHRvbkNsaWNrLmVtaXQoeyB2YWx1ZTogb3B0aW9uLnZhbHVlLCBvcHRpb24gfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaXNTZWxlY3RlZChvcHRpb246IFRvZ2dsZUJ1dHRvbk9wdGlvbik6IGJvb2xlYW4ge1xuICAgIGlmICh0aGlzLm11bHRpcGxlKSB7XG4gICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZFZhbHVlcy5pbmNsdWRlcyhvcHRpb24udmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy52YWx1ZSA9PT0gb3B0aW9uLnZhbHVlO1xuICB9XG59XG5cbiIsIkBpZiAobXVsdGlwbGUpIHtcbiAgPG1hdC1idXR0b24tdG9nZ2xlLWdyb3VwXG4gICAgW3ZhbHVlXT1cInNlbGVjdGVkVmFsdWVzXCJcbiAgICBbbXVsdGlwbGVdPVwidHJ1ZVwiXG4gICAgW2FwcGVhcmFuY2VdPVwiYXBwZWFyYW5jZVwiXG4gICAgW3ZlcnRpY2FsXT1cInZlcnRpY2FsXCJcbiAgICAoY2hhbmdlKT1cIm9uVG9nZ2xlQ2hhbmdlKCRldmVudC52YWx1ZSlcIlxuICAgIGNsYXNzPVwidG9nZ2xlLWdyb3VwXCJcbiAgPlxuICAgIEBmb3IgKG9wdGlvbiBvZiBvcHRpb25zOyB0cmFjayBvcHRpb24udmFsdWUpIHtcbiAgICAgIDxtYXQtYnV0dG9uLXRvZ2dsZSBbdmFsdWVdPVwib3B0aW9uLnZhbHVlXCIgW2Rpc2FibGVkXT1cIm9wdGlvbi5kaXNhYmxlZFwiPlxuICAgICAgICBAaWYgKG9wdGlvbi5pY29uKSB7XG4gICAgICAgICAgPGFwcC1pY29uIFtmb250SWNvbl09XCJvcHRpb24uaWNvblwiPjwvYXBwLWljb24+XG4gICAgICAgIH1cbiAgICAgICAgPHNwYW4+e3sgb3B0aW9uLmxhYmVsIH19PC9zcGFuPlxuICAgICAgPC9tYXQtYnV0dG9uLXRvZ2dsZT5cbiAgICB9XG4gIDwvbWF0LWJ1dHRvbi10b2dnbGUtZ3JvdXA+XG59IEBlbHNlIHtcbiAgPGRpdiBjbGFzcz1cInRvZ2dsZS1idXR0b25zXCIgW2NsYXNzLnZlcnRpY2FsXT1cInZlcnRpY2FsXCI+XG4gICAgQGZvciAob3B0aW9uIG9mIG9wdGlvbnM7IHRyYWNrIG9wdGlvbi52YWx1ZSkge1xuICAgICAgPGFwcC1idXR0b25cbiAgICAgICAgW3RleHRdPVwib3B0aW9uLmxhYmVsXCJcbiAgICAgICAgW2ZvbnRJY29uXT1cIm9wdGlvbi5pY29uIHx8ICcnXCJcbiAgICAgICAgW2NvbG9yXT1cIm9wdGlvbi5jb2xvciB8fCAoaXNTZWxlY3RlZChvcHRpb24pID8gJ3ByaW1hcnknIDogJ3NlY29uZGFyeScpXCJcbiAgICAgICAgW2FwcGVhcmFuY2VdPVwiaXNTZWxlY3RlZChvcHRpb24pID8gJ3JhaXNlZCcgOiAnZmxhdCdcIlxuICAgICAgICBbZGlzYWJsZWRdPVwib3B0aW9uLmRpc2FibGVkIHx8IGZhbHNlXCJcbiAgICAgICAgKGJ0bkNsaWNrKT1cIm9uQ2xpY2sob3B0aW9uKVwiXG4gICAgICAgIFtjbGFzcy5zZWxlY3RlZF09XCJpc1NlbGVjdGVkKG9wdGlvbilcIlxuICAgICAgPjwvYXBwLWJ1dHRvbj5cbiAgICB9XG4gIDwvZGl2PlxufVxuXG4iXX0=