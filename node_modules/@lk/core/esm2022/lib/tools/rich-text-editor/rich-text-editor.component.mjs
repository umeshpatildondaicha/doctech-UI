import { Component, Input, Output, EventEmitter, forwardRef } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule, NG_VALUE_ACCESSOR } from '@angular/forms';
import { AppButtonComponent } from '../app-button/app-button.component';
import * as i0 from "@angular/core";
export class RichTextEditorComponent {
    constructor() {
        this.placeholder = 'Enter text here...';
        this.height = '300px';
        this.showToolbar = true;
        this.contentChange = new EventEmitter();
        this.content = '';
        this.onChange = (value) => { };
        this.onTouched = () => { };
    }
    writeValue(value) {
        this.content = value || '';
        if (this.getEditorElement()) {
            this.getEditorElement().innerHTML = this.content;
        }
    }
    registerOnChange(fn) {
        this.onChange = fn;
    }
    registerOnTouched(fn) {
        this.onTouched = fn;
    }
    onContentChange() {
        const editor = this.getEditorElement();
        if (editor) {
            this.content = editor.innerHTML;
            this.onChange(this.content);
            this.contentChange.emit(this.content);
        }
    }
    executeCommand(command, value = '') {
        document.execCommand(command, false, value);
        this.onContentChange();
        this.getEditorElement()?.focus();
    }
    getEditorElement() {
        return document.getElementById('rich-text-editor-content');
    }
    formatText(command) {
        this.executeCommand(command);
    }
    insertLink() {
        const url = prompt('Enter URL:');
        if (url) {
            this.executeCommand('createLink', url);
        }
    }
    insertImage() {
        const url = prompt('Enter image URL:');
        if (url) {
            this.executeCommand('insertImage', url);
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: RichTextEditorComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.12", type: RichTextEditorComponent, isStandalone: true, selector: "app-rich-text-editor", inputs: { placeholder: "placeholder", height: "height", showToolbar: "showToolbar" }, outputs: { contentChange: "contentChange" }, providers: [
            {
                provide: NG_VALUE_ACCESSOR,
                useExisting: forwardRef(() => RichTextEditorComponent),
                multi: true
            }
        ], ngImport: i0, template: "<div class=\"rich-text-editor-container\">\n  @if (showToolbar) {\n    <div class=\"editor-toolbar\">\n      <div class=\"toolbar-group\">\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_bold'\" (btnClick)=\"formatText('bold')\" [class]=\"'toolbar-button'\" title=\"Bold\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_italic'\" (btnClick)=\"formatText('italic')\" [class]=\"'toolbar-button'\" title=\"Italic\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_underlined'\" (btnClick)=\"formatText('underline')\" [class]=\"'toolbar-button'\" title=\"Underline\"></app-button>\n      </div>\n      \n      <div class=\"toolbar-group\">\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_align_left'\" (btnClick)=\"formatText('justifyLeft')\" [class]=\"'toolbar-button'\" title=\"Align Left\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_align_center'\" (btnClick)=\"formatText('justifyCenter')\" [class]=\"'toolbar-button'\" title=\"Align Center\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_align_right'\" (btnClick)=\"formatText('justifyRight')\" [class]=\"'toolbar-button'\" title=\"Align Right\"></app-button>\n      </div>\n\n      <div class=\"toolbar-group\">\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_list_bulleted'\" (btnClick)=\"formatText('insertUnorderedList')\" [class]=\"'toolbar-button'\" title=\"Bullet List\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_list_numbered'\" (btnClick)=\"formatText('insertOrderedList')\" [class]=\"'toolbar-button'\" title=\"Numbered List\"></app-button>\n      </div>\n\n      <div class=\"toolbar-group\">\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'link'\" (btnClick)=\"insertLink()\" [class]=\"'toolbar-button'\" title=\"Insert Link\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'image'\" (btnClick)=\"insertImage()\" [class]=\"'toolbar-button'\" title=\"Insert Image\"></app-button>\n      </div>\n    </div>\n  }\n\n  <div\n    id=\"rich-text-editor-content\"\n    class=\"editor-content\"\n    [style.height]=\"height\"\n    contenteditable=\"true\"\n    [attr.placeholder]=\"placeholder\"\n    (input)=\"onContentChange()\"\n    (blur)=\"onTouched()\"\n  ></div>\n</div>\n\n", styles: [".rich-text-editor-container{border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.editor-toolbar{display:flex;gap:8px;padding:8px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0;flex-wrap:wrap}.toolbar-group{display:flex;gap:4px;padding-right:8px;border-right:1px solid #e0e0e0}.toolbar-group:last-child{border-right:none}.toolbar-group button{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;background-color:transparent;cursor:pointer;border-radius:4px;transition:background-color .2s}.toolbar-group button:hover{background-color:#e0e0e0}.toolbar-group button mat-icon{font-size:20px;width:20px;height:20px;color:#424242}.editor-content{padding:16px;outline:none;overflow-y:auto;min-height:100px;font-family:Arial,sans-serif;font-size:14px;line-height:1.5}.editor-content:empty:before{content:attr(placeholder);color:#9e9e9e}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "ngmodule", type: FormsModule }, { kind: "component", type: AppButtonComponent, selector: "app-button", inputs: ["color", "type", "disabled", "appearance", "class", "text", "fontIcon"], outputs: ["btnClick"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: RichTextEditorComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-rich-text-editor', standalone: true, imports: [
                        CommonModule,
                        FormsModule,
                        AppButtonComponent
                    ], providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => RichTextEditorComponent),
                            multi: true
                        }
                    ], template: "<div class=\"rich-text-editor-container\">\n  @if (showToolbar) {\n    <div class=\"editor-toolbar\">\n      <div class=\"toolbar-group\">\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_bold'\" (btnClick)=\"formatText('bold')\" [class]=\"'toolbar-button'\" title=\"Bold\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_italic'\" (btnClick)=\"formatText('italic')\" [class]=\"'toolbar-button'\" title=\"Italic\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_underlined'\" (btnClick)=\"formatText('underline')\" [class]=\"'toolbar-button'\" title=\"Underline\"></app-button>\n      </div>\n      \n      <div class=\"toolbar-group\">\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_align_left'\" (btnClick)=\"formatText('justifyLeft')\" [class]=\"'toolbar-button'\" title=\"Align Left\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_align_center'\" (btnClick)=\"formatText('justifyCenter')\" [class]=\"'toolbar-button'\" title=\"Align Center\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_align_right'\" (btnClick)=\"formatText('justifyRight')\" [class]=\"'toolbar-button'\" title=\"Align Right\"></app-button>\n      </div>\n\n      <div class=\"toolbar-group\">\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_list_bulleted'\" (btnClick)=\"formatText('insertUnorderedList')\" [class]=\"'toolbar-button'\" title=\"Bullet List\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'format_list_numbered'\" (btnClick)=\"formatText('insertOrderedList')\" [class]=\"'toolbar-button'\" title=\"Numbered List\"></app-button>\n      </div>\n\n      <div class=\"toolbar-group\">\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'link'\" (btnClick)=\"insertLink()\" [class]=\"'toolbar-button'\" title=\"Insert Link\"></app-button>\n        <app-button appearance=\"icon\" type=\"button\" [fontIcon]=\"'image'\" (btnClick)=\"insertImage()\" [class]=\"'toolbar-button'\" title=\"Insert Image\"></app-button>\n      </div>\n    </div>\n  }\n\n  <div\n    id=\"rich-text-editor-content\"\n    class=\"editor-content\"\n    [style.height]=\"height\"\n    contenteditable=\"true\"\n    [attr.placeholder]=\"placeholder\"\n    (input)=\"onContentChange()\"\n    (blur)=\"onTouched()\"\n  ></div>\n</div>\n\n", styles: [".rich-text-editor-container{border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.editor-toolbar{display:flex;gap:8px;padding:8px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0;flex-wrap:wrap}.toolbar-group{display:flex;gap:4px;padding-right:8px;border-right:1px solid #e0e0e0}.toolbar-group:last-child{border-right:none}.toolbar-group button{display:flex;align-items:center;justify-content:center;width:32px;height:32px;border:none;background-color:transparent;cursor:pointer;border-radius:4px;transition:background-color .2s}.toolbar-group button:hover{background-color:#e0e0e0}.toolbar-group button mat-icon{font-size:20px;width:20px;height:20px;color:#424242}.editor-content{padding:16px;outline:none;overflow-y:auto;min-height:100px;font-family:Arial,sans-serif;font-size:14px;line-height:1.5}.editor-content:empty:before{content:attr(placeholder);color:#9e9e9e}\n"] }]
        }], propDecorators: { placeholder: [{
                type: Input
            }], height: [{
                type: Input
            }], showToolbar: [{
                type: Input
            }], contentChange: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmljaC10ZXh0LWVkaXRvci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21tb24tbGlicy9jb3JlL3NyYy9saWIvdG9vbHMvcmljaC10ZXh0LWVkaXRvci9yaWNoLXRleHQtZWRpdG9yLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9yaWNoLXRleHQtZWRpdG9yL3JpY2gtdGV4dC1lZGl0b3IuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkYsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQy9DLE9BQU8sRUFBRSxXQUFXLEVBQXdCLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDdEYsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sb0NBQW9DLENBQUM7O0FBb0J4RSxNQUFNLE9BQU8sdUJBQXVCO0lBbEJwQztRQW1CVyxnQkFBVyxHQUFXLG9CQUFvQixDQUFDO1FBQzNDLFdBQU0sR0FBVyxPQUFPLENBQUM7UUFDekIsZ0JBQVcsR0FBWSxJQUFJLENBQUM7UUFFM0Isa0JBQWEsR0FBRyxJQUFJLFlBQVksRUFBVSxDQUFDO1FBRXJELFlBQU8sR0FBVyxFQUFFLENBQUM7UUFDYixhQUFRLEdBQUcsQ0FBQyxLQUFhLEVBQUUsRUFBRSxHQUFFLENBQUMsQ0FBQztRQUNsQyxjQUFTLEdBQUcsR0FBRyxFQUFFLEdBQUUsQ0FBQyxDQUFDO0tBcUQ3QjtJQW5EQyxVQUFVLENBQUMsS0FBYTtRQUN0QixJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssSUFBSSxFQUFFLENBQUM7UUFDM0IsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsRUFBRSxDQUFDO1lBQzVCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3BELENBQUM7SUFDSCxDQUFDO0lBRUQsZ0JBQWdCLENBQUMsRUFBMkI7UUFDMUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxFQUFFLENBQUM7SUFDckIsQ0FBQztJQUVELGlCQUFpQixDQUFDLEVBQWM7UUFDOUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVELGVBQWU7UUFDYixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUN2QyxJQUFJLE1BQU0sRUFBRSxDQUFDO1lBQ1gsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDO1lBQ2hDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUN4QyxDQUFDO0lBQ0gsQ0FBQztJQUVELGNBQWMsQ0FBQyxPQUFlLEVBQUUsUUFBZ0IsRUFBRTtRQUNoRCxRQUFRLENBQUMsV0FBVyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFDNUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxFQUFFLEtBQUssRUFBRSxDQUFDO0lBQ25DLENBQUM7SUFFRCxnQkFBZ0I7UUFDZCxPQUFPLFFBQVEsQ0FBQyxjQUFjLENBQUMsMEJBQTBCLENBQUMsQ0FBQztJQUM3RCxDQUFDO0lBRUQsVUFBVSxDQUFDLE9BQWU7UUFDeEIsSUFBSSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRUQsVUFBVTtRQUNSLE1BQU0sR0FBRyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUNqQyxJQUFJLEdBQUcsRUFBRSxDQUFDO1lBQ1IsSUFBSSxDQUFDLGNBQWMsQ0FBQyxZQUFZLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDekMsQ0FBQztJQUNILENBQUM7SUFFRCxXQUFXO1FBQ1QsTUFBTSxHQUFHLEdBQUcsTUFBTSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDdkMsSUFBSSxHQUFHLEVBQUUsQ0FBQztZQUNSLElBQUksQ0FBQyxjQUFjLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQzFDLENBQUM7SUFDSCxDQUFDOytHQTdEVSx1QkFBdUI7bUdBQXZCLHVCQUF1QixzTUFSdkI7WUFDVDtnQkFDRSxPQUFPLEVBQUUsaUJBQWlCO2dCQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSxDQUFDLHVCQUF1QixDQUFDO2dCQUN0RCxLQUFLLEVBQUUsSUFBSTthQUNaO1NBQ0YsMEJDckJILHk5RUFzQ0EsODZCRDdCSSxZQUFZLDhCQUNaLFdBQVcsK0JBQ1gsa0JBQWtCOzs0RkFZVCx1QkFBdUI7a0JBbEJuQyxTQUFTOytCQUNFLHNCQUFzQixjQUNwQixJQUFJLFdBQ1A7d0JBQ1AsWUFBWTt3QkFDWixXQUFXO3dCQUNYLGtCQUFrQjtxQkFDbkIsYUFHVTt3QkFDVDs0QkFDRSxPQUFPLEVBQUUsaUJBQWlCOzRCQUMxQixXQUFXLEVBQUUsVUFBVSxDQUFDLEdBQUcsRUFBRSx3QkFBd0IsQ0FBQzs0QkFDdEQsS0FBSyxFQUFFLElBQUk7eUJBQ1o7cUJBQ0Y7OEJBR1EsV0FBVztzQkFBbkIsS0FBSztnQkFDRyxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csV0FBVztzQkFBbkIsS0FBSztnQkFFSSxhQUFhO3NCQUF0QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIGZvcndhcmRSZWYgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IENvbW1vbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbic7XG5pbXBvcnQgeyBGb3Jtc01vZHVsZSwgQ29udHJvbFZhbHVlQWNjZXNzb3IsIE5HX1ZBTFVFX0FDQ0VTU09SIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgQXBwQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vYXBwLWJ1dHRvbi9hcHAtYnV0dG9uLmNvbXBvbmVudCc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2FwcC1yaWNoLXRleHQtZWRpdG9yJyxcbiAgc3RhbmRhbG9uZTogdHJ1ZSxcbiAgaW1wb3J0czogW1xuICAgIENvbW1vbk1vZHVsZSxcbiAgICBGb3Jtc01vZHVsZSxcbiAgICBBcHBCdXR0b25Db21wb25lbnRcbiAgXSxcbiAgdGVtcGxhdGVVcmw6ICcuL3JpY2gtdGV4dC1lZGl0b3IuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybDogJy4vcmljaC10ZXh0LWVkaXRvci5jb21wb25lbnQuc2NzcycsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gUmljaFRleHRFZGl0b3JDb21wb25lbnQpLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9XG4gIF1cbn0pXG5leHBvcnQgY2xhc3MgUmljaFRleHRFZGl0b3JDb21wb25lbnQgaW1wbGVtZW50cyBDb250cm9sVmFsdWVBY2Nlc3NvciB7XG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnRW50ZXIgdGV4dCBoZXJlLi4uJztcbiAgQElucHV0KCkgaGVpZ2h0OiBzdHJpbmcgPSAnMzAwcHgnO1xuICBASW5wdXQoKSBzaG93VG9vbGJhcjogYm9vbGVhbiA9IHRydWU7XG4gIFxuICBAT3V0cHV0KCkgY29udGVudENoYW5nZSA9IG5ldyBFdmVudEVtaXR0ZXI8c3RyaW5nPigpO1xuXG4gIGNvbnRlbnQ6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIG9uQ2hhbmdlID0gKHZhbHVlOiBzdHJpbmcpID0+IHt9O1xuICBwdWJsaWMgb25Ub3VjaGVkID0gKCkgPT4ge307XG5cbiAgd3JpdGVWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5jb250ZW50ID0gdmFsdWUgfHwgJyc7XG4gICAgaWYgKHRoaXMuZ2V0RWRpdG9yRWxlbWVudCgpKSB7XG4gICAgICB0aGlzLmdldEVkaXRvckVsZW1lbnQoKSEuaW5uZXJIVE1MID0gdGhpcy5jb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIHJlZ2lzdGVyT25DaGFuZ2UoZm46ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5vbkNoYW5nZSA9IGZuO1xuICB9XG5cbiAgcmVnaXN0ZXJPblRvdWNoZWQoZm46ICgpID0+IHZvaWQpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2hlZCA9IGZuO1xuICB9XG5cbiAgb25Db250ZW50Q2hhbmdlKCkge1xuICAgIGNvbnN0IGVkaXRvciA9IHRoaXMuZ2V0RWRpdG9yRWxlbWVudCgpO1xuICAgIGlmIChlZGl0b3IpIHtcbiAgICAgIHRoaXMuY29udGVudCA9IGVkaXRvci5pbm5lckhUTUw7XG4gICAgICB0aGlzLm9uQ2hhbmdlKHRoaXMuY29udGVudCk7XG4gICAgICB0aGlzLmNvbnRlbnRDaGFuZ2UuZW1pdCh0aGlzLmNvbnRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGV4ZWN1dGVDb21tYW5kKGNvbW1hbmQ6IHN0cmluZywgdmFsdWU6IHN0cmluZyA9ICcnKSB7XG4gICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoY29tbWFuZCwgZmFsc2UsIHZhbHVlKTtcbiAgICB0aGlzLm9uQ29udGVudENoYW5nZSgpO1xuICAgIHRoaXMuZ2V0RWRpdG9yRWxlbWVudCgpPy5mb2N1cygpO1xuICB9XG5cbiAgZ2V0RWRpdG9yRWxlbWVudCgpOiBIVE1MRWxlbWVudCB8IG51bGwge1xuICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmljaC10ZXh0LWVkaXRvci1jb250ZW50Jyk7XG4gIH1cblxuICBmb3JtYXRUZXh0KGNvbW1hbmQ6IHN0cmluZykge1xuICAgIHRoaXMuZXhlY3V0ZUNvbW1hbmQoY29tbWFuZCk7XG4gIH1cblxuICBpbnNlcnRMaW5rKCkge1xuICAgIGNvbnN0IHVybCA9IHByb21wdCgnRW50ZXIgVVJMOicpO1xuICAgIGlmICh1cmwpIHtcbiAgICAgIHRoaXMuZXhlY3V0ZUNvbW1hbmQoJ2NyZWF0ZUxpbmsnLCB1cmwpO1xuICAgIH1cbiAgfVxuXG4gIGluc2VydEltYWdlKCkge1xuICAgIGNvbnN0IHVybCA9IHByb21wdCgnRW50ZXIgaW1hZ2UgVVJMOicpO1xuICAgIGlmICh1cmwpIHtcbiAgICAgIHRoaXMuZXhlY3V0ZUNvbW1hbmQoJ2luc2VydEltYWdlJywgdXJsKTtcbiAgICB9XG4gIH1cbn1cblxuIiwiPGRpdiBjbGFzcz1cInJpY2gtdGV4dC1lZGl0b3ItY29udGFpbmVyXCI+XG4gIEBpZiAoc2hvd1Rvb2xiYXIpIHtcbiAgICA8ZGl2IGNsYXNzPVwiZWRpdG9yLXRvb2xiYXJcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0b29sYmFyLWdyb3VwXCI+XG4gICAgICAgIDxhcHAtYnV0dG9uIGFwcGVhcmFuY2U9XCJpY29uXCIgdHlwZT1cImJ1dHRvblwiIFtmb250SWNvbl09XCInZm9ybWF0X2JvbGQnXCIgKGJ0bkNsaWNrKT1cImZvcm1hdFRleHQoJ2JvbGQnKVwiIFtjbGFzc109XCIndG9vbGJhci1idXR0b24nXCIgdGl0bGU9XCJCb2xkXCI+PC9hcHAtYnV0dG9uPlxuICAgICAgICA8YXBwLWJ1dHRvbiBhcHBlYXJhbmNlPVwiaWNvblwiIHR5cGU9XCJidXR0b25cIiBbZm9udEljb25dPVwiJ2Zvcm1hdF9pdGFsaWMnXCIgKGJ0bkNsaWNrKT1cImZvcm1hdFRleHQoJ2l0YWxpYycpXCIgW2NsYXNzXT1cIid0b29sYmFyLWJ1dHRvbidcIiB0aXRsZT1cIkl0YWxpY1wiPjwvYXBwLWJ1dHRvbj5cbiAgICAgICAgPGFwcC1idXR0b24gYXBwZWFyYW5jZT1cImljb25cIiB0eXBlPVwiYnV0dG9uXCIgW2ZvbnRJY29uXT1cIidmb3JtYXRfdW5kZXJsaW5lZCdcIiAoYnRuQ2xpY2spPVwiZm9ybWF0VGV4dCgndW5kZXJsaW5lJylcIiBbY2xhc3NdPVwiJ3Rvb2xiYXItYnV0dG9uJ1wiIHRpdGxlPVwiVW5kZXJsaW5lXCI+PC9hcHAtYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgICBcbiAgICAgIDxkaXYgY2xhc3M9XCJ0b29sYmFyLWdyb3VwXCI+XG4gICAgICAgIDxhcHAtYnV0dG9uIGFwcGVhcmFuY2U9XCJpY29uXCIgdHlwZT1cImJ1dHRvblwiIFtmb250SWNvbl09XCInZm9ybWF0X2FsaWduX2xlZnQnXCIgKGJ0bkNsaWNrKT1cImZvcm1hdFRleHQoJ2p1c3RpZnlMZWZ0JylcIiBbY2xhc3NdPVwiJ3Rvb2xiYXItYnV0dG9uJ1wiIHRpdGxlPVwiQWxpZ24gTGVmdFwiPjwvYXBwLWJ1dHRvbj5cbiAgICAgICAgPGFwcC1idXR0b24gYXBwZWFyYW5jZT1cImljb25cIiB0eXBlPVwiYnV0dG9uXCIgW2ZvbnRJY29uXT1cIidmb3JtYXRfYWxpZ25fY2VudGVyJ1wiIChidG5DbGljayk9XCJmb3JtYXRUZXh0KCdqdXN0aWZ5Q2VudGVyJylcIiBbY2xhc3NdPVwiJ3Rvb2xiYXItYnV0dG9uJ1wiIHRpdGxlPVwiQWxpZ24gQ2VudGVyXCI+PC9hcHAtYnV0dG9uPlxuICAgICAgICA8YXBwLWJ1dHRvbiBhcHBlYXJhbmNlPVwiaWNvblwiIHR5cGU9XCJidXR0b25cIiBbZm9udEljb25dPVwiJ2Zvcm1hdF9hbGlnbl9yaWdodCdcIiAoYnRuQ2xpY2spPVwiZm9ybWF0VGV4dCgnanVzdGlmeVJpZ2h0JylcIiBbY2xhc3NdPVwiJ3Rvb2xiYXItYnV0dG9uJ1wiIHRpdGxlPVwiQWxpZ24gUmlnaHRcIj48L2FwcC1idXR0b24+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cInRvb2xiYXItZ3JvdXBcIj5cbiAgICAgICAgPGFwcC1idXR0b24gYXBwZWFyYW5jZT1cImljb25cIiB0eXBlPVwiYnV0dG9uXCIgW2ZvbnRJY29uXT1cIidmb3JtYXRfbGlzdF9idWxsZXRlZCdcIiAoYnRuQ2xpY2spPVwiZm9ybWF0VGV4dCgnaW5zZXJ0VW5vcmRlcmVkTGlzdCcpXCIgW2NsYXNzXT1cIid0b29sYmFyLWJ1dHRvbidcIiB0aXRsZT1cIkJ1bGxldCBMaXN0XCI+PC9hcHAtYnV0dG9uPlxuICAgICAgICA8YXBwLWJ1dHRvbiBhcHBlYXJhbmNlPVwiaWNvblwiIHR5cGU9XCJidXR0b25cIiBbZm9udEljb25dPVwiJ2Zvcm1hdF9saXN0X251bWJlcmVkJ1wiIChidG5DbGljayk9XCJmb3JtYXRUZXh0KCdpbnNlcnRPcmRlcmVkTGlzdCcpXCIgW2NsYXNzXT1cIid0b29sYmFyLWJ1dHRvbidcIiB0aXRsZT1cIk51bWJlcmVkIExpc3RcIj48L2FwcC1idXR0b24+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPGRpdiBjbGFzcz1cInRvb2xiYXItZ3JvdXBcIj5cbiAgICAgICAgPGFwcC1idXR0b24gYXBwZWFyYW5jZT1cImljb25cIiB0eXBlPVwiYnV0dG9uXCIgW2ZvbnRJY29uXT1cIidsaW5rJ1wiIChidG5DbGljayk9XCJpbnNlcnRMaW5rKClcIiBbY2xhc3NdPVwiJ3Rvb2xiYXItYnV0dG9uJ1wiIHRpdGxlPVwiSW5zZXJ0IExpbmtcIj48L2FwcC1idXR0b24+XG4gICAgICAgIDxhcHAtYnV0dG9uIGFwcGVhcmFuY2U9XCJpY29uXCIgdHlwZT1cImJ1dHRvblwiIFtmb250SWNvbl09XCInaW1hZ2UnXCIgKGJ0bkNsaWNrKT1cImluc2VydEltYWdlKClcIiBbY2xhc3NdPVwiJ3Rvb2xiYXItYnV0dG9uJ1wiIHRpdGxlPVwiSW5zZXJ0IEltYWdlXCI+PC9hcHAtYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gIH1cblxuICA8ZGl2XG4gICAgaWQ9XCJyaWNoLXRleHQtZWRpdG9yLWNvbnRlbnRcIlxuICAgIGNsYXNzPVwiZWRpdG9yLWNvbnRlbnRcIlxuICAgIFtzdHlsZS5oZWlnaHRdPVwiaGVpZ2h0XCJcbiAgICBjb250ZW50ZWRpdGFibGU9XCJ0cnVlXCJcbiAgICBbYXR0ci5wbGFjZWhvbGRlcl09XCJwbGFjZWhvbGRlclwiXG4gICAgKGlucHV0KT1cIm9uQ29udGVudENoYW5nZSgpXCJcbiAgICAoYmx1cik9XCJvblRvdWNoZWQoKVwiXG4gID48L2Rpdj5cbjwvZGl2PlxuXG4iXX0=