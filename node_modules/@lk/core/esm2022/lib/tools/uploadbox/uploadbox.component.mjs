import { Component, Input, Output, EventEmitter, inject } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatIconModule } from '@angular/material/icon';
import { MatButtonModule } from '@angular/material/button';
import { MatProgressBarModule } from '@angular/material/progress-bar';
import { MatCardModule } from '@angular/material/card';
import { MatSnackBar } from '@angular/material/snack-bar';
import { MatTooltipModule } from '@angular/material/tooltip';
import { IconComponent } from '../app-icon/icon.component';
import { AppButtonComponent } from '../app-button/app-button.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "@angular/material/progress-bar";
import * as i3 from "@angular/material/card";
export class UploadboxComponent {
    constructor() {
        this.multiple = false;
        this.accept = '*/*';
        this.maxFileSize = 10 * 1024 * 1024; // 10MB default
        this.maxFiles = 5;
        this.autoUpload = true;
        this.showPreview = true;
        this.dragDropEnabled = true;
        this.placeholder = 'Drop files here or click to browse';
        this.buttonText = 'Choose Files';
        this.filesSelected = new EventEmitter();
        this.fileUploaded = new EventEmitter();
        this.uploadComplete = new EventEmitter();
        this.uploadError = new EventEmitter();
        this.fileRemoved = new EventEmitter();
        this.uploadedFiles = [];
        this.isDragOver = false;
        this.isUploading = false;
        this.fileMap = new Map();
        this.snackBar = inject(MatSnackBar);
    }
    ngOnInit() { }
    onFileSelected(event) {
        const files = Array.from(event.target.files);
        this.handleFiles(files);
    }
    onDragOver(event) {
        event.preventDefault();
        event.stopPropagation();
        this.isDragOver = true;
    }
    onDragLeave(event) {
        event.preventDefault();
        event.stopPropagation();
        this.isDragOver = false;
    }
    onDrop(event) {
        event.preventDefault();
        event.stopPropagation();
        this.isDragOver = false;
        if (event.dataTransfer?.files) {
            const files = Array.from(event.dataTransfer.files);
            this.handleFiles(files);
        }
    }
    handleFiles(files) {
        // Validate number of files
        if (this.uploadedFiles.length + files.length > this.maxFiles) {
            this.showError(`Maximum ${this.maxFiles} files allowed`);
            return;
        }
        // Validate each file
        const validFiles = [];
        files.forEach(file => {
            if (this.validateFile(file)) {
                validFiles.push(file);
            }
        });
        if (validFiles.length === 0) {
            return;
        }
        // Emit selected files
        this.filesSelected.emit(validFiles);
        // Create uploaded file objects
        validFiles.forEach(file => {
            const uploadedFile = {
                id: this.generateId(),
                name: file.name,
                size: file.size,
                type: file.type,
                url: '',
                uploadedAt: new Date(),
                uploadedBy: 'user',
                isActive: true,
                status: 'pending'
            };
            this.uploadedFiles.push(uploadedFile);
            this.fileMap.set(uploadedFile.id, file);
            // Auto upload if enabled
            if (this.autoUpload) {
                this.uploadFile(file, uploadedFile);
            }
        });
    }
    validateFile(file) {
        // Check file size
        if (file.size > this.maxFileSize) {
            this.showError(`File ${file.name} is too large. Maximum size is ${this.formatFileSize(this.maxFileSize)}`);
            return false;
        }
        // Check file type if accept is specified
        if (this.accept !== '*/*') {
            const acceptedTypes = this.accept.split(',').map(type => type.trim());
            const isValidType = acceptedTypes.some(type => {
                if (type.endsWith('/*')) {
                    return file.type.startsWith(type.replace('/*', ''));
                }
                return file.type === type || file.name.toLowerCase().endsWith(type.replace('*', ''));
            });
            if (!isValidType) {
                this.showError(`File type not allowed for ${file.name}`);
                return false;
            }
        }
        return true;
    }
    async uploadFile(file, uploadedFile) {
        uploadedFile.status = 'uploading';
        uploadedFile.progress = 0;
        try {
            if (this.uploadUrl) {
                // Simulate upload to server
                await this.simulateUpload(file, uploadedFile);
            }
            else {
                // Create local URL for preview
                uploadedFile.url = URL.createObjectURL(file);
                uploadedFile.status = 'completed';
                uploadedFile.progress = 100;
            }
            this.fileUploaded.emit(uploadedFile);
            this.showSuccess(`File ${file.name} uploaded successfully`);
        }
        catch (error) {
            uploadedFile.status = 'error';
            uploadedFile.error = error instanceof Error ? error.message : 'Upload failed';
            this.uploadError.emit({ file, error: uploadedFile.error });
            this.showError(`Failed to upload ${file.name}`);
        }
    }
    async simulateUpload(file, uploadedFile) {
        return new Promise((resolve, reject) => {
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 30;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    uploadedFile.progress = progress;
                    uploadedFile.status = 'completed';
                    uploadedFile.url = URL.createObjectURL(file);
                    resolve();
                }
                else {
                    uploadedFile.progress = progress;
                }
            }, 200);
        });
    }
    removeFile(file) {
        const index = this.uploadedFiles.findIndex(f => f.id === file.id);
        if (index !== -1) {
            this.uploadedFiles.splice(index, 1);
            this.fileRemoved.emit(file);
            // Revoke object URL if it exists
            if (file.url) {
                URL.revokeObjectURL(file.url);
            }
            // Remove from file map
            this.fileMap.delete(file.id);
        }
    }
    uploadAll() {
        this.uploadedFiles
            .filter(file => file.status === 'pending')
            .forEach(file => {
            const originalFile = this.getOriginalFile(file);
            if (originalFile) {
                this.uploadFile(originalFile, file);
            }
        });
    }
    getOriginalFile(uploadedFile) {
        return this.fileMap.get(uploadedFile.id) || null;
    }
    hasPendingFiles() {
        return this.uploadedFiles.some(file => file.status === 'pending');
    }
    previewFile(file) {
        if (file.url) {
            window.open(file.url, '_blank');
        }
    }
    generateId() {
        return Math.random().toString(36).substr(2, 9);
    }
    formatFileSize(bytes) {
        if (bytes === 0)
            return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }
    showSuccess(message) {
        this.snackBar.open(message, 'Close', {
            duration: 3000,
            panelClass: ['success-snackbar']
        });
    }
    showError(message) {
        this.snackBar.open(message, 'Close', {
            duration: 5000,
            panelClass: ['error-snackbar']
        });
    }
    getFileIcon(fileType) {
        if (fileType.startsWith('image/'))
            return 'image';
        if (fileType.startsWith('video/'))
            return 'video_file';
        if (fileType.startsWith('audio/'))
            return 'audio_file';
        if (fileType.includes('pdf'))
            return 'picture_as_pdf';
        if (fileType.includes('word') || fileType.includes('document'))
            return 'description';
        if (fileType.includes('excel') || fileType.includes('spreadsheet'))
            return 'table_chart';
        if (fileType.includes('powerpoint') || fileType.includes('presentation'))
            return 'slideshow';
        return 'insert_drive_file';
    }
    getFileStatusColor(status) {
        switch (status) {
            case 'completed': return '#4caf50';
            case 'uploading': return '#2196f3';
            case 'error': return '#f44336';
            default: return '#9e9e9e';
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: UploadboxComponent, deps: [], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.12", type: UploadboxComponent, isStandalone: true, selector: "app-uploadbox", inputs: { multiple: "multiple", accept: "accept", maxFileSize: "maxFileSize", maxFiles: "maxFiles", uploadUrl: "uploadUrl", autoUpload: "autoUpload", showPreview: "showPreview", dragDropEnabled: "dragDropEnabled", placeholder: "placeholder", buttonText: "buttonText" }, outputs: { filesSelected: "filesSelected", fileUploaded: "fileUploaded", uploadComplete: "uploadComplete", uploadError: "uploadError", fileRemoved: "fileRemoved" }, ngImport: i0, template: "<div class=\"uploadbox-container\">\n  <!-- Drag and Drop Area -->\n  <div \n    class=\"upload-area\"\n    [class.drag-over]=\"isDragOver\"\n    [class.disabled]=\"!dragDropEnabled\"\n    (dragover)=\"onDragOver($event)\"\n    (dragleave)=\"onDragLeave($event)\"\n    (drop)=\"onDrop($event)\"\n    (click)=\"fileInput.click()\">\n    \n    <div class=\"upload-content\">\n      <app-icon \n        [fontIcon]=\"'cloud_upload'\" \n        class=\"upload-icon\">\n      </app-icon>\n      \n      <h3 class=\"upload-title\">{{ placeholder }}</h3>\n      \n      <p class=\"upload-subtitle\">\n        Maximum file size: {{ formatFileSize(maxFileSize) }} | \n        Max files: {{ maxFiles }}\n      </p>\n      \n      <app-button\n        type=\"button\"\n        appearance=\"raised\"\n        [text]=\"buttonText\"\n        (btnClick)=\"fileInput.click(); $event.stopPropagation()\"\n        class=\"upload-button\">\n        <app-icon [fontIcon]=\"'add'\" class=\"button-icon\"></app-icon>\n      </app-button>\n      \n      <input \n        #fileInput\n        type=\"file\"\n        [multiple]=\"multiple\"\n        [accept]=\"accept\"\n        (change)=\"onFileSelected($event)\"\n        style=\"display: none;\">\n    </div>\n  </div>\n\n  <!-- File List -->\n  <div class=\"file-list\" *ngIf=\"uploadedFiles.length > 0\">\n    <h4 class=\"file-list-title\">Uploaded Files ({{ uploadedFiles.length }}/{{ maxFiles }})</h4>\n    \n    <div class=\"file-items\">\n      <mat-card \n        *ngFor=\"let file of uploadedFiles\" \n        class=\"file-item\"\n        [class.uploading]=\"file.status === 'uploading'\"\n        [class.completed]=\"file.status === 'completed'\"\n        [class.error]=\"file.status === 'error'\">\n        \n        <div class=\"file-content\">\n          <!-- File Icon -->\n          <div class=\"file-icon\">\n            <app-icon \n              [fontIcon]=\"getFileIcon(file.type)\" \n              class=\"file-type-icon\">\n            </app-icon>\n          </div>\n          \n          <!-- File Info -->\n          <div class=\"file-info\">\n            <div class=\"file-name\">{{ file.name }}</div>\n            <div class=\"file-details\">\n              <span class=\"file-size\">{{ formatFileSize(file.size) }}</span>\n              <span class=\"file-type\">{{ file.type }}</span>\n            </div>\n            \n            <!-- Progress Bar -->\n            <mat-progress-bar \n              *ngIf=\"file.status === 'uploading'\"\n              [value]=\"file.progress || 0\"\n              class=\"upload-progress\">\n            </mat-progress-bar>\n            \n            <!-- Status -->\n            <div class=\"file-status\">\n              <span \n                class=\"status-indicator\"\n                [style.background-color]=\"getFileStatusColor(file.status)\">\n              </span>\n              <span class=\"status-text\">{{ file.status | titlecase }}</span>\n              <span *ngIf=\"file.progress && file.status === 'uploading'\" class=\"progress-text\">\n                {{ file.progress | number:'1.0-0' }}%\n              </span>\n            </div>\n            \n            <!-- Error Message -->\n            <div *ngIf=\"file.error\" class=\"error-message\">\n              {{ file.error }}\n            </div>\n          </div>\n          \n          <!-- Actions -->\n          <div class=\"file-actions\">\n            <!-- Preview Button -->\n            <app-button\n              *ngIf=\"showPreview && file.url && file.status === 'completed'\"\n              type=\"button\"\n              appearance=\"icon\"\n              fontIcon=\"visibility\"\n              (btnClick)=\"previewFile(file)\"\n              class=\"preview-button\">\n            </app-button>\n            \n            <!-- Remove Button -->\n            <app-button\n              type=\"button\"\n              appearance=\"icon\"\n              fontIcon=\"delete\"\n              (btnClick)=\"removeFile(file)\"\n              class=\"remove-button\">\n            </app-button>\n          </div>\n        </div>\n      </mat-card>\n    </div>\n    \n    <!-- Upload All Button -->\n    <div class=\"upload-actions\" *ngIf=\"hasPendingFiles()\">\n      <app-button\n        type=\"button\"\n        appearance=\"raised\"\n        text=\"Upload All Files\"\n        [disabled]=\"isUploading\"\n        (btnClick)=\"uploadAll()\"\n        class=\"upload-all-button\">\n        <app-icon [fontIcon]=\"'cloud_upload'\" class=\"button-icon\"></app-icon>\n      </app-button>\n    </div>\n  </div>\n</div> ", styles: [".uploadbox-container{width:100%;max-width:800px;margin:0 auto}.upload-area{border:2px dashed #e0e0e0;border-radius:12px;padding:40px 20px;text-align:center;background:#fafafa;transition:all .3s ease;cursor:pointer;margin-bottom:20px}.upload-area:hover{border-color:#2196f3;background:#f3f8ff}.upload-area.drag-over{border-color:#2196f3;background:#e3f2fd;transform:scale(1.02)}.upload-area.disabled{opacity:.6;cursor:not-allowed}.upload-area.disabled:hover{border-color:#e0e0e0;background:#fafafa;transform:none}.upload-content .upload-icon{font-size:48px;color:#2196f3;margin-bottom:16px}.upload-content .upload-title{margin:0 0 8px;font-size:18px;font-weight:500;color:#333}.upload-content .upload-subtitle{margin:0 0 24px;font-size:14px;color:#666;line-height:1.4}.upload-content .upload-button .button-icon{margin-right:8px}.file-list .file-list-title{margin:0 0 16px;font-size:16px;font-weight:500;color:#333}.file-items{display:flex;flex-direction:column;gap:12px;max-height:18em;overflow-y:scroll;overflow-x:hidden;padding-right:.5em}.file-item{border:1px solid #e0e0e0;border-radius:8px;transition:all .3s ease}.file-item:hover{box-shadow:0 2px 8px #0000001a}.file-item.uploading{border-color:#2196f3;background:#f3f8ff}.file-item.completed{border-color:#4caf50;background:#f1f8e9}.file-item.error{border-color:#f44336;background:#ffebee}.file-content{display:flex;align-items:center;gap:16px;padding:16px}.file-icon{flex-shrink:0;width:48px;height:48px;border-radius:8px;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.file-icon .file-type-icon{font-size:24px;color:#666}.file-info{flex:1;min-width:0}.file-info .file-name{font-size:14px;font-weight:500;color:#333;margin-bottom:4px;word-break:break-word}.file-info .file-details{display:flex;gap:16px;margin-bottom:8px}.file-info .file-details .file-size,.file-info .file-details .file-type{font-size:12px;color:#666}.file-info .upload-progress{margin-bottom:8px}.file-info .file-status{display:flex;align-items:center;gap:8px}.file-info .file-status .status-indicator{width:8px;height:8px;border-radius:50%}.file-info .file-status .status-text{font-size:12px;font-weight:500;color:#666}.file-info .file-status .progress-text{font-size:12px;color:#2196f3;font-weight:500}.file-info .error-message{font-size:12px;color:#f44336;margin-top:4px}.file-actions{display:flex;gap:8px;flex-shrink:0}.file-actions .preview-button,.file-actions .remove-button{width:32px;height:32px;line-height:32px}.file-actions .preview-button ::ng-deep .mat-icon,.file-actions .remove-button ::ng-deep .mat-icon{font-size:18px}.file-actions .preview-button{color:#2196f3}.file-actions .remove-button{color:#f44336}.upload-actions{margin-top:20px;text-align:center}.upload-actions .button-icon{margin-right:8px}@media (max-width: 768px){.uploadbox-container{padding:0 16px}.upload-area{padding:24px 16px}.upload-area .upload-content .upload-icon{font-size:36px}.upload-area .upload-content .upload-title{font-size:16px}.upload-area .upload-content .upload-subtitle{font-size:13px}.file-content{padding:12px;gap:12px}.file-icon{width:40px;height:40px}.file-icon .file-type-icon{font-size:20px}.file-info .file-name{font-size:13px}.file-info .file-details{font-size:11px}.file-actions .preview-button,.file-actions .remove-button{width:28px;height:28px;line-height:28px}.file-actions .preview-button ::ng-deep .mat-icon,.file-actions .remove-button ::ng-deep .mat-icon{font-size:16px}}@media (prefers-color-scheme: dark){.upload-area{border-color:#424242;background:#1e1e1e}.upload-area:hover{border-color:#64b5f6;background:#1a237e}.upload-area.drag-over{border-color:#64b5f6;background:#0d47a1}.upload-content .upload-icon{color:#64b5f6}.upload-content .upload-title{color:#fff}.upload-content .upload-subtitle{color:#b0b0b0}.file-list-title{color:#fff}.file-item{border-color:#424242;background:#1e1e1e}.file-item.uploading{border-color:#64b5f6;background:#1a237e}.file-item.completed{border-color:#66bb6a;background:#1b5e20}.file-item.error{border-color:#ef5350;background:#b71c1c}.file-icon{background:#2d2d2d}.file-icon .file-type-icon{color:#b0b0b0}.file-info .file-name{color:#fff}.file-info .file-details .file-size,.file-info .file-details .file-type,.file-info .file-status .status-text{color:#b0b0b0}.file-info .file-status .progress-text{color:#64b5f6}.file-info .error-message{color:#ef5350}}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "directive", type: i1.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "pipe", type: i1.DecimalPipe, name: "number" }, { kind: "pipe", type: i1.TitleCasePipe, name: "titlecase" }, { kind: "ngmodule", type: MatIconModule }, { kind: "ngmodule", type: MatButtonModule }, { kind: "ngmodule", type: MatProgressBarModule }, { kind: "component", type: i2.MatProgressBar, selector: "mat-progress-bar", inputs: ["color", "value", "bufferValue", "mode"], outputs: ["animationEnd"], exportAs: ["matProgressBar"] }, { kind: "ngmodule", type: MatCardModule }, { kind: "component", type: i3.MatCard, selector: "mat-card", inputs: ["appearance"], exportAs: ["matCard"] }, { kind: "ngmodule", type: MatTooltipModule }, { kind: "component", type: IconComponent, selector: "app-icon", inputs: ["fontSet", "fontIcon", "iconType", "icomoonClass", "size", "isBlink", "fontBold", "color", "class", "counter", "isCovered"], outputs: ["iconClick"] }, { kind: "component", type: AppButtonComponent, selector: "app-button", inputs: ["color", "type", "disabled", "appearance", "class", "text", "fontIcon"], outputs: ["btnClick"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: UploadboxComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-uploadbox', standalone: true, imports: [
                        CommonModule,
                        MatIconModule,
                        MatButtonModule,
                        MatProgressBarModule,
                        MatCardModule,
                        MatTooltipModule,
                        IconComponent,
                        AppButtonComponent
                    ], template: "<div class=\"uploadbox-container\">\n  <!-- Drag and Drop Area -->\n  <div \n    class=\"upload-area\"\n    [class.drag-over]=\"isDragOver\"\n    [class.disabled]=\"!dragDropEnabled\"\n    (dragover)=\"onDragOver($event)\"\n    (dragleave)=\"onDragLeave($event)\"\n    (drop)=\"onDrop($event)\"\n    (click)=\"fileInput.click()\">\n    \n    <div class=\"upload-content\">\n      <app-icon \n        [fontIcon]=\"'cloud_upload'\" \n        class=\"upload-icon\">\n      </app-icon>\n      \n      <h3 class=\"upload-title\">{{ placeholder }}</h3>\n      \n      <p class=\"upload-subtitle\">\n        Maximum file size: {{ formatFileSize(maxFileSize) }} | \n        Max files: {{ maxFiles }}\n      </p>\n      \n      <app-button\n        type=\"button\"\n        appearance=\"raised\"\n        [text]=\"buttonText\"\n        (btnClick)=\"fileInput.click(); $event.stopPropagation()\"\n        class=\"upload-button\">\n        <app-icon [fontIcon]=\"'add'\" class=\"button-icon\"></app-icon>\n      </app-button>\n      \n      <input \n        #fileInput\n        type=\"file\"\n        [multiple]=\"multiple\"\n        [accept]=\"accept\"\n        (change)=\"onFileSelected($event)\"\n        style=\"display: none;\">\n    </div>\n  </div>\n\n  <!-- File List -->\n  <div class=\"file-list\" *ngIf=\"uploadedFiles.length > 0\">\n    <h4 class=\"file-list-title\">Uploaded Files ({{ uploadedFiles.length }}/{{ maxFiles }})</h4>\n    \n    <div class=\"file-items\">\n      <mat-card \n        *ngFor=\"let file of uploadedFiles\" \n        class=\"file-item\"\n        [class.uploading]=\"file.status === 'uploading'\"\n        [class.completed]=\"file.status === 'completed'\"\n        [class.error]=\"file.status === 'error'\">\n        \n        <div class=\"file-content\">\n          <!-- File Icon -->\n          <div class=\"file-icon\">\n            <app-icon \n              [fontIcon]=\"getFileIcon(file.type)\" \n              class=\"file-type-icon\">\n            </app-icon>\n          </div>\n          \n          <!-- File Info -->\n          <div class=\"file-info\">\n            <div class=\"file-name\">{{ file.name }}</div>\n            <div class=\"file-details\">\n              <span class=\"file-size\">{{ formatFileSize(file.size) }}</span>\n              <span class=\"file-type\">{{ file.type }}</span>\n            </div>\n            \n            <!-- Progress Bar -->\n            <mat-progress-bar \n              *ngIf=\"file.status === 'uploading'\"\n              [value]=\"file.progress || 0\"\n              class=\"upload-progress\">\n            </mat-progress-bar>\n            \n            <!-- Status -->\n            <div class=\"file-status\">\n              <span \n                class=\"status-indicator\"\n                [style.background-color]=\"getFileStatusColor(file.status)\">\n              </span>\n              <span class=\"status-text\">{{ file.status | titlecase }}</span>\n              <span *ngIf=\"file.progress && file.status === 'uploading'\" class=\"progress-text\">\n                {{ file.progress | number:'1.0-0' }}%\n              </span>\n            </div>\n            \n            <!-- Error Message -->\n            <div *ngIf=\"file.error\" class=\"error-message\">\n              {{ file.error }}\n            </div>\n          </div>\n          \n          <!-- Actions -->\n          <div class=\"file-actions\">\n            <!-- Preview Button -->\n            <app-button\n              *ngIf=\"showPreview && file.url && file.status === 'completed'\"\n              type=\"button\"\n              appearance=\"icon\"\n              fontIcon=\"visibility\"\n              (btnClick)=\"previewFile(file)\"\n              class=\"preview-button\">\n            </app-button>\n            \n            <!-- Remove Button -->\n            <app-button\n              type=\"button\"\n              appearance=\"icon\"\n              fontIcon=\"delete\"\n              (btnClick)=\"removeFile(file)\"\n              class=\"remove-button\">\n            </app-button>\n          </div>\n        </div>\n      </mat-card>\n    </div>\n    \n    <!-- Upload All Button -->\n    <div class=\"upload-actions\" *ngIf=\"hasPendingFiles()\">\n      <app-button\n        type=\"button\"\n        appearance=\"raised\"\n        text=\"Upload All Files\"\n        [disabled]=\"isUploading\"\n        (btnClick)=\"uploadAll()\"\n        class=\"upload-all-button\">\n        <app-icon [fontIcon]=\"'cloud_upload'\" class=\"button-icon\"></app-icon>\n      </app-button>\n    </div>\n  </div>\n</div> ", styles: [".uploadbox-container{width:100%;max-width:800px;margin:0 auto}.upload-area{border:2px dashed #e0e0e0;border-radius:12px;padding:40px 20px;text-align:center;background:#fafafa;transition:all .3s ease;cursor:pointer;margin-bottom:20px}.upload-area:hover{border-color:#2196f3;background:#f3f8ff}.upload-area.drag-over{border-color:#2196f3;background:#e3f2fd;transform:scale(1.02)}.upload-area.disabled{opacity:.6;cursor:not-allowed}.upload-area.disabled:hover{border-color:#e0e0e0;background:#fafafa;transform:none}.upload-content .upload-icon{font-size:48px;color:#2196f3;margin-bottom:16px}.upload-content .upload-title{margin:0 0 8px;font-size:18px;font-weight:500;color:#333}.upload-content .upload-subtitle{margin:0 0 24px;font-size:14px;color:#666;line-height:1.4}.upload-content .upload-button .button-icon{margin-right:8px}.file-list .file-list-title{margin:0 0 16px;font-size:16px;font-weight:500;color:#333}.file-items{display:flex;flex-direction:column;gap:12px;max-height:18em;overflow-y:scroll;overflow-x:hidden;padding-right:.5em}.file-item{border:1px solid #e0e0e0;border-radius:8px;transition:all .3s ease}.file-item:hover{box-shadow:0 2px 8px #0000001a}.file-item.uploading{border-color:#2196f3;background:#f3f8ff}.file-item.completed{border-color:#4caf50;background:#f1f8e9}.file-item.error{border-color:#f44336;background:#ffebee}.file-content{display:flex;align-items:center;gap:16px;padding:16px}.file-icon{flex-shrink:0;width:48px;height:48px;border-radius:8px;background:#f5f5f5;display:flex;align-items:center;justify-content:center}.file-icon .file-type-icon{font-size:24px;color:#666}.file-info{flex:1;min-width:0}.file-info .file-name{font-size:14px;font-weight:500;color:#333;margin-bottom:4px;word-break:break-word}.file-info .file-details{display:flex;gap:16px;margin-bottom:8px}.file-info .file-details .file-size,.file-info .file-details .file-type{font-size:12px;color:#666}.file-info .upload-progress{margin-bottom:8px}.file-info .file-status{display:flex;align-items:center;gap:8px}.file-info .file-status .status-indicator{width:8px;height:8px;border-radius:50%}.file-info .file-status .status-text{font-size:12px;font-weight:500;color:#666}.file-info .file-status .progress-text{font-size:12px;color:#2196f3;font-weight:500}.file-info .error-message{font-size:12px;color:#f44336;margin-top:4px}.file-actions{display:flex;gap:8px;flex-shrink:0}.file-actions .preview-button,.file-actions .remove-button{width:32px;height:32px;line-height:32px}.file-actions .preview-button ::ng-deep .mat-icon,.file-actions .remove-button ::ng-deep .mat-icon{font-size:18px}.file-actions .preview-button{color:#2196f3}.file-actions .remove-button{color:#f44336}.upload-actions{margin-top:20px;text-align:center}.upload-actions .button-icon{margin-right:8px}@media (max-width: 768px){.uploadbox-container{padding:0 16px}.upload-area{padding:24px 16px}.upload-area .upload-content .upload-icon{font-size:36px}.upload-area .upload-content .upload-title{font-size:16px}.upload-area .upload-content .upload-subtitle{font-size:13px}.file-content{padding:12px;gap:12px}.file-icon{width:40px;height:40px}.file-icon .file-type-icon{font-size:20px}.file-info .file-name{font-size:13px}.file-info .file-details{font-size:11px}.file-actions .preview-button,.file-actions .remove-button{width:28px;height:28px;line-height:28px}.file-actions .preview-button ::ng-deep .mat-icon,.file-actions .remove-button ::ng-deep .mat-icon{font-size:16px}}@media (prefers-color-scheme: dark){.upload-area{border-color:#424242;background:#1e1e1e}.upload-area:hover{border-color:#64b5f6;background:#1a237e}.upload-area.drag-over{border-color:#64b5f6;background:#0d47a1}.upload-content .upload-icon{color:#64b5f6}.upload-content .upload-title{color:#fff}.upload-content .upload-subtitle{color:#b0b0b0}.file-list-title{color:#fff}.file-item{border-color:#424242;background:#1e1e1e}.file-item.uploading{border-color:#64b5f6;background:#1a237e}.file-item.completed{border-color:#66bb6a;background:#1b5e20}.file-item.error{border-color:#ef5350;background:#b71c1c}.file-icon{background:#2d2d2d}.file-icon .file-type-icon{color:#b0b0b0}.file-info .file-name{color:#fff}.file-info .file-details .file-size,.file-info .file-details .file-type,.file-info .file-status .status-text{color:#b0b0b0}.file-info .file-status .progress-text{color:#64b5f6}.file-info .error-message{color:#ef5350}}\n"] }]
        }], propDecorators: { multiple: [{
                type: Input
            }], accept: [{
                type: Input
            }], maxFileSize: [{
                type: Input
            }], maxFiles: [{
                type: Input
            }], uploadUrl: [{
                type: Input
            }], autoUpload: [{
                type: Input
            }], showPreview: [{
                type: Input
            }], dragDropEnabled: [{
                type: Input
            }], placeholder: [{
                type: Input
            }], buttonText: [{
                type: Input
            }], filesSelected: [{
                type: Output
            }], fileUploaded: [{
                type: Output
            }], uploadComplete: [{
                type: Output
            }], uploadError: [{
                type: Output
            }], fileRemoved: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXBsb2FkYm94LmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy91cGxvYWRib3gvdXBsb2FkYm94LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy91cGxvYWRib3gvdXBsb2FkYm94LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQVUsTUFBTSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQ3ZGLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUMvQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDdkQsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQzNELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLGdDQUFnQyxDQUFDO0FBQ3RFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDN0QsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDOzs7OztBQW1CeEUsTUFBTSxPQUFPLGtCQUFrQjtJQWhCL0I7UUFpQlcsYUFBUSxHQUFZLEtBQUssQ0FBQztRQUMxQixXQUFNLEdBQVcsS0FBSyxDQUFDO1FBQ3ZCLGdCQUFXLEdBQVcsRUFBRSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsQ0FB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RyxXQUFXO3NCQUFuQixLQUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csV0FBVztzQkFBbkIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUVJLGFBQWE7c0JBQXRCLE1BQU07Z0JBQ0csWUFBWTtzQkFBckIsTUFBTTtnQkFDRyxjQUFjO3NCQUF2QixNQUFNO2dCQUNHLFdBQVc7c0JBQXBCLE1BQU07Z0JBQ0csV0FBVztzQkFBcEIsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE91dHB1dCwgRXZlbnRFbWl0dGVyLCBPbkluaXQsIGluamVjdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IE1hdEljb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9pY29uJztcbmltcG9ydCB7IE1hdEJ1dHRvbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2J1dHRvbic7XG5pbXBvcnQgeyBNYXRQcm9ncmVzc0Jhck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3Byb2dyZXNzLWJhcic7XG5pbXBvcnQgeyBNYXRDYXJkTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvY2FyZCc7XG5pbXBvcnQgeyBNYXRTbmFja0JhciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3NuYWNrLWJhcic7XG5pbXBvcnQgeyBNYXRUb29sdGlwTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvdG9vbHRpcCc7XG5pbXBvcnQgeyBJY29uQ29tcG9uZW50IH0gZnJvbSAnLi4vYXBwLWljb24vaWNvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgQXBwQnV0dG9uQ29tcG9uZW50IH0gZnJvbSAnLi4vYXBwLWJ1dHRvbi9hcHAtYnV0dG9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBVcGxvYWRlZEZpbGUgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3VwbG9hZGVkLWZpbGUuaW50ZXJmYWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYXBwLXVwbG9hZGJveCcsXG4gIHN0YW5kYWxvbmU6IHRydWUsXG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgTWF0SWNvbk1vZHVsZSxcbiAgICBNYXRCdXR0b25Nb2R1bGUsXG4gICAgTWF0UHJvZ3Jlc3NCYXJNb2R1bGUsXG4gICAgTWF0Q2FyZE1vZHVsZSxcbiAgICBNYXRUb29sdGlwTW9kdWxlLFxuICAgIEljb25Db21wb25lbnQsXG4gICAgQXBwQnV0dG9uQ29tcG9uZW50XG4gIF0sXG4gIHRlbXBsYXRlVXJsOiAnLi91cGxvYWRib3guY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybDogJy4vdXBsb2FkYm94LmNvbXBvbmVudC5zY3NzJ1xufSlcbmV4cG9ydCBjbGFzcyBVcGxvYWRib3hDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuICBASW5wdXQoKSBtdWx0aXBsZTogYm9vbGVhbiA9IGZhbHNlO1xuICBASW5wdXQoKSBhY2NlcHQ6IHN0cmluZyA9ICcqLyonO1xuICBASW5wdXQoKSBtYXhGaWxlU2l6ZTogbnVtYmVyID0gMTAgKiAxMDI0ICogMTAyNDsgLy8gMTBNQiBkZWZhdWx0XG4gIEBJbnB1dCgpIG1heEZpbGVzOiBudW1iZXIgPSA1O1xuICBASW5wdXQoKSB1cGxvYWRVcmw/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGF1dG9VcGxvYWQ6IGJvb2xlYW4gPSB0cnVlO1xuICBASW5wdXQoKSBzaG93UHJldmlldzogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIGRyYWdEcm9wRW5hYmxlZDogYm9vbGVhbiA9IHRydWU7XG4gIEBJbnB1dCgpIHBsYWNlaG9sZGVyOiBzdHJpbmcgPSAnRHJvcCBmaWxlcyBoZXJlIG9yIGNsaWNrIHRvIGJyb3dzZSc7XG4gIEBJbnB1dCgpIGJ1dHRvblRleHQ6IHN0cmluZyA9ICdDaG9vc2UgRmlsZXMnO1xuICBcbiAgQE91dHB1dCgpIGZpbGVzU2VsZWN0ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPEZpbGVbXT4oKTtcbiAgQE91dHB1dCgpIGZpbGVVcGxvYWRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8VXBsb2FkZWRGaWxlPigpO1xuICBAT3V0cHV0KCkgdXBsb2FkQ29tcGxldGUgPSBuZXcgRXZlbnRFbWl0dGVyPFVwbG9hZGVkRmlsZVtdPigpO1xuICBAT3V0cHV0KCkgdXBsb2FkRXJyb3IgPSBuZXcgRXZlbnRFbWl0dGVyPHsgZmlsZTogRmlsZTsgZXJyb3I6IHN0cmluZyB9PigpO1xuICBAT3V0cHV0KCkgZmlsZVJlbW92ZWQgPSBuZXcgRXZlbnRFbWl0dGVyPFVwbG9hZGVkRmlsZT4oKTtcblxuICB1cGxvYWRlZEZpbGVzOiBVcGxvYWRlZEZpbGVbXSA9IFtdO1xuICBpc0RyYWdPdmVyOiBib29sZWFuID0gZmFsc2U7XG4gIGlzVXBsb2FkaW5nOiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgZmlsZU1hcCA9IG5ldyBNYXA8c3RyaW5nLCBGaWxlPigpO1xuXG4gIHByaXZhdGUgc25hY2tCYXIgPSBpbmplY3QoTWF0U25hY2tCYXIpO1xuXG4gIG5nT25Jbml0KCkge31cblxuICBvbkZpbGVTZWxlY3RlZChldmVudDogYW55KSB7XG4gICAgY29uc3QgZmlsZXM6IEZpbGVbXSA9IEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LmZpbGVzKTtcbiAgICB0aGlzLmhhbmRsZUZpbGVzKGZpbGVzKTtcbiAgfVxuXG4gIG9uRHJhZ092ZXIoZXZlbnQ6IERyYWdFdmVudCkge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgdGhpcy5pc0RyYWdPdmVyID0gdHJ1ZTtcbiAgfVxuXG4gIG9uRHJhZ0xlYXZlKGV2ZW50OiBEcmFnRXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuaXNEcmFnT3ZlciA9IGZhbHNlO1xuICB9XG5cbiAgb25Ecm9wKGV2ZW50OiBEcmFnRXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuaXNEcmFnT3ZlciA9IGZhbHNlO1xuXG4gICAgaWYgKGV2ZW50LmRhdGFUcmFuc2Zlcj8uZmlsZXMpIHtcbiAgICAgIGNvbnN0IGZpbGVzOiBGaWxlW10gPSBBcnJheS5mcm9tKGV2ZW50LmRhdGFUcmFuc2Zlci5maWxlcyk7XG4gICAgICB0aGlzLmhhbmRsZUZpbGVzKGZpbGVzKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUZpbGVzKGZpbGVzOiBGaWxlW10pIHtcbiAgICAvLyBWYWxpZGF0ZSBudW1iZXIgb2YgZmlsZXNcbiAgICBpZiAodGhpcy51cGxvYWRlZEZpbGVzLmxlbmd0aCArIGZpbGVzLmxlbmd0aCA+IHRoaXMubWF4RmlsZXMpIHtcbiAgICAgIHRoaXMuc2hvd0Vycm9yKGBNYXhpbXVtICR7dGhpcy5tYXhGaWxlc30gZmlsZXMgYWxsb3dlZGApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFZhbGlkYXRlIGVhY2ggZmlsZVxuICAgIGNvbnN0IHZhbGlkRmlsZXM6IEZpbGVbXSA9IFtdO1xuICAgIGZpbGVzLmZvckVhY2goZmlsZSA9PiB7XG4gICAgICBpZiAodGhpcy52YWxpZGF0ZUZpbGUoZmlsZSkpIHtcbiAgICAgICAgdmFsaWRGaWxlcy5wdXNoKGZpbGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHZhbGlkRmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW1pdCBzZWxlY3RlZCBmaWxlc1xuICAgIHRoaXMuZmlsZXNTZWxlY3RlZC5lbWl0KHZhbGlkRmlsZXMpO1xuXG4gICAgLy8gQ3JlYXRlIHVwbG9hZGVkIGZpbGUgb2JqZWN0c1xuICAgIHZhbGlkRmlsZXMuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgIGNvbnN0IHVwbG9hZGVkRmlsZTogVXBsb2FkZWRGaWxlID0ge1xuICAgICAgICBpZDogdGhpcy5nZW5lcmF0ZUlkKCksXG4gICAgICAgIG5hbWU6IGZpbGUubmFtZSxcbiAgICAgICAgc2l6ZTogZmlsZS5zaXplLFxuICAgICAgICB0eXBlOiBmaWxlLnR5cGUsXG4gICAgICAgIHVybDogJycsXG4gICAgICAgIHVwbG9hZGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgIHVwbG9hZGVkQnk6ICd1c2VyJyxcbiAgICAgICAgaXNBY3RpdmU6IHRydWUsXG4gICAgICAgIHN0YXR1czogJ3BlbmRpbmcnXG4gICAgICB9O1xuXG4gICAgICB0aGlzLnVwbG9hZGVkRmlsZXMucHVzaCh1cGxvYWRlZEZpbGUpO1xuICAgICAgdGhpcy5maWxlTWFwLnNldCh1cGxvYWRlZEZpbGUuaWQsIGZpbGUpO1xuXG4gICAgICAvLyBBdXRvIHVwbG9hZCBpZiBlbmFibGVkXG4gICAgICBpZiAodGhpcy5hdXRvVXBsb2FkKSB7XG4gICAgICAgIHRoaXMudXBsb2FkRmlsZShmaWxlLCB1cGxvYWRlZEZpbGUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZUZpbGUoZmlsZTogRmlsZSk6IGJvb2xlYW4ge1xuICAgIC8vIENoZWNrIGZpbGUgc2l6ZVxuICAgIGlmIChmaWxlLnNpemUgPiB0aGlzLm1heEZpbGVTaXplKSB7XG4gICAgICB0aGlzLnNob3dFcnJvcihgRmlsZSAke2ZpbGUubmFtZX0gaXMgdG9vIGxhcmdlLiBNYXhpbXVtIHNpemUgaXMgJHt0aGlzLmZvcm1hdEZpbGVTaXplKHRoaXMubWF4RmlsZVNpemUpfWApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZpbGUgdHlwZSBpZiBhY2NlcHQgaXMgc3BlY2lmaWVkXG4gICAgaWYgKHRoaXMuYWNjZXB0ICE9PSAnKi8qJykge1xuICAgICAgY29uc3QgYWNjZXB0ZWRUeXBlcyA9IHRoaXMuYWNjZXB0LnNwbGl0KCcsJykubWFwKHR5cGUgPT4gdHlwZS50cmltKCkpO1xuICAgICAgY29uc3QgaXNWYWxpZFR5cGUgPSBhY2NlcHRlZFR5cGVzLnNvbWUodHlwZSA9PiB7XG4gICAgICAgIGlmICh0eXBlLmVuZHNXaXRoKCcvKicpKSB7XG4gICAgICAgICAgcmV0dXJuIGZpbGUudHlwZS5zdGFydHNXaXRoKHR5cGUucmVwbGFjZSgnLyonLCAnJykpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaWxlLnR5cGUgPT09IHR5cGUgfHwgZmlsZS5uYW1lLnRvTG93ZXJDYXNlKCkuZW5kc1dpdGgodHlwZS5yZXBsYWNlKCcqJywgJycpKTtcbiAgICAgIH0pO1xuXG4gICAgICBpZiAoIWlzVmFsaWRUeXBlKSB7XG4gICAgICAgIHRoaXMuc2hvd0Vycm9yKGBGaWxlIHR5cGUgbm90IGFsbG93ZWQgZm9yICR7ZmlsZS5uYW1lfWApO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHVwbG9hZEZpbGUoZmlsZTogRmlsZSwgdXBsb2FkZWRGaWxlOiBVcGxvYWRlZEZpbGUpIHtcbiAgICB1cGxvYWRlZEZpbGUuc3RhdHVzID0gJ3VwbG9hZGluZyc7XG4gICAgdXBsb2FkZWRGaWxlLnByb2dyZXNzID0gMDtcblxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy51cGxvYWRVcmwpIHtcbiAgICAgICAgLy8gU2ltdWxhdGUgdXBsb2FkIHRvIHNlcnZlclxuICAgICAgICBhd2FpdCB0aGlzLnNpbXVsYXRlVXBsb2FkKGZpbGUsIHVwbG9hZGVkRmlsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBDcmVhdGUgbG9jYWwgVVJMIGZvciBwcmV2aWV3XG4gICAgICAgIHVwbG9hZGVkRmlsZS51cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICB1cGxvYWRlZEZpbGUuc3RhdHVzID0gJ2NvbXBsZXRlZCc7XG4gICAgICAgIHVwbG9hZGVkRmlsZS5wcm9ncmVzcyA9IDEwMDtcbiAgICAgIH1cblxuICAgICAgdGhpcy5maWxlVXBsb2FkZWQuZW1pdCh1cGxvYWRlZEZpbGUpO1xuICAgICAgdGhpcy5zaG93U3VjY2VzcyhgRmlsZSAke2ZpbGUubmFtZX0gdXBsb2FkZWQgc3VjY2Vzc2Z1bGx5YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHVwbG9hZGVkRmlsZS5zdGF0dXMgPSAnZXJyb3InO1xuICAgICAgdXBsb2FkZWRGaWxlLmVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVXBsb2FkIGZhaWxlZCc7XG4gICAgICB0aGlzLnVwbG9hZEVycm9yLmVtaXQoeyBmaWxlLCBlcnJvcjogdXBsb2FkZWRGaWxlLmVycm9yIH0pO1xuICAgICAgdGhpcy5zaG93RXJyb3IoYEZhaWxlZCB0byB1cGxvYWQgJHtmaWxlLm5hbWV9YCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBzaW11bGF0ZVVwbG9hZChmaWxlOiBGaWxlLCB1cGxvYWRlZEZpbGU6IFVwbG9hZGVkRmlsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBsZXQgcHJvZ3Jlc3MgPSAwO1xuICAgICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHByb2dyZXNzICs9IE1hdGgucmFuZG9tKCkgKiAzMDtcbiAgICAgICAgaWYgKHByb2dyZXNzID49IDEwMCkge1xuICAgICAgICAgIHByb2dyZXNzID0gMTAwO1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICAgIHVwbG9hZGVkRmlsZS5wcm9ncmVzcyA9IHByb2dyZXNzO1xuICAgICAgICAgIHVwbG9hZGVkRmlsZS5zdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICAgICAgICB1cGxvYWRlZEZpbGUudXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdXBsb2FkZWRGaWxlLnByb2dyZXNzID0gcHJvZ3Jlc3M7XG4gICAgICAgIH1cbiAgICAgIH0sIDIwMCk7XG4gICAgfSk7XG4gIH1cblxuICByZW1vdmVGaWxlKGZpbGU6IFVwbG9hZGVkRmlsZSkge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy51cGxvYWRlZEZpbGVzLmZpbmRJbmRleChmID0+IGYuaWQgPT09IGZpbGUuaWQpO1xuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMudXBsb2FkZWRGaWxlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgdGhpcy5maWxlUmVtb3ZlZC5lbWl0KGZpbGUpO1xuICAgICAgXG4gICAgICAvLyBSZXZva2Ugb2JqZWN0IFVSTCBpZiBpdCBleGlzdHNcbiAgICAgIGlmIChmaWxlLnVybCkge1xuICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKGZpbGUudXJsKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVtb3ZlIGZyb20gZmlsZSBtYXBcbiAgICAgIHRoaXMuZmlsZU1hcC5kZWxldGUoZmlsZS5pZCk7XG4gICAgfVxuICB9XG5cbiAgdXBsb2FkQWxsKCkge1xuICAgIHRoaXMudXBsb2FkZWRGaWxlc1xuICAgICAgLmZpbHRlcihmaWxlID0+IGZpbGUuc3RhdHVzID09PSAncGVuZGluZycpXG4gICAgICAuZm9yRWFjaChmaWxlID0+IHtcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxGaWxlID0gdGhpcy5nZXRPcmlnaW5hbEZpbGUoZmlsZSk7XG4gICAgICAgIGlmIChvcmlnaW5hbEZpbGUpIHtcbiAgICAgICAgICB0aGlzLnVwbG9hZEZpbGUob3JpZ2luYWxGaWxlLCBmaWxlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGdldE9yaWdpbmFsRmlsZSh1cGxvYWRlZEZpbGU6IFVwbG9hZGVkRmlsZSk6IEZpbGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy5maWxlTWFwLmdldCh1cGxvYWRlZEZpbGUuaWQpIHx8IG51bGw7XG4gIH1cblxuICBoYXNQZW5kaW5nRmlsZXMoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudXBsb2FkZWRGaWxlcy5zb21lKGZpbGUgPT4gZmlsZS5zdGF0dXMgPT09ICdwZW5kaW5nJyk7XG4gIH1cblxuICBwcmV2aWV3RmlsZShmaWxlOiBVcGxvYWRlZEZpbGUpIHtcbiAgICBpZiAoZmlsZS51cmwpIHtcbiAgICAgIHdpbmRvdy5vcGVuKGZpbGUudXJsLCAnX2JsYW5rJyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBnZW5lcmF0ZUlkKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cigyLCA5KTtcbiAgfVxuXG4gIGZvcm1hdEZpbGVTaXplKGJ5dGVzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmIChieXRlcyA9PT0gMCkgcmV0dXJuICcwIEJ5dGVzJztcbiAgICBjb25zdCBrID0gMTAyNDtcbiAgICBjb25zdCBzaXplcyA9IFsnQnl0ZXMnLCAnS0InLCAnTUInLCAnR0InXTtcbiAgICBjb25zdCBpID0gTWF0aC5mbG9vcihNYXRoLmxvZyhieXRlcykgLyBNYXRoLmxvZyhrKSk7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoKGJ5dGVzIC8gTWF0aC5wb3coaywgaSkpLnRvRml4ZWQoMikpICsgJyAnICsgc2l6ZXNbaV07XG4gIH1cblxuICBwcml2YXRlIHNob3dTdWNjZXNzKG1lc3NhZ2U6IHN0cmluZykge1xuICAgIHRoaXMuc25hY2tCYXIub3BlbihtZXNzYWdlLCAnQ2xvc2UnLCB7XG4gICAgICBkdXJhdGlvbjogMzAwMCxcbiAgICAgIHBhbmVsQ2xhc3M6IFsnc3VjY2Vzcy1zbmFja2JhciddXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHNob3dFcnJvcihtZXNzYWdlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnNuYWNrQmFyLm9wZW4obWVzc2FnZSwgJ0Nsb3NlJywge1xuICAgICAgZHVyYXRpb246IDUwMDAsXG4gICAgICBwYW5lbENsYXNzOiBbJ2Vycm9yLXNuYWNrYmFyJ11cbiAgICB9KTtcbiAgfVxuXG4gIGdldEZpbGVJY29uKGZpbGVUeXBlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmIChmaWxlVHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKSkgcmV0dXJuICdpbWFnZSc7XG4gICAgaWYgKGZpbGVUeXBlLnN0YXJ0c1dpdGgoJ3ZpZGVvLycpKSByZXR1cm4gJ3ZpZGVvX2ZpbGUnO1xuICAgIGlmIChmaWxlVHlwZS5zdGFydHNXaXRoKCdhdWRpby8nKSkgcmV0dXJuICdhdWRpb19maWxlJztcbiAgICBpZiAoZmlsZVR5cGUuaW5jbHVkZXMoJ3BkZicpKSByZXR1cm4gJ3BpY3R1cmVfYXNfcGRmJztcbiAgICBpZiAoZmlsZVR5cGUuaW5jbHVkZXMoJ3dvcmQnKSB8fCBmaWxlVHlwZS5pbmNsdWRlcygnZG9jdW1lbnQnKSkgcmV0dXJuICdkZXNjcmlwdGlvbic7XG4gICAgaWYgKGZpbGVUeXBlLmluY2x1ZGVzKCdleGNlbCcpIHx8IGZpbGVUeXBlLmluY2x1ZGVzKCdzcHJlYWRzaGVldCcpKSByZXR1cm4gJ3RhYmxlX2NoYXJ0JztcbiAgICBpZiAoZmlsZVR5cGUuaW5jbHVkZXMoJ3Bvd2VycG9pbnQnKSB8fCBmaWxlVHlwZS5pbmNsdWRlcygncHJlc2VudGF0aW9uJykpIHJldHVybiAnc2xpZGVzaG93JztcbiAgICByZXR1cm4gJ2luc2VydF9kcml2ZV9maWxlJztcbiAgfVxuXG4gIGdldEZpbGVTdGF0dXNDb2xvcihzdGF0dXM6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgc3dpdGNoIChzdGF0dXMpIHtcbiAgICAgIGNhc2UgJ2NvbXBsZXRlZCc6IHJldHVybiAnIzRjYWY1MCc7XG4gICAgICBjYXNlICd1cGxvYWRpbmcnOiByZXR1cm4gJyMyMTk2ZjMnO1xuICAgICAgY2FzZSAnZXJyb3InOiByZXR1cm4gJyNmNDQzMzYnO1xuICAgICAgZGVmYXVsdDogcmV0dXJuICcjOWU5ZTllJztcbiAgICB9XG4gIH1cbn0gIiwiPGRpdiBjbGFzcz1cInVwbG9hZGJveC1jb250YWluZXJcIj5cbiAgPCEtLSBEcmFnIGFuZCBEcm9wIEFyZWEgLS0+XG4gIDxkaXYgXG4gICAgY2xhc3M9XCJ1cGxvYWQtYXJlYVwiXG4gICAgW2NsYXNzLmRyYWctb3Zlcl09XCJpc0RyYWdPdmVyXCJcbiAgICBbY2xhc3MuZGlzYWJsZWRdPVwiIWRyYWdEcm9wRW5hYmxlZFwiXG4gICAgKGRyYWdvdmVyKT1cIm9uRHJhZ092ZXIoJGV2ZW50KVwiXG4gICAgKGRyYWdsZWF2ZSk9XCJvbkRyYWdMZWF2ZSgkZXZlbnQpXCJcbiAgICAoZHJvcCk9XCJvbkRyb3AoJGV2ZW50KVwiXG4gICAgKGNsaWNrKT1cImZpbGVJbnB1dC5jbGljaygpXCI+XG4gICAgXG4gICAgPGRpdiBjbGFzcz1cInVwbG9hZC1jb250ZW50XCI+XG4gICAgICA8YXBwLWljb24gXG4gICAgICAgIFtmb250SWNvbl09XCInY2xvdWRfdXBsb2FkJ1wiIFxuICAgICAgICBjbGFzcz1cInVwbG9hZC1pY29uXCI+XG4gICAgICA8L2FwcC1pY29uPlxuICAgICAgXG4gICAgICA8aDMgY2xhc3M9XCJ1cGxvYWQtdGl0bGVcIj57eyBwbGFjZWhvbGRlciB9fTwvaDM+XG4gICAgICBcbiAgICAgIDxwIGNsYXNzPVwidXBsb2FkLXN1YnRpdGxlXCI+XG4gICAgICAgIE1heGltdW0gZmlsZSBzaXplOiB7eyBmb3JtYXRGaWxlU2l6ZShtYXhGaWxlU2l6ZSkgfX0gfCBcbiAgICAgICAgTWF4IGZpbGVzOiB7eyBtYXhGaWxlcyB9fVxuICAgICAgPC9wPlxuICAgICAgXG4gICAgICA8YXBwLWJ1dHRvblxuICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgYXBwZWFyYW5jZT1cInJhaXNlZFwiXG4gICAgICAgIFt0ZXh0XT1cImJ1dHRvblRleHRcIlxuICAgICAgICAoYnRuQ2xpY2spPVwiZmlsZUlucHV0LmNsaWNrKCk7ICRldmVudC5zdG9wUHJvcGFnYXRpb24oKVwiXG4gICAgICAgIGNsYXNzPVwidXBsb2FkLWJ1dHRvblwiPlxuICAgICAgICA8YXBwLWljb24gW2ZvbnRJY29uXT1cIidhZGQnXCIgY2xhc3M9XCJidXR0b24taWNvblwiPjwvYXBwLWljb24+XG4gICAgICA8L2FwcC1idXR0b24+XG4gICAgICBcbiAgICAgIDxpbnB1dCBcbiAgICAgICAgI2ZpbGVJbnB1dFxuICAgICAgICB0eXBlPVwiZmlsZVwiXG4gICAgICAgIFttdWx0aXBsZV09XCJtdWx0aXBsZVwiXG4gICAgICAgIFthY2NlcHRdPVwiYWNjZXB0XCJcbiAgICAgICAgKGNoYW5nZSk9XCJvbkZpbGVTZWxlY3RlZCgkZXZlbnQpXCJcbiAgICAgICAgc3R5bGU9XCJkaXNwbGF5OiBub25lO1wiPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cblxuICA8IS0tIEZpbGUgTGlzdCAtLT5cbiAgPGRpdiBjbGFzcz1cImZpbGUtbGlzdFwiICpuZ0lmPVwidXBsb2FkZWRGaWxlcy5sZW5ndGggPiAwXCI+XG4gICAgPGg0IGNsYXNzPVwiZmlsZS1saXN0LXRpdGxlXCI+VXBsb2FkZWQgRmlsZXMgKHt7IHVwbG9hZGVkRmlsZXMubGVuZ3RoIH19L3t7IG1heEZpbGVzIH19KTwvaDQ+XG4gICAgXG4gICAgPGRpdiBjbGFzcz1cImZpbGUtaXRlbXNcIj5cbiAgICAgIDxtYXQtY2FyZCBcbiAgICAgICAgKm5nRm9yPVwibGV0IGZpbGUgb2YgdXBsb2FkZWRGaWxlc1wiIFxuICAgICAgICBjbGFzcz1cImZpbGUtaXRlbVwiXG4gICAgICAgIFtjbGFzcy51cGxvYWRpbmddPVwiZmlsZS5zdGF0dXMgPT09ICd1cGxvYWRpbmcnXCJcbiAgICAgICAgW2NsYXNzLmNvbXBsZXRlZF09XCJmaWxlLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCdcIlxuICAgICAgICBbY2xhc3MuZXJyb3JdPVwiZmlsZS5zdGF0dXMgPT09ICdlcnJvcidcIj5cbiAgICAgICAgXG4gICAgICAgIDxkaXYgY2xhc3M9XCJmaWxlLWNvbnRlbnRcIj5cbiAgICAgICAgICA8IS0tIEZpbGUgSWNvbiAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsZS1pY29uXCI+XG4gICAgICAgICAgICA8YXBwLWljb24gXG4gICAgICAgICAgICAgIFtmb250SWNvbl09XCJnZXRGaWxlSWNvbihmaWxlLnR5cGUpXCIgXG4gICAgICAgICAgICAgIGNsYXNzPVwiZmlsZS10eXBlLWljb25cIj5cbiAgICAgICAgICAgIDwvYXBwLWljb24+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgXG4gICAgICAgICAgPCEtLSBGaWxlIEluZm8gLS0+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cImZpbGUtaW5mb1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZpbGUtbmFtZVwiPnt7IGZpbGUubmFtZSB9fTwvZGl2PlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZpbGUtZGV0YWlsc1wiPlxuICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtc2l6ZVwiPnt7IGZvcm1hdEZpbGVTaXplKGZpbGUuc2l6ZSkgfX08L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS10eXBlXCI+e3sgZmlsZS50eXBlIH19PC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDwhLS0gUHJvZ3Jlc3MgQmFyIC0tPlxuICAgICAgICAgICAgPG1hdC1wcm9ncmVzcy1iYXIgXG4gICAgICAgICAgICAgICpuZ0lmPVwiZmlsZS5zdGF0dXMgPT09ICd1cGxvYWRpbmcnXCJcbiAgICAgICAgICAgICAgW3ZhbHVlXT1cImZpbGUucHJvZ3Jlc3MgfHwgMFwiXG4gICAgICAgICAgICAgIGNsYXNzPVwidXBsb2FkLXByb2dyZXNzXCI+XG4gICAgICAgICAgICA8L21hdC1wcm9ncmVzcy1iYXI+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDwhLS0gU3RhdHVzIC0tPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZpbGUtc3RhdHVzXCI+XG4gICAgICAgICAgICAgIDxzcGFuIFxuICAgICAgICAgICAgICAgIGNsYXNzPVwic3RhdHVzLWluZGljYXRvclwiXG4gICAgICAgICAgICAgICAgW3N0eWxlLmJhY2tncm91bmQtY29sb3JdPVwiZ2V0RmlsZVN0YXR1c0NvbG9yKGZpbGUuc3RhdHVzKVwiPlxuICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdHVzLXRleHRcIj57eyBmaWxlLnN0YXR1cyB8IHRpdGxlY2FzZSB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJmaWxlLnByb2dyZXNzICYmIGZpbGUuc3RhdHVzID09PSAndXBsb2FkaW5nJ1wiIGNsYXNzPVwicHJvZ3Jlc3MtdGV4dFwiPlxuICAgICAgICAgICAgICAgIHt7IGZpbGUucHJvZ3Jlc3MgfCBudW1iZXI6JzEuMC0wJyB9fSVcbiAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDwhLS0gRXJyb3IgTWVzc2FnZSAtLT5cbiAgICAgICAgICAgIDxkaXYgKm5nSWY9XCJmaWxlLmVycm9yXCIgY2xhc3M9XCJlcnJvci1tZXNzYWdlXCI+XG4gICAgICAgICAgICAgIHt7IGZpbGUuZXJyb3IgfX1cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIFxuICAgICAgICAgIDwhLS0gQWN0aW9ucyAtLT5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwiZmlsZS1hY3Rpb25zXCI+XG4gICAgICAgICAgICA8IS0tIFByZXZpZXcgQnV0dG9uIC0tPlxuICAgICAgICAgICAgPGFwcC1idXR0b25cbiAgICAgICAgICAgICAgKm5nSWY9XCJzaG93UHJldmlldyAmJiBmaWxlLnVybCAmJiBmaWxlLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCdcIlxuICAgICAgICAgICAgICB0eXBlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgYXBwZWFyYW5jZT1cImljb25cIlxuICAgICAgICAgICAgICBmb250SWNvbj1cInZpc2liaWxpdHlcIlxuICAgICAgICAgICAgICAoYnRuQ2xpY2spPVwicHJldmlld0ZpbGUoZmlsZSlcIlxuICAgICAgICAgICAgICBjbGFzcz1cInByZXZpZXctYnV0dG9uXCI+XG4gICAgICAgICAgICA8L2FwcC1idXR0b24+XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIDwhLS0gUmVtb3ZlIEJ1dHRvbiAtLT5cbiAgICAgICAgICAgIDxhcHAtYnV0dG9uXG4gICAgICAgICAgICAgIHR5cGU9XCJidXR0b25cIlxuICAgICAgICAgICAgICBhcHBlYXJhbmNlPVwiaWNvblwiXG4gICAgICAgICAgICAgIGZvbnRJY29uPVwiZGVsZXRlXCJcbiAgICAgICAgICAgICAgKGJ0bkNsaWNrKT1cInJlbW92ZUZpbGUoZmlsZSlcIlxuICAgICAgICAgICAgICBjbGFzcz1cInJlbW92ZS1idXR0b25cIj5cbiAgICAgICAgICAgIDwvYXBwLWJ1dHRvbj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L21hdC1jYXJkPlxuICAgIDwvZGl2PlxuICAgIFxuICAgIDwhLS0gVXBsb2FkIEFsbCBCdXR0b24gLS0+XG4gICAgPGRpdiBjbGFzcz1cInVwbG9hZC1hY3Rpb25zXCIgKm5nSWY9XCJoYXNQZW5kaW5nRmlsZXMoKVwiPlxuICAgICAgPGFwcC1idXR0b25cbiAgICAgICAgdHlwZT1cImJ1dHRvblwiXG4gICAgICAgIGFwcGVhcmFuY2U9XCJyYWlzZWRcIlxuICAgICAgICB0ZXh0PVwiVXBsb2FkIEFsbCBGaWxlc1wiXG4gICAgICAgIFtkaXNhYmxlZF09XCJpc1VwbG9hZGluZ1wiXG4gICAgICAgIChidG5DbGljayk9XCJ1cGxvYWRBbGwoKVwiXG4gICAgICAgIGNsYXNzPVwidXBsb2FkLWFsbC1idXR0b25cIj5cbiAgICAgICAgPGFwcC1pY29uIFtmb250SWNvbl09XCInY2xvdWRfdXBsb2FkJ1wiIGNsYXNzPVwiYnV0dG9uLWljb25cIj48L2FwcC1pY29uPlxuICAgICAgPC9hcHAtYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PiAiXX0=