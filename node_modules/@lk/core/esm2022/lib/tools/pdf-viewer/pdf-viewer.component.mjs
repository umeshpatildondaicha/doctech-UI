import { Component, Input } from '@angular/core';
import { CommonModule } from '@angular/common';
import { MatButtonModule } from '@angular/material/button';
import { MatIconModule } from '@angular/material/icon';
import { AppButtonComponent } from '../app-button/app-button.component';
import * as i0 from "@angular/core";
import * as i1 from "@angular/platform-browser";
export class PdfViewerComponent {
    constructor(sanitizer) {
        this.sanitizer = sanitizer;
        this.src = null;
        this.height = '600px';
        this.width = '100%';
        this.showToolbar = true;
        this.downloadFileName = 'document.pdf';
        this.safeSrc = null;
        this.pdfUrl = '';
    }
    ngOnInit() {
        this.updatePdfSource();
    }
    ngOnChanges(changes) {
        if (changes['src']) {
            this.updatePdfSource();
        }
    }
    updatePdfSource() {
        if (!this.src) {
            this.safeSrc = null;
            this.pdfUrl = '';
            return;
        }
        if (typeof this.src === 'string') {
            this.pdfUrl = this.src;
            this.safeSrc = this.sanitizer.bypassSecurityTrustResourceUrl(this.src);
        }
        else if (this.src instanceof ArrayBuffer) {
            const blob = new Blob([this.src], { type: 'application/pdf' });
            const url = URL.createObjectURL(blob);
            this.pdfUrl = url;
            this.safeSrc = this.sanitizer.bypassSecurityTrustResourceUrl(url);
        }
    }
    downloadPdf() {
        if (this.pdfUrl) {
            const link = document.createElement('a');
            link.href = this.pdfUrl;
            link.download = this.downloadFileName;
            link.click();
        }
    }
    printPdf() {
        if (this.pdfUrl) {
            const printWindow = window.open(this.pdfUrl, '_blank');
            if (printWindow) {
                printWindow.onload = () => {
                    printWindow.print();
                };
            }
        }
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: PdfViewerComponent, deps: [{ token: i1.DomSanitizer }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "17.0.0", version: "17.3.12", type: PdfViewerComponent, isStandalone: true, selector: "app-pdf-viewer", inputs: { src: "src", height: "height", width: "width", showToolbar: "showToolbar", downloadFileName: "downloadFileName" }, usesOnChanges: true, ngImport: i0, template: "<div class=\"pdf-viewer-container\" [style.width]=\"width\" [style.height]=\"height\">\n  @if (showToolbar) {\n    <div class=\"pdf-toolbar\">\n      <app-button\n        text=\"Download\"\n        fontIcon=\"download\"\n        appearance=\"flat\"\n        color=\"primary\"\n        (btnClick)=\"downloadPdf()\"\n      ></app-button>\n      <app-button\n        text=\"Print\"\n        fontIcon=\"print\"\n        appearance=\"flat\"\n        color=\"primary\"\n        (btnClick)=\"printPdf()\"\n      ></app-button>\n    </div>\n  }\n\n  @if (safeSrc) {\n    <iframe\n      [src]=\"safeSrc\"\n      class=\"pdf-iframe\"\n      [style.height]=\"showToolbar ? 'calc(' + height + ' - 48px)' : height\"\n    ></iframe>\n  } @else {\n    <div class=\"pdf-placeholder\">\n      <p>No PDF to display</p>\n    </div>\n  }\n</div>\n\n", styles: [".pdf-viewer-container{display:flex;flex-direction:column;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.pdf-toolbar{display:flex;gap:8px;padding:8px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0}.pdf-iframe{width:100%;border:none;flex:1}.pdf-placeholder{display:flex;align-items:center;justify-content:center;height:100%;color:#9e9e9e;font-size:16px}\n"], dependencies: [{ kind: "ngmodule", type: CommonModule }, { kind: "ngmodule", type: MatButtonModule }, { kind: "ngmodule", type: MatIconModule }, { kind: "component", type: AppButtonComponent, selector: "app-button", inputs: ["color", "type", "disabled", "appearance", "class", "text", "fontIcon"], outputs: ["btnClick"] }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: PdfViewerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'app-pdf-viewer', standalone: true, imports: [CommonModule, MatButtonModule, MatIconModule, AppButtonComponent], template: "<div class=\"pdf-viewer-container\" [style.width]=\"width\" [style.height]=\"height\">\n  @if (showToolbar) {\n    <div class=\"pdf-toolbar\">\n      <app-button\n        text=\"Download\"\n        fontIcon=\"download\"\n        appearance=\"flat\"\n        color=\"primary\"\n        (btnClick)=\"downloadPdf()\"\n      ></app-button>\n      <app-button\n        text=\"Print\"\n        fontIcon=\"print\"\n        appearance=\"flat\"\n        color=\"primary\"\n        (btnClick)=\"printPdf()\"\n      ></app-button>\n    </div>\n  }\n\n  @if (safeSrc) {\n    <iframe\n      [src]=\"safeSrc\"\n      class=\"pdf-iframe\"\n      [style.height]=\"showToolbar ? 'calc(' + height + ' - 48px)' : height\"\n    ></iframe>\n  } @else {\n    <div class=\"pdf-placeholder\">\n      <p>No PDF to display</p>\n    </div>\n  }\n</div>\n\n", styles: [".pdf-viewer-container{display:flex;flex-direction:column;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.pdf-toolbar{display:flex;gap:8px;padding:8px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0}.pdf-iframe{width:100%;border:none;flex:1}.pdf-placeholder{display:flex;align-items:center;justify-content:center;height:100%;color:#9e9e9e;font-size:16px}\n"] }]
        }], ctorParameters: () => [{ type: i1.DomSanitizer }], propDecorators: { src: [{
                type: Input
            }], height: [{
                type: Input
            }], width: [{
                type: Input
            }], showToolbar: [{
                type: Input
            }], downloadFileName: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGRmLXZpZXdlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9jb21tb24tbGlicy9jb3JlL3NyYy9saWIvdG9vbHMvcGRmLXZpZXdlci9wZGYtdmlld2VyLmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2NvbW1vbi1saWJzL2NvcmUvc3JjL2xpYi90b29scy9wZGYtdmlld2VyL3BkZi12aWV3ZXIuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQW9DLE1BQU0sZUFBZSxDQUFDO0FBQ25GLE9BQU8sRUFBRSxZQUFZLEVBQUUsTUFBTSxpQkFBaUIsQ0FBQztBQUUvQyxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDM0QsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDOzs7QUFTeEUsTUFBTSxPQUFPLGtCQUFrQjtJQVU3QixZQUFvQixTQUF1QjtRQUF2QixjQUFTLEdBQVQsU0FBUyxDQUFjO1FBVGxDLFFBQUcsR0FBZ0MsSUFBSSxDQUFDO1FBQ3hDLFdBQU0sR0FBVyxPQUFPLENBQUM7UUFDekIsVUFBSyxHQUFXLE1BQU0sQ0FBQztRQUN2QixnQkFBVyxHQUFZLElBQUksQ0FBQztRQUM1QixxQkFBZ0IsR0FBVyxjQUFjLENBQUM7UUFFbkQsWUFBTyxHQUEyQixJQUFJLENBQUM7UUFDdkMsV0FBTSxHQUFXLEVBQUUsQ0FBQztJQUUwQixDQUFDO0lBRS9DLFFBQVE7UUFDTixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVELFdBQVcsQ0FBQyxPQUFzQjtRQUNoQyxJQUFJLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDO1lBQ25CLElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztRQUN6QixDQUFDO0lBQ0gsQ0FBQztJQUVELGVBQWU7UUFDYixJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1lBQ2QsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7WUFDcEIsSUFBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7WUFDakIsT0FBTztRQUNULENBQUM7UUFFRCxJQUFJLE9BQU8sSUFBSSxDQUFDLEdBQUcsS0FBSyxRQUFRLEVBQUUsQ0FBQztZQUNqQyxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUM7WUFDdkIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsU0FBUyxDQUFDLDhCQUE4QixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN6RSxDQUFDO2FBQU0sSUFBSSxJQUFJLENBQUMsR0FBRyxZQUFZLFdBQVcsRUFBRSxDQUFDO1lBQzNDLE1BQU0sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFLENBQUMsQ0FBQztZQUMvRCxNQUFNLEdBQUcsR0FBRyxHQUFHLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3RDLElBQUksQ0FBQyxNQUFNLEdBQUcsR0FBRyxDQUFDO1lBQ2xCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyw4QkFBOEIsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNwRSxDQUFDO0lBQ0gsQ0FBQztJQUVELFdBQVc7UUFDVCxJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixNQUFNLElBQUksR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBQ3pDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztZQUN4QixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztZQUN0QyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDZixDQUFDO0lBQ0gsQ0FBQztJQUVELFFBQVE7UUFDTixJQUFJLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztZQUNoQixNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM7WUFDdkQsSUFBSSxXQUFXLEVBQUUsQ0FBQztnQkFDaEIsV0FBVyxDQUFDLE1BQU0sR0FBRyxHQUFHLEVBQUU7b0JBQ3hCLFdBQVcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztnQkFDdEIsQ0FBQyxDQUFDO1lBQ0osQ0FBQztRQUNILENBQUM7SUFDSCxDQUFDOytHQTFEVSxrQkFBa0I7bUdBQWxCLGtCQUFrQiwyTkNkL0IsK3pCQWlDQSxpYkR2QlksWUFBWSw4QkFBRSxlQUFlLDhCQUFFLGFBQWEsK0JBQUUsa0JBQWtCOzs0RkFJL0Qsa0JBQWtCO2tCQVA5QixTQUFTOytCQUNFLGdCQUFnQixjQUNkLElBQUksV0FDUCxDQUFDLFlBQVksRUFBRSxlQUFlLEVBQUUsYUFBYSxFQUFFLGtCQUFrQixDQUFDO2lGQUtsRSxHQUFHO3NCQUFYLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLO2dCQUNHLEtBQUs7c0JBQWIsS0FBSztnQkFDRyxXQUFXO3NCQUFuQixLQUFLO2dCQUNHLGdCQUFnQjtzQkFBeEIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgSW5wdXQsIE9uSW5pdCwgT25DaGFuZ2VzLCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgRG9tU2FuaXRpemVyLCBTYWZlUmVzb3VyY2VVcmwgfSBmcm9tICdAYW5ndWxhci9wbGF0Zm9ybS1icm93c2VyJztcbmltcG9ydCB7IE1hdEJ1dHRvbk1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2J1dHRvbic7XG5pbXBvcnQgeyBNYXRJY29uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvaWNvbic7XG5pbXBvcnQgeyBBcHBCdXR0b25Db21wb25lbnQgfSBmcm9tICcuLi9hcHAtYnV0dG9uL2FwcC1idXR0b24uY29tcG9uZW50JztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYXBwLXBkZi12aWV3ZXInLFxuICBzdGFuZGFsb25lOiB0cnVlLFxuICBpbXBvcnRzOiBbQ29tbW9uTW9kdWxlLCBNYXRCdXR0b25Nb2R1bGUsIE1hdEljb25Nb2R1bGUsIEFwcEJ1dHRvbkNvbXBvbmVudF0sXG4gIHRlbXBsYXRlVXJsOiAnLi9wZGYtdmlld2VyLmNvbXBvbmVudC5odG1sJyxcbiAgc3R5bGVVcmw6ICcuL3BkZi12aWV3ZXIuY29tcG9uZW50LnNjc3MnXG59KVxuZXhwb3J0IGNsYXNzIFBkZlZpZXdlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgT25DaGFuZ2VzIHtcbiAgQElucHV0KCkgc3JjOiBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IG51bGwgPSBudWxsO1xuICBASW5wdXQoKSBoZWlnaHQ6IHN0cmluZyA9ICc2MDBweCc7XG4gIEBJbnB1dCgpIHdpZHRoOiBzdHJpbmcgPSAnMTAwJSc7XG4gIEBJbnB1dCgpIHNob3dUb29sYmFyOiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0KCkgZG93bmxvYWRGaWxlTmFtZTogc3RyaW5nID0gJ2RvY3VtZW50LnBkZic7XG5cbiAgc2FmZVNyYzogU2FmZVJlc291cmNlVXJsIHwgbnVsbCA9IG51bGw7XG4gIHBkZlVybDogc3RyaW5nID0gJyc7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBzYW5pdGl6ZXI6IERvbVNhbml0aXplcikge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnVwZGF0ZVBkZlNvdXJjZSgpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIGlmIChjaGFuZ2VzWydzcmMnXSkge1xuICAgICAgdGhpcy51cGRhdGVQZGZTb3VyY2UoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVQZGZTb3VyY2UoKSB7XG4gICAgaWYgKCF0aGlzLnNyYykge1xuICAgICAgdGhpcy5zYWZlU3JjID0gbnVsbDtcbiAgICAgIHRoaXMucGRmVXJsID0gJyc7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLnNyYyA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMucGRmVXJsID0gdGhpcy5zcmM7XG4gICAgICB0aGlzLnNhZmVTcmMgPSB0aGlzLnNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0UmVzb3VyY2VVcmwodGhpcy5zcmMpO1xuICAgIH0gZWxzZSBpZiAodGhpcy5zcmMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt0aGlzLnNyY10sIHsgdHlwZTogJ2FwcGxpY2F0aW9uL3BkZicgfSk7XG4gICAgICBjb25zdCB1cmwgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgdGhpcy5wZGZVcmwgPSB1cmw7XG4gICAgICB0aGlzLnNhZmVTcmMgPSB0aGlzLnNhbml0aXplci5ieXBhc3NTZWN1cml0eVRydXN0UmVzb3VyY2VVcmwodXJsKTtcbiAgICB9XG4gIH1cblxuICBkb3dubG9hZFBkZigpIHtcbiAgICBpZiAodGhpcy5wZGZVcmwpIHtcbiAgICAgIGNvbnN0IGxpbmsgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgICBsaW5rLmhyZWYgPSB0aGlzLnBkZlVybDtcbiAgICAgIGxpbmsuZG93bmxvYWQgPSB0aGlzLmRvd25sb2FkRmlsZU5hbWU7XG4gICAgICBsaW5rLmNsaWNrKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpbnRQZGYoKSB7XG4gICAgaWYgKHRoaXMucGRmVXJsKSB7XG4gICAgICBjb25zdCBwcmludFdpbmRvdyA9IHdpbmRvdy5vcGVuKHRoaXMucGRmVXJsLCAnX2JsYW5rJyk7XG4gICAgICBpZiAocHJpbnRXaW5kb3cpIHtcbiAgICAgICAgcHJpbnRXaW5kb3cub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgIHByaW50V2luZG93LnByaW50KCk7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbiIsIjxkaXYgY2xhc3M9XCJwZGYtdmlld2VyLWNvbnRhaW5lclwiIFtzdHlsZS53aWR0aF09XCJ3aWR0aFwiIFtzdHlsZS5oZWlnaHRdPVwiaGVpZ2h0XCI+XG4gIEBpZiAoc2hvd1Rvb2xiYXIpIHtcbiAgICA8ZGl2IGNsYXNzPVwicGRmLXRvb2xiYXJcIj5cbiAgICAgIDxhcHAtYnV0dG9uXG4gICAgICAgIHRleHQ9XCJEb3dubG9hZFwiXG4gICAgICAgIGZvbnRJY29uPVwiZG93bmxvYWRcIlxuICAgICAgICBhcHBlYXJhbmNlPVwiZmxhdFwiXG4gICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgIChidG5DbGljayk9XCJkb3dubG9hZFBkZigpXCJcbiAgICAgID48L2FwcC1idXR0b24+XG4gICAgICA8YXBwLWJ1dHRvblxuICAgICAgICB0ZXh0PVwiUHJpbnRcIlxuICAgICAgICBmb250SWNvbj1cInByaW50XCJcbiAgICAgICAgYXBwZWFyYW5jZT1cImZsYXRcIlxuICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAoYnRuQ2xpY2spPVwicHJpbnRQZGYoKVwiXG4gICAgICA+PC9hcHAtYnV0dG9uPlxuICAgIDwvZGl2PlxuICB9XG5cbiAgQGlmIChzYWZlU3JjKSB7XG4gICAgPGlmcmFtZVxuICAgICAgW3NyY109XCJzYWZlU3JjXCJcbiAgICAgIGNsYXNzPVwicGRmLWlmcmFtZVwiXG4gICAgICBbc3R5bGUuaGVpZ2h0XT1cInNob3dUb29sYmFyID8gJ2NhbGMoJyArIGhlaWdodCArICcgLSA0OHB4KScgOiBoZWlnaHRcIlxuICAgID48L2lmcmFtZT5cbiAgfSBAZWxzZSB7XG4gICAgPGRpdiBjbGFzcz1cInBkZi1wbGFjZWhvbGRlclwiPlxuICAgICAgPHA+Tm8gUERGIHRvIGRpc3BsYXk8L3A+XG4gICAgPC9kaXY+XG4gIH1cbjwvZGl2PlxuXG4iXX0=