import { Injectable, signal, computed, effect, runInInjectionContext } from '@angular/core';
import * as i0 from "@angular/core";
/**
 * Core Event Service using Angular Signals for cross-library communication
 * This service provides a centralized event bus for the application
 */
export class CoreEventService {
    constructor(injector) {
        this.injector = injector;
        // Private signals for internal state management
        this._menu = signal(null);
        this._authState = signal(null);
        this._breadcrumb = signal(null);
        this._notification = signal(null);
        // Public read-only computed signals
        this.menu = computed(() => this._menu());
        this.authState = computed(() => this._authState());
        this.breadcrumb = computed(() => this._breadcrumb());
        this.notification = computed(() => this._notification());
    }
    // Menu updaters
    setMenu(menu) {
        this._menu.set(menu);
    }
    clearMenu() {
        this._menu.set(null);
    }
    // Auth state updaters
    setAuth(state) {
        this._authState.set(state);
    }
    clearAuth() {
        this._authState.set(null);
    }
    // Breadcrumb updaters
    setBreadcrumb(breadcrumb) {
        if (breadcrumb === null) {
            this._breadcrumb.set(null);
        }
        else if (Array.isArray(breadcrumb)) {
            this._breadcrumb.set(breadcrumb);
        }
        else {
            // Single item, convert to array
            this._breadcrumb.set([breadcrumb]);
        }
    }
    clearBreadcrumb() {
        this._breadcrumb.set(null);
    }
    // Notification updaters
    setNotification(notification) {
        this._notification.set(notification);
    }
    clearNotification() {
        this._notification.set(null);
    }
    // Convenience methods: run callback on signal changes (returns a destroy function)
    onMenuChange(cb) {
        return runInInjectionContext(this.injector, () => {
            const runner = effect(() => {
                cb(this._menu());
            });
            return () => runner.destroy(); // destroy the effect to cleanup
        });
    }
    onAuthChange(cb) {
        return runInInjectionContext(this.injector, () => {
            const runner = effect(() => {
                cb(this._authState());
            });
            return () => runner.destroy();
        });
    }
    onBreadcrumbChange(cb) {
        return runInInjectionContext(this.injector, () => {
            const runner = effect(() => {
                cb(this._breadcrumb());
            });
            return () => runner.destroy();
        });
    }
    onNotificationChange(cb) {
        return runInInjectionContext(this.injector, () => {
            const runner = effect(() => {
                cb(this._notification());
            });
            return () => runner.destroy();
        });
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: CoreEventService, deps: [{ token: i0.Injector }], target: i0.ɵɵFactoryTarget.Injectable }); }
    static { this.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: CoreEventService, providedIn: 'root' }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.12", ngImport: i0, type: CoreEventService, decorators: [{
            type: Injectable,
            args: [{ providedIn: 'root' }]
        }], ctorParameters: () => [{ type: i0.Injector }] });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29yZS1ldmVudC5zZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvY29tbW9uLWxpYnMvY29yZS9zcmMvbGliL2NvcmUtZXZlbnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFvQixxQkFBcUIsRUFBRSxNQUFNLGVBQWUsQ0FBQzs7QUFHOUc7OztHQUdHO0FBRUgsTUFBTSxPQUFPLGdCQUFnQjtJQUMzQixZQUFvQixRQUFrQjtRQUFsQixhQUFRLEdBQVIsUUFBUSxDQUFVO1FBQ3RDLGdEQUFnRDtRQUN4QyxVQUFLLEdBQUcsTUFBTSxDQUFnQixJQUFJLENBQUMsQ0FBQztRQUNwQyxlQUFVLEdBQUcsTUFBTSxDQUF5RSxJQUFJLENBQUMsQ0FBQztRQUNsRyxnQkFBVyxHQUFHLE1BQU0sQ0FBMEIsSUFBSSxDQUFDLENBQUM7UUFDcEQsa0JBQWEsR0FBRyxNQUFNLENBQThFLElBQUksQ0FBQyxDQUFDO1FBRWxILG9DQUFvQztRQUMzQixTQUFJLEdBQTBCLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUMsQ0FBQztRQUMzRCxjQUFTLEdBQW1GLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUMsQ0FBQztRQUM5SCxlQUFVLEdBQW9DLFFBQVEsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQztRQUNqRixpQkFBWSxHQUF3RixRQUFRLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUM7SUFYekcsQ0FBQztJQWExQyxnQkFBZ0I7SUFDaEIsT0FBTyxDQUFDLElBQW1CO1FBQ3pCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLElB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QUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDLENBQUM7WUFDM0IsQ0FBQyxDQUFDLENBQUM7WUFDSCxPQUFPLEdBQUcsRUFBRSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUNoQyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7K0dBNUZVLGdCQUFnQjttSEFBaEIsZ0JBQWdCLGNBREgsTUFBTTs7NEZBQ25CLGdCQUFnQjtrQkFENUIsVUFBVTttQkFBQyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlLCBzaWduYWwsIGNvbXB1dGVkLCBlZmZlY3QsIFNpZ25hbCwgSW5qZWN0b3IsIHJ1bkluSW5qZWN0aW9uQ29udGV4dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQnJlYWRjcnVtYkl0ZW0gfSBmcm9tICcuL2ludGVyZmFjZXMvYnJlYWRjcnVtYi5pbnRlcmZhY2UnO1xuXG4vKipcbiAqIENvcmUgRXZlbnQgU2VydmljZSB1c2luZyBBbmd1bGFyIFNpZ25hbHMgZm9yIGNyb3NzLWxpYnJhcnkgY29tbXVuaWNhdGlvblxuICogVGhpcyBzZXJ2aWNlIHByb3ZpZGVzIGEgY2VudHJhbGl6ZWQgZXZlbnQgYnVzIGZvciB0aGUgYXBwbGljYXRpb25cbiAqL1xuQEluamVjdGFibGUoeyBwcm92aWRlZEluOiAncm9vdCcgfSlcbmV4cG9ydCBjbGFzcyBDb3JlRXZlbnRTZXJ2aWNlIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBpbmplY3RvcjogSW5qZWN0b3IpIHt9XG4gIC8vIFByaXZhdGUgc2lnbmFscyBmb3IgaW50ZXJuYWwgc3RhdGUgbWFuYWdlbWVudFxuICBwcml2YXRlIF9tZW51ID0gc2lnbmFsPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBwcml2YXRlIF9hdXRoU3RhdGUgPSBzaWduYWw8eyB1c2VySWQ6IHN0cmluZzsgdXNlclR5cGU/OiBzdHJpbmc7IGlzQXV0aGVudGljYXRlZDogYm9vbGVhbiB9IHwgbnVsbD4obnVsbCk7XG4gIHByaXZhdGUgX2JyZWFkY3J1bWIgPSBzaWduYWw8QnJlYWRjcnVtYkl0ZW1bXSB8IG51bGw+KG51bGwpO1xuICBwcml2YXRlIF9ub3RpZmljYXRpb24gPSBzaWduYWw8eyBtZXNzYWdlOiBzdHJpbmc7IHR5cGU/OiAnc3VjY2VzcycgfCAnZXJyb3InIHwgJ2luZm8nIHwgJ3dhcm5pbmcnIH0gfCBudWxsPihudWxsKTtcblxuICAvLyBQdWJsaWMgcmVhZC1vbmx5IGNvbXB1dGVkIHNpZ25hbHNcbiAgcmVhZG9ubHkgbWVudTogU2lnbmFsPHN0cmluZyB8IG51bGw+ID0gY29tcHV0ZWQoKCkgPT4gdGhpcy5fbWVudSgpKTtcbiAgcmVhZG9ubHkgYXV0aFN0YXRlOiBTaWduYWw8eyB1c2VySWQ6IHN0cmluZzsgdXNlclR5cGU/OiBzdHJpbmc7IGlzQXV0aGVudGljYXRlZDogYm9vbGVhbiB9IHwgbnVsbD4gPSBjb21wdXRlZCgoKSA9PiB0aGlzLl9hdXRoU3RhdGUoKSk7XG4gIHJlYWRvbmx5IGJyZWFkY3J1bWI6IFNpZ25hbDxCcmVhZGNydW1iSXRlbVtdIHwgbnVsbD4gPSBjb21wdXRlZCgoKSA9PiB0aGlzLl9icmVhZGNydW1iKCkpO1xuICByZWFkb25seSBub3RpZmljYXRpb246IFNpZ25hbDx7IG1lc3NhZ2U6IHN0cmluZzsgdHlwZT86ICdzdWNjZXNzJyB8ICdlcnJvcicgfCAnaW5mbycgfCAnd2FybmluZycgfSB8IG51bGw+ID0gY29tcHV0ZWQoKCkgPT4gdGhpcy5fbm90aWZpY2F0aW9uKCkpO1xuXG4gIC8vIE1lbnUgdXBkYXRlcnNcbiAgc2V0TWVudShtZW51OiBzdHJpbmcgfCBudWxsKSB7XG4gICAgdGhpcy5fbWVudS5zZXQobWVudSk7XG4gIH1cblxuICBjbGVhck1lbnUoKSB7XG4gICAgdGhpcy5fbWVudS5zZXQobnVsbCk7XG4gIH1cblxuICAvLyBBdXRoIHN0YXRlIHVwZGF0ZXJzXG4gIHNldEF1dGgoc3RhdGU6IHsgdXNlcklkOiBzdHJpbmc7IHVzZXJUeXBlPzogc3RyaW5nOyBpc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW4gfSB8IG51bGwpIHtcbiAgICB0aGlzLl9hdXRoU3RhdGUuc2V0KHN0YXRlKTtcbiAgfVxuXG4gIGNsZWFyQXV0aCgpIHtcbiAgICB0aGlzLl9hdXRoU3RhdGUuc2V0KG51bGwpO1xuICB9XG5cbiAgLy8gQnJlYWRjcnVtYiB1cGRhdGVyc1xuICBzZXRCcmVhZGNydW1iKGJyZWFkY3J1bWI6IEJyZWFkY3J1bWJJdGVtW10gfCBCcmVhZGNydW1iSXRlbSB8IG51bGwpIHtcbiAgICBpZiAoYnJlYWRjcnVtYiA9PT0gbnVsbCkge1xuICAgICAgdGhpcy5fYnJlYWRjcnVtYi5zZXQobnVsbCk7XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGJyZWFkY3J1bWIpKSB7XG4gICAgICB0aGlzLl9icmVhZGNydW1iLnNldChicmVhZGNydW1iKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2luZ2xlIGl0ZW0sIGNvbnZlcnQgdG8gYXJyYXlcbiAgICAgIHRoaXMuX2JyZWFkY3J1bWIuc2V0KFticmVhZGNydW1iXSk7XG4gICAgfVxuICB9XG5cbiAgY2xlYXJCcmVhZGNydW1iKCkge1xuICAgIHRoaXMuX2JyZWFkY3J1bWIuc2V0KG51bGwpO1xuICB9XG5cbiAgLy8gTm90aWZpY2F0aW9uIHVwZGF0ZXJzXG4gIHNldE5vdGlmaWNhdGlvbihub3RpZmljYXRpb246IHsgbWVzc2FnZTogc3RyaW5nOyB0eXBlPzogJ3N1Y2Nlc3MnIHwgJ2Vycm9yJyB8ICdpbmZvJyB8ICd3YXJuaW5nJyB9IHwgbnVsbCkge1xuICAgIHRoaXMuX25vdGlmaWNhdGlvbi5zZXQobm90aWZpY2F0aW9uKTtcbiAgfVxuXG4gIGNsZWFyTm90aWZpY2F0aW9uKCkge1xuICAgIHRoaXMuX25vdGlmaWNhdGlvbi5zZXQobnVsbCk7XG4gIH1cblxuICAvLyBDb252ZW5pZW5jZSBtZXRob2RzOiBydW4gY2FsbGJhY2sgb24gc2lnbmFsIGNoYW5nZXMgKHJldHVybnMgYSBkZXN0cm95IGZ1bmN0aW9uKVxuICBvbk1lbnVDaGFuZ2UoY2I6IChtZW51OiBzdHJpbmcgfCBudWxsKSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIHJ1bkluSW5qZWN0aW9uQ29udGV4dCh0aGlzLmluamVjdG9yLCAoKSA9PiB7XG4gICAgICBjb25zdCBydW5uZXIgPSBlZmZlY3QoKCkgPT4ge1xuICAgICAgICBjYih0aGlzLl9tZW51KCkpO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gKCkgPT4gcnVubmVyLmRlc3Ryb3koKTsgLy8gZGVzdHJveSB0aGUgZWZmZWN0IHRvIGNsZWFudXBcbiAgICB9KTtcbiAgfVxuXG4gIG9uQXV0aENoYW5nZShjYjogKGF1dGg6IHsgdXNlcklkOiBzdHJpbmc7IHVzZXJUeXBlPzogc3RyaW5nOyBpc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW4gfSB8IG51bGwpID0+IHZvaWQpIHtcbiAgICByZXR1cm4gcnVuSW5JbmplY3Rpb25Db250ZXh0KHRoaXMuaW5qZWN0b3IsICgpID0+IHtcbiAgICAgIGNvbnN0IHJ1bm5lciA9IGVmZmVjdCgoKSA9PiB7XG4gICAgICAgIGNiKHRoaXMuX2F1dGhTdGF0ZSgpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICgpID0+IHJ1bm5lci5kZXN0cm95KCk7XG4gICAgfSk7XG4gIH1cblxuICBvbkJyZWFkY3J1bWJDaGFuZ2UoY2I6IChicmVhZGNydW1iOiBCcmVhZGNydW1iSXRlbVtdIHwgbnVsbCkgPT4gdm9pZCkge1xuICAgIHJldHVybiBydW5JbkluamVjdGlvbkNvbnRleHQodGhpcy5pbmplY3RvciwgKCkgPT4ge1xuICAgICAgY29uc3QgcnVubmVyID0gZWZmZWN0KCgpID0+IHtcbiAgICAgICAgY2IodGhpcy5fYnJlYWRjcnVtYigpKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuICgpID0+IHJ1bm5lci5kZXN0cm95KCk7XG4gICAgfSk7XG4gIH1cblxuICBvbk5vdGlmaWNhdGlvbkNoYW5nZShjYjogKG5vdGlmaWNhdGlvbjogeyBtZXNzYWdlOiBzdHJpbmc7IHR5cGU/OiAnc3VjY2VzcycgfCAnZXJyb3InIHwgJ2luZm8nIHwgJ3dhcm5pbmcnIH0gfCBudWxsKSA9PiB2b2lkKSB7XG4gICAgcmV0dXJuIHJ1bkluSW5qZWN0aW9uQ29udGV4dCh0aGlzLmluamVjdG9yLCAoKSA9PiB7XG4gICAgICBjb25zdCBydW5uZXIgPSBlZmZlY3QoKCkgPT4ge1xuICAgICAgICBjYih0aGlzLl9ub3RpZmljYXRpb24oKSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiAoKSA9PiBydW5uZXIuZGVzdHJveSgpO1xuICAgIH0pO1xuICB9XG59XG5cbiJdfQ==